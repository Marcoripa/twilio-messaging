var NS=Object.create;var Ja=Object.defineProperty,kS=Object.defineProperties,PS=Object.getOwnPropertyDescriptor,OS=Object.getOwnPropertyDescriptors,xS=Object.getOwnPropertyNames,Ya=Object.getOwnPropertySymbols,LS=Object.getPrototypeOf,Xd=Object.prototype.hasOwnProperty,ay=Object.prototype.propertyIsEnumerable;var sy=(t,e,n)=>e in t?Ja(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,y=(t,e)=>{for(var n in e||={})Xd.call(e,n)&&sy(t,n,e[n]);if(Ya)for(var n of Ya(e))ay.call(e,n)&&sy(t,n,e[n]);return t},P=(t,e)=>kS(t,OS(e));var Za=(t,e)=>{var n={};for(var r in t)Xd.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Ya)for(var r of Ya(t))e.indexOf(r)<0&&ay.call(t,r)&&(n[r]=t[r]);return n};var cy=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),FS=(t,e)=>{for(var n in e)Ja(t,n,{get:e[n],enumerable:!0})},VS=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of xS(e))!Xd.call(t,i)&&i!==n&&Ja(t,i,{get:()=>e[i],enumerable:!(r=PS(e,i))||r.enumerable});return t};var ot=(t,e,n)=>(n=t!=null?NS(LS(t)):{},VS(e||!t||!t.__esModule?Ja(n,"default",{value:t,enumerable:!0}):n,t));var St=cy((gre,zv)=>{"use strict";var Ho=typeof Reflect=="object"?Reflect:null,ST=Ho&&typeof Ho.apply=="function"?Ho.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},Ad;Ho&&typeof Ho.ownKeys=="function"?Ad=Ho.ownKeys:Object.getOwnPropertySymbols?Ad=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Ad=function(e){return Object.getOwnPropertyNames(e)};function gj(t){console&&console.warn&&console.warn(t)}var RT=Number.isNaN||function(e){return e!==e};function ee(){ee.init.call(this)}zv.exports=ee;zv.exports.once=_j;ee.EventEmitter=ee;ee.prototype._events=void 0;ee.prototype._eventsCount=0;ee.prototype._maxListeners=void 0;var AT=10;function Rd(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(ee,"defaultMaxListeners",{enumerable:!0,get:function(){return AT},set:function(t){if(typeof t!="number"||t<0||RT(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");AT=t}});ee.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ee.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||RT(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function MT(t){return t._maxListeners===void 0?ee.defaultMaxListeners:t._maxListeners}ee.prototype.getMaxListeners=function(){return MT(this)};ee.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(n.length>0&&(s=n[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(c===void 0)return!1;if(typeof c=="function")ST(c,this,n);else for(var u=c.length,l=xT(c,u),r=0;r<u;++r)ST(l[r],this,n);return!0};function NT(t,e,n,r){var i,o,s;if(Rd(n),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),s===void 0)s=o[e]=n,++t._eventsCount;else if(typeof s=="function"?s=o[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),i=MT(t),i>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,gj(a)}return t}ee.prototype.addListener=function(e,n){return NT(this,e,n,!1)};ee.prototype.on=ee.prototype.addListener;ee.prototype.prependListener=function(e,n){return NT(this,e,n,!0)};function mj(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function kT(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=mj.bind(r);return i.listener=n,r.wrapFn=i,i}ee.prototype.once=function(e,n){return Rd(n),this.on(e,kT(this,e,n)),this};ee.prototype.prependOnceListener=function(e,n){return Rd(n),this.prependListener(e,kT(this,e,n)),this};ee.prototype.removeListener=function(e,n){var r,i,o,s,a;if(Rd(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(o=-1,s=r.length-1;s>=0;s--)if(r[s]===n||r[s].listener===n){a=r[s].listener,o=s;break}if(o<0)return this;o===0?r.shift():vj(r,o),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};ee.prototype.off=ee.prototype.removeListener;ee.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var o=Object.keys(r),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function PT(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?yj(i):xT(i,i.length)}ee.prototype.listeners=function(e){return PT(this,e,!0)};ee.prototype.rawListeners=function(e){return PT(this,e,!1)};ee.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):OT.call(t,e)};ee.prototype.listenerCount=OT;function OT(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}ee.prototype.eventNames=function(){return this._eventsCount>0?Ad(this._events):[]};function xT(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function vj(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function yj(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function _j(t,e){return new Promise(function(n,r){function i(s){t.removeListener(e,o),r(s)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}LT(t,e,o,{once:!0}),e!=="error"&&Ej(t,i,{once:!0})})}function Ej(t,e,n){typeof t.on=="function"&&LT(t,"error",e,n)}function LT(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(o){r.once&&t.removeEventListener(e,i),n(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var Gv=cy((VT,Md)=>{"use strict";(function(t,e){"use strict";typeof define=="function"&&define.amd?define(e):typeof Md=="object"&&Md.exports?Md.exports=e():t.log=e()})(VT,function(){"use strict";var t=function(){},e="undefined",n=typeof window!==e&&typeof window.navigator!==e&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],i={},o=null;function s(p,v){var g=p[v];if(typeof g.bind=="function")return g.bind(p);try{return Function.prototype.bind.call(g,p)}catch{return function(){return Function.prototype.apply.apply(g,[p,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(p){return p==="debug"&&(p="log"),typeof console===e?!1:p==="trace"&&n?a:console[p]!==void 0?s(console,p):console.log!==void 0?s(console,"log"):t}function u(){for(var p=this.getLevel(),v=0;v<r.length;v++){var g=r[v];this[g]=v<p?t:this.methodFactory(g,p,this.name)}if(this.log=this.debug,typeof console===e&&p<this.levels.SILENT)return"No console available for logging"}function l(p){return function(){typeof console!==e&&(u.call(this),this[p].apply(this,arguments))}}function d(p,v,g){return c(p)||l.apply(this,arguments)}function f(p,v){var g=this,_,U,q,j="loglevel";typeof p=="string"?j+=":"+p:typeof p=="symbol"&&(j=void 0);function Wt(se){var Ue=(r[se]||"silent").toUpperCase();if(!(typeof window===e||!j)){try{window.localStorage[j]=Ue;return}catch{}try{window.document.cookie=encodeURIComponent(j)+"="+Ue+";"}catch{}}}function yt(){var se;if(!(typeof window===e||!j)){try{se=window.localStorage[j]}catch{}if(typeof se===e)try{var Ue=window.document.cookie,Ka=encodeURIComponent(j),oy=Ue.indexOf(Ka+"=");oy!==-1&&(se=/^([^;]+)/.exec(Ue.slice(oy+Ka.length+1))[1])}catch{}return g.levels[se]===void 0&&(se=void 0),se}}function _t(){if(!(typeof window===e||!j)){try{window.localStorage.removeItem(j)}catch{}try{window.document.cookie=encodeURIComponent(j)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function gr(se){var Ue=se;if(typeof Ue=="string"&&g.levels[Ue.toUpperCase()]!==void 0&&(Ue=g.levels[Ue.toUpperCase()]),typeof Ue=="number"&&Ue>=0&&Ue<=g.levels.SILENT)return Ue;throw new TypeError("log.setLevel() called with invalid level: "+se)}g.name=p,g.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},g.methodFactory=v||d,g.getLevel=function(){return q??U??_},g.setLevel=function(se,Ue){return q=gr(se),Ue!==!1&&Wt(q),u.call(g)},g.setDefaultLevel=function(se){U=gr(se),yt()||g.setLevel(se,!1)},g.resetLevel=function(){q=null,_t(),u.call(g)},g.enableAll=function(se){g.setLevel(g.levels.TRACE,se)},g.disableAll=function(se){g.setLevel(g.levels.SILENT,se)},g.rebuild=function(){if(o!==g&&(_=gr(o.getLevel())),u.call(g),o===g)for(var se in i)i[se].rebuild()},_=gr(o?o.getLevel():"WARN");var Mi=yt();Mi!=null&&(q=gr(Mi)),u.call(g)}o=new f,o.getLogger=function(v){if(typeof v!="symbol"&&typeof v!="string"||v==="")throw new TypeError("You must supply a name when creating a logger.");var g=i[v];return g||(g=i[v]=new f(v,o.methodFactory)),g};var h=typeof window!==e?window.log:void 0;return o.noConflict=function(){return typeof window!==e&&window.log===o&&(window.log=h),o},o.getLoggers=function(){return i},o.default=o,o})});var je=null,Qa=!1,rf=1,US=null,Ge=Symbol("SIGNAL");function C(t){let e=je;return je=t,e}function ec(){return je}var qo={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ko(t){if(Qa)throw new Error("");if(je===null)return;je.consumerOnSignalRead(t);let e=je.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=je.recomputing;if(r&&(n=e!==void 0?e.nextProducer:je.producers,n!==void 0&&n.producer===t)){je.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===je&&(!r||BS(i,je)))return;let o=Ni(je),s={producer:t,consumer:je,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};je.producersTail=s,e!==void 0?e.nextProducer=s:je.producers=s,o&&fy(t,s)}function uy(){rf++}function of(t){if(!(Ni(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===rf)){if(!t.producerMustRecompute(t)&&!nc(t)){nf(t);return}t.producerRecomputeValue(t),nf(t)}}function sf(t){if(t.consumers===void 0)return;let e=Qa;Qa=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||jS(r)}}finally{Qa=e}}function af(){return je?.consumerAllowSignalWrites!==!1}function jS(t){t.dirty=!0,sf(t),t.consumerMarkedDirty?.(t)}function nf(t){t.dirty=!1,t.lastCleanEpoch=rf}function Yo(t){return t&&ly(t),C(t)}function ly(t){t.producersTail=void 0,t.recomputing=!0}function tc(t,e){C(e),t&&dy(t)}function dy(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(Ni(t))do n=cf(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function nc(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(of(n),r!==n.version))return!0}return!1}function Jo(t){if(Ni(t)){let e=t.producers;for(;e!==void 0;)e=cf(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function fy(t,e){let n=t.consumersTail,r=Ni(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)fy(i.producer,i)}function cf(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Ni(e)){let o=e.producers;for(;o!==void 0;)o=cf(o)}return n}function Ni(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function uf(t){US?.(t)}function BS(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function lf(t,e){return Object.is(t,e)}function rc(t,e){let n=Object.create(HS);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(of(n),Ko(n),n.value===Xa)throw n.error;return n.value};return r[Ge]=n,uf(n),r}var ef=Symbol("UNSET"),tf=Symbol("COMPUTING"),Xa=Symbol("ERRORED"),HS=P(y({},qo),{value:ef,dirty:!0,error:null,equal:lf,kind:"computed",producerMustRecompute(t){return t.value===ef||t.value===tf},producerRecomputeValue(t){if(t.value===tf)throw new Error("");let e=t.value;t.value=tf;let n=Yo(t),r,i=!1;try{r=t.computation(),C(null),i=e!==ef&&e!==Xa&&r!==Xa&&t.equal(e,r)}catch(o){r=Xa,t.error=o}finally{tc(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function $S(){throw new Error}var hy=$S;function py(t){hy(t)}function df(t){hy=t}var WS=null;function ff(t,e){let n=Object.create(ic);n.value=t,e!==void 0&&(n.equal=e);let r=()=>gy(n);return r[Ge]=n,uf(n),[r,s=>Zo(n,s),s=>my(n,s)]}function gy(t){return Ko(t),t.value}function Zo(t,e){af()||py(t),t.equal(t.value,e)||(t.value=e,zS(t))}function my(t,e){af()||py(t),Zo(t,e(t.value))}var ic=P(y({},qo),{equal:lf,value:void 0,kind:"signal"});function zS(t){t.version++,uy(),sf(t),WS?.(t)}function hf(t){let e=C(null);try{return t()}finally{C(e)}}function M(t){return typeof t=="function"}function ki(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var oc=ki(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function mr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ce=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(M(r))try{r()}catch(o){e=o instanceof oc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{vy(o)}catch(s){e=e??[],s instanceof oc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new oc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)vy(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&mr(n,e)}remove(e){let{_finalizers:n}=this;n&&mr(n,e),e instanceof t&&e._removeParent(this)}};Ce.EMPTY=(()=>{let t=new Ce;return t.closed=!0,t})();var pf=Ce.EMPTY;function sc(t){return t instanceof Ce||t&&"closed"in t&&M(t.remove)&&M(t.add)&&M(t.unsubscribe)}function vy(t){M(t)?t():t.unsubscribe()}var Mt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Pi={setTimeout(t,e,...n){let{delegate:r}=Pi;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Pi;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ac(t){Pi.setTimeout(()=>{let{onUnhandledError:e}=Mt;if(e)e(t);else throw t})}function Qo(){}var yy=gf("C",void 0,void 0);function _y(t){return gf("E",void 0,t)}function Ey(t){return gf("N",t,void 0)}function gf(t,e,n){return{kind:t,value:e,error:n}}var vr=null;function Oi(t){if(Mt.useDeprecatedSynchronousErrorHandling){let e=!vr;if(e&&(vr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=vr;if(vr=null,n)throw r}}else t()}function Iy(t){Mt.useDeprecatedSynchronousErrorHandling&&vr&&(vr.errorThrown=!0,vr.error=t)}var yr=class extends Ce{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,sc(e)&&e.add(this)):this.destination=KS}static create(e,n,r){return new xi(e,n,r)}next(e){this.isStopped?vf(Ey(e),this):this._next(e)}error(e){this.isStopped?vf(_y(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?vf(yy,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},GS=Function.prototype.bind;function mf(t,e){return GS.call(t,e)}var yf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){cc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){cc(r)}else cc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){cc(n)}}},xi=class extends yr{constructor(e,n,r){super();let i;if(M(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Mt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&mf(e.next,o),error:e.error&&mf(e.error,o),complete:e.complete&&mf(e.complete,o)}):i=e}this.destination=new yf(i)}};function cc(t){Mt.useDeprecatedSynchronousErrorHandling?Iy(t):ac(t)}function qS(t){throw t}function vf(t,e){let{onStoppedNotification:n}=Mt;n&&Pi.setTimeout(()=>n(t,e))}var KS={closed:!0,next:Qo,error:qS,complete:Qo};var Li=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Nt(t){return t}function _f(...t){return Ef(t)}function Ef(t){return t.length===0?Nt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var O=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=JS(n)?n:new xi(n,r,i);return Oi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=wy(r),new r((i,o)=>{let s=new xi({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Li](){return this}pipe(...n){return Ef(n)(this)}toPromise(n){return n=wy(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function wy(t){var e;return(e=t??Mt.Promise)!==null&&e!==void 0?e:Promise}function YS(t){return t&&M(t.next)&&M(t.error)&&M(t.complete)}function JS(t){return t&&t instanceof yr||YS(t)&&sc(t)}function ZS(t){return M(t?.lift)}function K(t){return e=>{if(ZS(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Y(t,e,n,r,i){return new If(t,e,n,r,i)}var If=class extends yr{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var by=ki(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ae=(()=>{class t extends O{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new uc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new by}next(n){Oi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Oi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Oi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?pf:(this.currentObservers=null,o.push(n),new Ce(()=>{this.currentObservers=null,mr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new O;return n.source=this,n}}return t.create=(e,n)=>new uc(e,n),t})(),uc=class extends Ae{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:pf}};var xe=class extends Ae{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var wf={now(){return(wf.delegate||Date).now()},delegate:void 0};var lc=class extends Ce{constructor(e,n){super()}schedule(e,n=0){return this}};var Xo={setInterval(t,e,...n){let{delegate:r}=Xo;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Xo;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Fi=class extends lc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Xo.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Xo.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,mr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Vi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Vi.now=wf.now;var Ui=class extends Vi{constructor(e,n=Vi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var bf=new Ui(Fi);var dc=class extends Fi{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var fc=class extends Ui{};var Cf=new fc(dc);var tt=new O(t=>t.complete());function Cy(t){return t&&M(t.schedule)}function Dy(t){return t[t.length-1]}function hc(t){return M(Dy(t))?t.pop():void 0}function Vn(t){return Cy(Dy(t))?t.pop():void 0}function Df(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function le(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(d){s(d)}}function c(l){try{u(r.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function Ty(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _r(t){return this instanceof _r?(this.v=t,this):new _r(t)}function Sy(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(h){return function(p){return Promise.resolve(p).then(h,d)}}function a(h,p){r[h]&&(i[h]=function(v){return new Promise(function(g,_){o.push([h,v,g,_])>1||c(h,v)})},p&&(i[h]=p(i[h])))}function c(h,p){try{u(r[h](p))}catch(v){f(o[0][3],v)}}function u(h){h.value instanceof _r?Promise.resolve(h.value.v).then(l,d):f(o[0][2],h)}function l(h){c("next",h)}function d(h){c("throw",h)}function f(h,p){h(p),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Ay(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Ty=="function"?Ty(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}var pc=t=>t&&typeof t.length=="number"&&typeof t!="function";function gc(t){return M(t?.then)}function mc(t){return M(t[Li])}function vc(t){return Symbol.asyncIterator&&M(t?.[Symbol.asyncIterator])}function yc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function QS(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var _c=QS();function Ec(t){return M(t?.[_c])}function Ic(t){return Sy(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield _r(n.read());if(i)return yield _r(void 0);yield yield _r(r)}}finally{n.releaseLock()}})}function wc(t){return M(t?.getReader)}function Ie(t){if(t instanceof O)return t;if(t!=null){if(mc(t))return XS(t);if(pc(t))return eA(t);if(gc(t))return tA(t);if(vc(t))return Ry(t);if(Ec(t))return nA(t);if(wc(t))return rA(t)}throw yc(t)}function XS(t){return new O(e=>{let n=t[Li]();if(M(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function eA(t){return new O(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function tA(t){return new O(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ac)})}function nA(t){return new O(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Ry(t){return new O(e=>{iA(t,e).catch(n=>e.error(n))})}function rA(t){return Ry(Ic(t))}function iA(t,e){var n,r,i,o;return le(this,void 0,void 0,function*(){try{for(n=Ay(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function nt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Un(t,e=0){return K((n,r)=>{n.subscribe(Y(r,i=>nt(r,t,()=>r.next(i),e),()=>nt(r,t,()=>r.complete(),e),i=>nt(r,t,()=>r.error(i),e)))})}function jn(t,e=0){return K((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function My(t,e){return Ie(t).pipe(jn(e),Un(e))}function Ny(t,e){return Ie(t).pipe(jn(e),Un(e))}function ky(t,e){return new O(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Py(t,e){return new O(n=>{let r;return nt(n,e,()=>{r=t[_c](),nt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>M(r?.return)&&r.return()})}function bc(t,e){if(!t)throw new Error("Iterable cannot be null");return new O(n=>{nt(n,e,()=>{let r=t[Symbol.asyncIterator]();nt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Oy(t,e){return bc(Ic(t),e)}function xy(t,e){if(t!=null){if(mc(t))return My(t,e);if(pc(t))return ky(t,e);if(gc(t))return Ny(t,e);if(vc(t))return bc(t,e);if(Ec(t))return Py(t,e);if(wc(t))return Oy(t,e)}throw yc(t)}function de(t,e){return e?xy(t,e):Ie(t)}function F(...t){let e=Vn(t);return de(t,e)}function Tf(t,e){let n=M(t)?t:()=>t,r=i=>i.error(n());return new O(e?i=>e.schedule(r,0,i):r)}function Cc(t){return!!t&&(t instanceof O||M(t.lift)&&M(t.subscribe))}var Er=ki(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function B(t,e){return K((n,r)=>{let i=0;n.subscribe(Y(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:oA}=Array;function sA(t,e){return oA(e)?t(...e):t(e)}function Dc(t){return B(e=>sA(t,e))}var{isArray:aA}=Array,{getPrototypeOf:cA,prototype:uA,keys:lA}=Object;function Tc(t){if(t.length===1){let e=t[0];if(aA(e))return{args:e,keys:null};if(dA(e)){let n=lA(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function dA(t){return t&&typeof t=="object"&&cA(t)===uA}function Sc(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Sf(...t){let e=Vn(t),n=hc(t),{args:r,keys:i}=Tc(t);if(r.length===0)return de([],e);let o=new O(fA(r,e,i?s=>Sc(i,s):Nt));return n?o.pipe(Dc(n)):o}function fA(t,e,n=Nt){return r=>{Ly(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)Ly(e,()=>{let u=de(t[c],e),l=!1;u.subscribe(Y(r,d=>{o[c]=d,l||(l=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Ly(t,e,n){t?nt(n,t,e):e()}function Fy(t,e,n,r,i,o,s,a){let c=[],u=0,l=0,d=!1,f=()=>{d&&!c.length&&!u&&e.complete()},h=v=>u<r?p(v):c.push(v),p=v=>{o&&e.next(v),u++;let g=!1;Ie(n(v,l++)).subscribe(Y(e,_=>{i?.(_),o?h(_):e.next(_)},()=>{g=!0},void 0,()=>{if(g)try{for(u--;c.length&&u<r;){let _=c.shift();s?nt(e,s,()=>p(_)):p(_)}f()}catch(_){e.error(_)}}))};return t.subscribe(Y(e,h,()=>{d=!0,f()})),()=>{a?.()}}function qe(t,e,n=1/0){return M(e)?qe((r,i)=>B((o,s)=>e(r,o,i,s))(Ie(t(r,i))),n):(typeof e=="number"&&(n=e),K((r,i)=>Fy(r,i,t,n)))}function Vy(t=1/0){return qe(Nt,t)}function Uy(){return Vy(1)}function ji(...t){return Uy()(de(t,Vn(t)))}function es(t){return new O(e=>{Ie(t()).subscribe(e)})}function Af(...t){let e=hc(t),{args:n,keys:r}=Tc(t),i=new O(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let l=0;l<s;l++){let d=!1;Ie(n[l]).subscribe(Y(o,f=>{d||(d=!0,u--),a[l]=f},()=>c--,void 0,()=>{(!c||!d)&&(u||o.next(r?Sc(r,a):a),o.complete())}))}});return e?i.pipe(Dc(e)):i}function Et(t,e){return K((n,r)=>{let i=0;n.subscribe(Y(r,o=>t.call(e,o,i++)&&r.next(o)))})}function ts(t){return K((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Y(n,void 0,void 0,s=>{o=Ie(t(s,ts(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Bi(t,e){return M(e)?qe(t,e,1):qe(t,1)}function Rf(t){return K((e,n)=>{let r=!1;e.subscribe(Y(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Be(t){return t<=0?()=>tt:K((e,n)=>{let r=0;e.subscribe(Y(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function jy(t=hA){return K((e,n)=>{let r=!1;e.subscribe(Y(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function hA(){return new Er}function ns(t){return K((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function gn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Et((i,o)=>t(i,o,r)):Nt,Be(1),n?Rf(e):jy(()=>new Er))}function Ac(t){return t<=0?()=>tt:K((e,n)=>{let r=[];e.subscribe(Y(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Mf(...t){let e=Vn(t);return K((n,r)=>{(e?ji(t,n,e):ji(t,n)).subscribe(r)})}function De(t,e){return K((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Y(r,c=>{i?.unsubscribe();let u=0,l=o++;Ie(t(c,l)).subscribe(i=Y(r,d=>r.next(e?e(c,d,l,u++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function rs(t){return K((e,n)=>{Ie(t).subscribe(Y(n,()=>n.complete(),Qo)),!n.closed&&e.subscribe(n)})}function Ke(t,e,n){let r=M(t)||e||n?{next:t,error:e,complete:n}:t;return r?K((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Y(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Nt}var Nf;function Rc(){return Nf}function zt(t){let e=Nf;return Nf=t,e}var By=Symbol("NotFound");function Hi(t){return t===By||t?.name==="\u0275NotFound"}var wr=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},qf=new wr("21.0.7");var Oc="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",E=class extends Error{code;constructor(e,n){super(Ar(e,n)),this.code=e}};function mA(t){return`NG0${Math.abs(t)}`}function Ar(t,e){return`${mA(t)}${e?": "+e:""}`}function J(t){for(let e in t)if(t[e]===J)return e;throw Error("")}function Gy(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function vn(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(vn).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Kf(t,e){return t?e?`${t} ${e}`:t:e||""}var vA=J({__forward_ref__:J});function _n(t){return t.__forward_ref__=_n,t.toString=function(){return vn(this())},t}function Le(t){return Yf(t)?t():t}function Yf(t){return typeof t=="function"&&t.hasOwnProperty(vA)&&t.__forward_ref__===_n}function w(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Gt(t){return{providers:t.providers||[],imports:t.imports||[]}}function us(t){return yA(t,xc)}function Jf(t){return us(t)!==null}function yA(t,e){return t.hasOwnProperty(e)&&t[e]||null}function _A(t){let e=t?.[xc]??null;return e||null}function Pf(t){return t&&t.hasOwnProperty(Nc)?t[Nc]:null}var xc=J({\u0275prov:J}),Nc=J({\u0275inj:J}),I=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=w({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Zf(t){return t&&!!t.\u0275providers}var Qf=J({\u0275cmp:J}),Xf=J({\u0275dir:J}),eh=J({\u0275pipe:J}),th=J({\u0275mod:J}),os=J({\u0275fac:J}),Rr=J({__NG_ELEMENT_ID__:J}),Hy=J({__NG_ENV_ID__:J});function nh(t){return Lc(t,"@NgModule"),t[th]||null}function Hn(t){return Lc(t,"@Component"),t[Qf]||null}function rh(t){return Lc(t,"@Directive"),t[Xf]||null}function qy(t){return Lc(t,"@Pipe"),t[eh]||null}function Lc(t,e){if(t==null)throw new E(-919,!1)}function ls(t){return typeof t=="string"?t:t==null?"":String(t)}function Ky(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():ls(t)}var Yy=J({ngErrorCode:J}),EA=J({ngErrorMessage:J}),IA=J({ngTokenPath:J});function ih(t,e){return Jy("",-200,e)}function Fc(t,e){throw new E(-201,!1)}function Jy(t,e,n){let r=new E(e,t);return r[Yy]=e,r[EA]=t,n&&(r[IA]=n),r}function wA(t){return t[Yy]}var Of;function Zy(){return Of}function st(t){let e=Of;return Of=t,e}function oh(t,e,n){let r=us(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Fc(t,"")}var bA={},Ir=bA,xf="__NG_DI_FLAG__",Lf=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=br(n)||0;try{return this.injector.get(e,r&8?null:Ir,r)}catch(i){if(Hi(i))return i;throw i}}};function CA(t,e=0){let n=Rc();if(n===void 0)throw new E(-203,!1);if(n===null)return oh(t,void 0,e);{let r=DA(e),i=n.retrieve(t,r);if(Hi(i)){if(r.optional)return null;throw i}return i}}function D(t,e=0){return(Zy()||CA)(Le(t),e)}function m(t,e){return D(t,br(e))}function br(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function DA(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Ff(t){let e=[];for(let n=0;n<t.length;n++){let r=Le(t[n]);if(Array.isArray(r)){if(r.length===0)throw new E(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=TA(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(D(i,o))}else e.push(D(r))}return e}function Qy(t,e){return t[xf]=e,t.prototype[xf]=e,t}function TA(t){return t[xf]}function Cr(t,e){let n=t.hasOwnProperty(os);return n?t[os]:null}function Vc(t,e){t.forEach(n=>Array.isArray(n)?Vc(n,e):e(n))}function sh(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ds(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Xy(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function e_(t,e,n){let r=Wi(t,e);return r>=0?t[r|1]=n:(r=~r,Xy(t,r,e,n)),r}function Uc(t,e){let n=Wi(t,e);if(n>=0)return t[n|1]}function Wi(t,e){return SA(t,e,1)}function SA(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var $n={},at=[],Mr=new I(""),ah=new I("",-1),ch=new I(""),ss=class{get(e,n=Ir){if(n===Ir){let i=Jy("",-201);throw i.name="\u0275NotFound",i}return n}};function ct(t){return{\u0275providers:t}}function t_(t){return ct([{provide:Mr,multi:!0,useValue:t}])}function n_(...t){return{\u0275providers:uh(!0,t),\u0275fromNgModule:!0}}function uh(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Vc(e,s=>{let a=s;kc(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&r_(i,o),n}function r_(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];lh(i,o=>{e(o,r)})}}function kc(t,e,n,r){if(t=Le(t),!t)return!1;let i=null,o=Pf(t),s=!o&&Hn(t);if(!o&&!s){let c=t.ngModule;if(o=Pf(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)kc(u,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{Vc(o.imports,l=>{kc(l,e,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&r_(u,e)}if(!a){let u=Cr(i)||(()=>new i);e({provide:i,useFactory:u,deps:at},i),e({provide:ch,useValue:i,multi:!0},i),e({provide:Mr,useValue:()=>D(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=t;lh(c,l=>{e(l,u)})}}else return!1;return i!==t&&t.providers!==void 0}function lh(t,e){for(let n of t)Zf(n)&&(n=n.\u0275providers),Array.isArray(n)?lh(n,e):e(n)}var AA=J({provide:String,useValue:J});function i_(t){return t!==null&&typeof t=="object"&&AA in t}function RA(t){return!!(t&&t.useExisting)}function MA(t){return!!(t&&t.useFactory)}function Dr(t){return typeof t=="function"}function o_(t){return!!t.useClass}var fs=new I(""),Mc={},$y={},kf;function hs(){return kf===void 0&&(kf=new ss),kf}var fe=class{},Tr=class extends fe{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Uf(e,s=>this.processProvider(s)),this.records.set(ah,$i(void 0,this)),i.has("environment")&&this.records.set(fe,$i(void 0,this));let o=this.records.get(fs);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(ch,at,{self:!0}))}retrieve(e,n){let r=br(n)||0;try{return this.get(e,Ir,r)}catch(i){if(Hi(i))return i;throw i}}destroy(){is(this),this._destroyed=!0;let e=C(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),C(e)}}onDestroy(e){return is(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){is(this);let n=zt(this),r=st(void 0),i;try{return e()}finally{zt(n),st(r)}}get(e,n=Ir,r){if(is(this),e.hasOwnProperty(Hy))return e[Hy](this);let i=br(r),o,s=zt(this),a=st(void 0);try{if(!(i&4)){let u=this.records.get(e);if(u===void 0){let l=xA(e)&&us(e);l&&this.injectableDefInScope(l)?u=$i(Vf(e),Mc):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,i)}let c=i&2?hs():this.parent;return n=i&8&&n===Ir?null:n,c.get(e,n)}catch(c){let u=wA(c);throw u===-200||u===-201?new E(u,null):c}finally{st(a),zt(s)}}resolveInjectorInitializers(){let e=C(null),n=zt(this),r=st(void 0),i;try{let o=this.get(Mr,at,{self:!0});for(let s of o)s()}finally{zt(n),st(r),C(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(vn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Le(e);let n=Dr(e)?e:Le(e&&e.provide),r=kA(e);if(!Dr(e)&&e.multi===!0){let i=this.records.get(n);i||(i=$i(void 0,Mc,!0),i.factory=()=>Ff(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=C(null);try{if(n.value===$y)throw ih(vn(e));return n.value===Mc&&(n.value=$y,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&OA(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{C(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Le(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Vf(t){let e=us(t),n=e!==null?e.factory:Cr(t);if(n!==null)return n;if(t instanceof I)throw new E(204,!1);if(t instanceof Function)return NA(t);throw new E(204,!1)}function NA(t){if(t.length>0)throw new E(204,!1);let n=_A(t);return n!==null?()=>n.factory(t):()=>new t}function kA(t){if(i_(t))return $i(void 0,t.useValue);{let e=dh(t);return $i(e,Mc)}}function dh(t,e,n){let r;if(Dr(t)){let i=Le(t);return Cr(i)||Vf(i)}else if(i_(t))r=()=>Le(t.useValue);else if(MA(t))r=()=>t.useFactory(...Ff(t.deps||[]));else if(RA(t))r=(i,o)=>D(Le(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Le(t&&(t.useClass||t.provide));if(PA(t))r=()=>new i(...Ff(t.deps));else return Cr(i)||Vf(i)}return r}function is(t){if(t.destroyed)throw new E(205,!1)}function $i(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function PA(t){return!!t.deps}function OA(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function xA(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Uf(t,e){for(let n of t)Array.isArray(n)?Uf(n,e):n&&Zf(n)?Uf(n.\u0275providers,e):e(n)}function ge(t,e){let n;t instanceof Tr?(is(t),n=t):n=new Lf(t);let r,i=zt(n),o=st(void 0);try{return e()}finally{zt(i),st(o)}}function s_(){return Zy()!==void 0||Rc()!=null}var kt=0,S=1,N=2,Re=3,It=4,wt=5,zi=6,Gi=7,me=8,En=9,qt=10,ue=11,qi=12,fh=13,Nr=14,ut=15,kr=16,Pr=17,Or=18,In=19,hh=20,mn=21,jc=22,ps=23,lt=24,Bc=25,xr=26,Me=27,a_=1,ph=6,Wn=7,gs=8,ms=9,ve=10;function Kt(t){return Array.isArray(t)&&typeof t[a_]=="object"}function Pt(t){return Array.isArray(t)&&t[a_]===!0}function gh(t){return(t.flags&4)!==0}function zn(t){return t.componentOffset>-1}function vs(t){return(t.flags&1)===1}function Yt(t){return!!t.template}function Ki(t){return(t[N]&512)!==0}function Lr(t){return(t[N]&256)===256}var mh="svg",c_="math";function bt(t){for(;Array.isArray(t);)t=t[kt];return t}function vh(t,e){return bt(e[t])}function Ot(t,e){return bt(e[t.index])}function ys(t,e){return t.data[e]}function u_(t,e){return t[e]}function Ct(t,e){let n=e[t];return Kt(n)?n:n[kt]}function Hc(t){return(t[N]&128)===128}function l_(t){return Pt(t[Re])}function Jt(t,e){return e==null?null:t[e]}function yh(t){t[Pr]=0}function _h(t){t[N]&1024||(t[N]|=1024,Hc(t)&&Es(t))}function d_(t,e){for(;t>0;)e=e[Nr],t--;return e}function _s(t){return!!(t[N]&9216||t[lt]?.dirty)}function $c(t){t[qt].changeDetectionScheduler?.notify(8),t[N]&64&&(t[N]|=1024),_s(t)&&Es(t)}function Es(t){t[qt].changeDetectionScheduler?.notify(0);let e=Bn(t);for(;e!==null&&!(e[N]&8192||(e[N]|=8192,!Hc(e)));)e=Bn(e)}function Eh(t,e){if(Lr(t))throw new E(911,!1);t[mn]===null&&(t[mn]=[]),t[mn].push(e)}function f_(t,e){if(t[mn]===null)return;let n=t[mn].indexOf(e);n!==-1&&t[mn].splice(n,1)}function Bn(t){let e=t[Re];return Pt(e)?e[Re]:e}function h_(t){return t[Gi]??=[]}function p_(t){return t.cleanup??=[]}var V={lFrame:N_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var jf=!1;function g_(){return V.lFrame.elementDepthCount}function m_(){V.lFrame.elementDepthCount++}function v_(){V.lFrame.elementDepthCount--}function Ih(){return V.bindingsEnabled}function y_(){return V.skipHydrationRootTNode!==null}function __(t){return V.skipHydrationRootTNode===t}function E_(){V.skipHydrationRootTNode=null}function H(){return V.lFrame.lView}function He(){return V.lFrame.tView}function Ye(t){return V.lFrame.contextLView=t,t[me]}function Je(t){return V.lFrame.contextLView=null,t}function dt(){let t=wh();for(;t!==null&&t.type===64;)t=t.parent;return t}function wh(){return V.lFrame.currentTNode}function I_(){let t=V.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Yi(t,e){let n=V.lFrame;n.currentTNode=t,n.isParent=e}function bh(){return V.lFrame.isParent}function w_(){V.lFrame.isParent=!1}function b_(){return V.lFrame.contextLView}function Ch(){return jf}function Dh(t){let e=jf;return jf=t,e}function Th(){let t=V.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function C_(t){return V.lFrame.bindingIndex=t}function Fr(){return V.lFrame.bindingIndex++}function D_(t){let e=V.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function T_(){return V.lFrame.inI18n}function S_(t,e){let n=V.lFrame;n.bindingIndex=n.bindingRootIndex=t,Wc(e)}function A_(){return V.lFrame.currentDirectiveIndex}function Wc(t){V.lFrame.currentDirectiveIndex=t}function R_(t){let e=V.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Sh(t){V.lFrame.currentQueryIndex=t}function LA(t){let e=t[S];return e.type===2?e.declTNode:e.type===1?t[wt]:null}function Ah(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=LA(o),i===null||(o=o[Nr],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=V.lFrame=M_();return r.currentTNode=e,r.lView=t,!0}function zc(t){let e=M_(),n=t[S];V.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function M_(){let t=V.lFrame,e=t===null?null:t.child;return e===null?N_(t):e}function N_(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function k_(){let t=V.lFrame;return V.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Rh=k_;function Gc(){let t=k_();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function P_(t){return(V.lFrame.contextLView=d_(t,V.lFrame.contextLView))[me]}function Gn(){return V.lFrame.selectedIndex}function qn(t){V.lFrame.selectedIndex=t}function qc(){let t=V.lFrame;return ys(t.tView,t.selectedIndex)}function Ji(){V.lFrame.currentNamespace=mh}function Zi(){FA()}function FA(){V.lFrame.currentNamespace=null}function O_(){return V.lFrame.currentNamespace}var x_=!0;function Kc(){return x_}function Yc(t){x_=t}function Bf(t,e=null,n=null,r){let i=Mh(t,e,n,r);return i.resolveInjectorInitializers(),i}function Mh(t,e=null,n=null,r,i=new Set){let o=[n||at,n_(t)];return r=r||(typeof t=="object"?void 0:vn(t)),new Tr(o,e||hs(),r||null,i)}var Fe=class t{static THROW_IF_NOT_FOUND=Ir;static NULL=new ss;static create(e,n){if(Array.isArray(e))return Bf({name:""},n,e,"");{let r=e.name??"";return Bf({name:r},e.parent,e.providers,r)}}static \u0275prov=w({token:t,providedIn:"any",factory:()=>D(ah)});static __NG_ELEMENT_ID__=-1},ye=new I(""),Zt=(()=>{class t{static __NG_ELEMENT_ID__=VA;static __NG_ENV_ID__=n=>n}return t})(),Hf=class extends Zt{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Lr(this._lView)}onDestroy(e){let n=this._lView;return Eh(n,e),()=>f_(n,e)}};function VA(){return new Hf(H())}var L_=!1,wn=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new xe(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new O(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=w({token:t,providedIn:"root",factory:()=>new t})}return t})(),$f=class extends Ae{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,s_()&&(this.destroyRef=m(Zt,{optional:!0})??void 0,this.pendingTasks=m(wn,{optional:!0})??void 0)}emit(e){let n=C(null);try{super.next(e)}finally{C(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ce&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},we=$f;function Pc(...t){}function Nh(t){let e,n;function r(){t=Pc;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function kh(t){return queueMicrotask(()=>t()),()=>{t=Pc}}var Ph="isAngularZone",as=Ph+"_ID",UA=0,he=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new we(!1);onMicrotaskEmpty=new we(!1);onStable=new we(!1);onError=new we(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=L_}=e;if(typeof Zone>"u")throw new E(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,HA(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Ph)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new E(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new E(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,jA,Pc,Pc);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},jA={};function Oh(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function BA(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Nh(()=>{t.callbackScheduled=!1,Wf(t),t.isCheckStableRunning=!0,Oh(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Wf(t)}function HA(t){let e=()=>{BA(t)},n=UA++;t._inner=t._inner.fork({name:"angular",properties:{[Ph]:!0,[as]:n,[as+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if($A(c))return r.invokeTask(o,s,a,c);try{return Wy(t),r.invokeTask(o,s,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),zy(t)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return Wy(t),r.invoke(o,s,a,c,u)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!WA(c)&&e(),zy(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Wf(t),Oh(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Wf(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Wy(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function zy(t){t._nesting--,Oh(t)}var cs=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new we;onMicrotaskEmpty=new we;onStable=new we;onError=new we;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function $A(t){return F_(t,"__ignore_ng_zone__")}function WA(t){return F_(t,"__scheduler_tick__")}function F_(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var yn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Dt=new I("",{factory:()=>{let t=m(he),e=m(fe),n;return r=>{t.runOutsideAngular(()=>{e.destroyed&&!n?setTimeout(()=>{throw r}):(n??=e.get(yn),n.handleError(r))})}}}),V_={provide:Mr,useValue:()=>{let t=m(yn,{optional:!0})},multi:!0},zA=new I("",{factory:()=>{let t=m(ye).defaultView;if(!t)return;let e=m(Dt),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),m(Zt).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function xh(){return ct([t_(()=>void m(zA))])}function rt(t,e){let[n,r,i]=ff(t,e?.equal),o=n,s=o[Ge];return o.set=r,o.update=i,o.asReadonly=U_.bind(o),o}function U_(){let t=this[Ge];if(t.readonlyFn===void 0){let e=()=>this();e[Ge]=t,t.readonlyFn=e}return t.readonlyFn}var Sr=class{},Is=new I("",{factory:()=>!0});var Lh=new I(""),Kn=(()=>{class t{internalPendingTasks=m(wn);scheduler=m(Sr);errorHandler=m(Dt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=w({token:t,providedIn:"root",factory:()=>new t})}return t})(),Fh=(()=>{class t{static \u0275prov=w({token:t,providedIn:"root",factory:()=>new zf})}return t})(),zf=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}},Gf=class{[Ge];constructor(e){this[Ge]=e}destroy(){this[Ge].destroy()}};function Te(t){return hf(t)}function ro(t){return{toString:t}.toString()}var Jc="__parameters__";function XA(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function e0(t,e,n){return ro(()=>{let r=XA(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,l){let d=c.hasOwnProperty(Jc)?c[Jc]:Object.defineProperty(c,Jc,{value:[]})[Jc];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(s),c}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Jn=Qy(e0("Optional"),8);function t0(t){return typeof t=="function"}function mE(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var tu=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}},Wr=(()=>{let t=()=>vE;return t.ngInherit=!0,t})();function vE(t){return t.type.prototype.ngOnChanges&&(t.setInput=r0),n0}function n0(){let t=_E(this),e=t?.current;if(e){let n=t.previous;if(n===$n)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function r0(t,e,n,r,i){let o=this.declaredInputs[r],s=_E(t)||i0(t,{previous:$n,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new tu(u&&u.currentValue,n,c===$n),mE(t,e,i,n)}var yE="__ngSimpleChanges__";function _E(t){return t[yE]||null}function i0(t,e){return t[yE]=e}var j_=[];var X=function(t,e=null,n){for(let r=0;r<j_.length;r++){let i=j_[r];i(t,e,n)}},W=(function(t){return t[t.TemplateCreateStart=0]="TemplateCreateStart",t[t.TemplateCreateEnd=1]="TemplateCreateEnd",t[t.TemplateUpdateStart=2]="TemplateUpdateStart",t[t.TemplateUpdateEnd=3]="TemplateUpdateEnd",t[t.LifecycleHookStart=4]="LifecycleHookStart",t[t.LifecycleHookEnd=5]="LifecycleHookEnd",t[t.OutputStart=6]="OutputStart",t[t.OutputEnd=7]="OutputEnd",t[t.BootstrapApplicationStart=8]="BootstrapApplicationStart",t[t.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",t[t.BootstrapComponentStart=10]="BootstrapComponentStart",t[t.BootstrapComponentEnd=11]="BootstrapComponentEnd",t[t.ChangeDetectionStart=12]="ChangeDetectionStart",t[t.ChangeDetectionEnd=13]="ChangeDetectionEnd",t[t.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",t[t.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",t[t.AfterRenderHooksStart=16]="AfterRenderHooksStart",t[t.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",t[t.ComponentStart=18]="ComponentStart",t[t.ComponentEnd=19]="ComponentEnd",t[t.DeferBlockStateStart=20]="DeferBlockStateStart",t[t.DeferBlockStateEnd=21]="DeferBlockStateEnd",t[t.DynamicComponentStart=22]="DynamicComponentStart",t[t.DynamicComponentEnd=23]="DynamicComponentEnd",t[t.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",t[t.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",t})(W||{});function o0(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=vE(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function EE(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function Qc(t,e,n){IE(t,e,3,n)}function Xc(t,e,n,r){(t[N]&3)===n&&IE(t,e,n,r)}function Vh(t,e){let n=t[N];(n&3)===e&&(n&=16383,n+=1,t[N]=n)}function IE(t,e,n,r){let i=r!==void 0?t[Pr]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Pr]+=65536),(a<o||o==-1)&&(s0(t,n,e,c),t[Pr]=(t[Pr]&4294901760)+c+2),c++}function B_(t,e){X(W.LifecycleHookStart,t,e);let n=C(null);try{e.call(t)}finally{C(n),X(W.LifecycleHookEnd,t,e)}}function s0(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[N]>>14<t[Pr]>>16&&(t[N]&3)===e&&(t[N]+=16384,B_(a,o)):B_(a,o)}var Xi=-1,Ur=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function a0(t){return(t.flags&8)!==0}function c0(t){return(t.flags&16)!==0}function u0(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];d0(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function l0(t){return t===3||t===4||t===6}function d0(t){return t.charCodeAt(0)===64}function Cs(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?H_(t,n,i,null,e[++r]):H_(t,n,i,null,null))}}return t}function H_(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function wE(t){return t!==Xi}function nu(t){return t&32767}function f0(t){return t>>16}function ru(t,e){let n=f0(t),r=e;for(;n>0;)r=r[Nr],n--;return r}var Yh=!0;function $_(t){let e=Yh;return Yh=t,e}var h0=256,bE=h0-1,CE=5,p0=0,Qt={};function g0(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Rr)&&(r=n[Rr]),r==null&&(r=n[Rr]=p0++);let i=r&bE,o=1<<i;e.data[t+(i>>CE)]|=o}function iu(t,e){let n=DE(t,e);if(n!==-1)return n;let r=e[S];r.firstCreatePass&&(t.injectorIndex=e.length,Uh(r.data,t),Uh(e,null),Uh(r.blueprint,null));let i=mp(t,e),o=t.injectorIndex;if(wE(i)){let s=nu(i),a=ru(i,e),c=a[S].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function Uh(t,e){t.push(0,0,0,0,0,0,0,0,e)}function DE(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function mp(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=ME(i),r===null)return Xi;if(n++,i=i[Nr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Xi}function Jh(t,e,n){g0(t,e,n)}function TE(t,e,n){if(n&8||t!==void 0)return t;Fc(e,"NodeInjector")}function SE(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[En],o=st(void 0);try{return i?i.get(e,r,n&8):oh(e,r,n&8)}finally{st(o)}}return TE(r,e,n)}function AE(t,e,n,r=0,i){if(t!==null){if(e[N]&2048&&!(r&2)){let s=E0(t,e,n,r,Qt);if(s!==Qt)return s}let o=RE(t,e,n,r,Qt);if(o!==Qt)return o}return SE(e,n,r,i)}function RE(t,e,n,r,i){let o=y0(n);if(typeof o=="function"){if(!Ah(e,t,r))return r&1?TE(i,n,r):SE(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Fc(n);else return s}finally{Rh()}}else if(typeof o=="number"){let s=null,a=DE(t,e),c=Xi,u=r&1?e[ut][wt]:null;for((a===-1||r&4)&&(c=a===-1?mp(t,e):e[a+8],c===Xi||!z_(r,!1)?a=-1:(s=e[S],a=nu(c),e=ru(c,e)));a!==-1;){let l=e[S];if(W_(o,a,l.data)){let d=m0(a,e,n,s,r,u);if(d!==Qt)return d}c=e[a+8],c!==Xi&&z_(r,e[S].data[a+8]===u)&&W_(o,a,e)?(s=l,a=nu(c),e=ru(c,e)):a=-1}}return i}function m0(t,e,n,r,i,o){let s=e[S],a=s.data[t+8],c=r==null?zn(a)&&Yh:r!=s&&(a.type&3)!==0,u=i&1&&o===a,l=v0(a,s,n,c,u);return l!==null?ou(e,s,l,a,i):Qt}function v0(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,u=t.directiveEnd,l=o>>20,d=r?a:a+l,f=i?a+l:u;for(let h=d;h<f;h++){let p=s[h];if(h<c&&n===p||h>=c&&p.type===n)return h}if(i){let h=s[c];if(h&&Yt(h)&&h.type===n)return c}return null}function ou(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof Ur){let a=o;if(a.resolving){let h=Ky(s[n]);throw ih(h)}let c=$_(a.canSeeViewProviders);a.resolving=!0;let u=s[n].type||s[n],l,d=a.injectImpl?st(a.injectImpl):null,f=Ah(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&o0(n,s[n],e)}finally{d!==null&&st(d),$_(c),a.resolving=!1,Rh()}}return o}function y0(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Rr)?t[Rr]:void 0;return typeof e=="number"?e>=0?e&bE:_0:e}function W_(t,e,n){let r=1<<t;return!!(n[e+(t>>CE)]&r)}function z_(t,e){return!(t&2)&&!(t&1&&e)}var Vr=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return AE(this._tNode,this._lView,e,br(r),n)}};function _0(){return new Vr(dt(),H())}function zr(t){return ro(()=>{let e=t.prototype.constructor,n=e[os]||Zh(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[os]||Zh(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Zh(t){return Yf(t)?()=>{let e=Zh(Le(t));return e&&e()}:Cr(t)}function E0(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[N]&2048&&!Ki(s);){let a=RE(o,s,n,r|2,Qt);if(a!==Qt)return a;let c=o.parent;if(!c){let u=s[hh];if(u){let l=u.get(n,Qt,r);if(l!==Qt)return l}c=ME(s),s=s[Nr]}o=c}return i}function ME(t){let e=t[S],n=e.type;return n===2?e.declTNode:n===1?t[wt]:null}function I0(){return vu(dt(),H())}function vu(t,e){return new Gr(Ot(t,e))}var Gr=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=I0}return t})();function NE(t){return(t.flags&128)===128}var vp=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(vp||{}),kE=new Map,w0=0;function b0(){return w0++}function C0(t){kE.set(t[In],t)}function Qh(t){kE.delete(t[In])}var G_="__ngContext__";function eo(t,e){Kt(e)?(t[G_]=e[In],C0(e)):t[G_]=e}function PE(t){return xE(t[qi])}function OE(t){return xE(t[It])}function xE(t){for(;t!==null&&!Pt(t);)t=t[It];return t}var D0;function yp(t){D0=t}var yu=new I("",{factory:()=>T0}),T0="ng";var _u=new I(""),qr=new I("",{providedIn:"platform",factory:()=>"unknown"});var Eu=new I("",{factory:()=>m(ye).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var LE="r";var FE="di";var VE=!1,UE=new I("",{factory:()=>VE});var S0=(t,e,n,r)=>{};function A0(t,e,n,r){S0(t,e,n,r)}function _p(t){return(t.flags&32)===32}var R0=()=>null;function jE(t,e,n=!1){return R0(t,e,n)}function BE(t,e){let n=t.contentQueries;if(n!==null){let r=C(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Sh(o),a.contentQueries(2,e[s],s)}}}finally{C(r)}}}function Xh(t,e,n){Sh(0);let r=C(null);try{e(t,n)}finally{C(r)}}function HE(t,e,n){if(gh(e)){let r=C(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{C(r)}}}var Lt=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t[t.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",t})(Lt||{});var su=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Oc})`}};function Ep(t){return t instanceof su?t.changingThisBreaksApplicationSecurity:t}function $E(t,e){let n=WE(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Oc})`)}return n===e}function WE(t){return t instanceof su&&t.getTypeName()||null}var M0=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function zE(t){return t=String(t),t.match(M0)?t:"unsafe:"+t}function N0(t,e){return t.createText(e)}function k0(t,e,n){t.setValue(e,n)}function GE(t,e,n){return t.createElement(e,n)}function au(t,e,n,r,i){t.insertBefore(e,n,r,i)}function qE(t,e,n){t.appendChild(e,n)}function q_(t,e,n,r,i){r!==null?au(t,e,n,r,i):qE(t,e,n)}function KE(t,e,n,r){t.removeChild(null,e,n,r)}function P0(t,e,n){t.setAttribute(e,"style",n)}function O0(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function YE(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&u0(t,e,r),i!==null&&O0(t,e,i),o!==null&&P0(t,e,o)}var Ip=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(Ip||{});function wp(t){let e=x0();return e?e.sanitize(Ip.URL,t)||"":$E(t,"URL")?Ep(t):zE(ls(t))}function x0(){let t=H();return t&&t[qt].sanitizer}function JE(t){return t instanceof Function?t():t}function L0(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var ZE="ng-template";function F0(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&L0(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(bp(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function bp(t){return t.type===4&&t.value!==ZE}function V0(t,e,n){let r=t.type===4&&!n?ZE:t.value;return e===r}function U0(t,e,n){let r=4,i=t.attrs,o=i!==null?H0(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!xt(r)&&!xt(c))return!1;if(s&&xt(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!V0(t,c,n)||c===""&&e.length===1){if(xt(r))return!1;s=!0}}else if(r&8){if(i===null||!F0(t,i,c,n)){if(xt(r))return!1;s=!0}}else{let u=e[++a],l=j0(c,i,bp(t),n);if(l===-1){if(xt(r))return!1;s=!0;continue}if(u!==""){let d;if(l>o?d="":d=i[l+1].toLowerCase(),r&2&&u!==d){if(xt(r))return!1;s=!0}}}}return xt(r)||s}function xt(t){return(t&1)===0}function j0(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return $0(e,t)}function B0(t,e,n=!1){for(let r=0;r<e.length;r++)if(U0(t,e[r],n))return!0;return!1}function H0(t){for(let e=0;e<t.length;e++){let n=t[e];if(l0(n))return e}return t.length}function $0(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function K_(t,e){return t?":not("+e.trim()+")":e}function W0(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!xt(s)&&(e+=K_(o,i),i=""),r=s,o=o||!xt(r);n++}return i!==""&&(e+=K_(o,i)),e}function z0(t){return t.map(W0).join(",")}function G0(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!xt(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var tn={};function Cp(t,e,n,r,i,o,s,a,c,u,l){let d=Me+r,f=d+i,h=q0(d,f),p=typeof u=="function"?u():u;return h[S]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:l}}function q0(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:tn);return n}function K0(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Cp(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Dp(t,e,n,r,i,o,s,a,c,u,l){let d=e.blueprint.slice();return d[kt]=i,d[N]=r|4|128|8|64|1024,(u!==null||t&&t[N]&2048)&&(d[N]|=2048),yh(d),d[Re]=d[Nr]=t,d[me]=n,d[qt]=s||t&&t[qt],d[ue]=a||t&&t[ue],d[En]=c||t&&t[En]||null,d[wt]=o,d[In]=b0(),d[zi]=l,d[hh]=u,d[ut]=e.type==2?t[ut]:d,d}function Y0(t,e,n){let r=Ot(e,t),i=K0(n),o=t[qt].rendererFactory,s=Tp(t,Dp(t,i,null,QE(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function QE(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function XE(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Tp(t,e){return t[qi]?t[fh][It]=e:t[qi]=e,t[fh]=e,e}function ne(t=1){eI(He(),H(),Gn()+t,!1)}function eI(t,e,n,r){if(!r)if((e[N]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Qc(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Xc(e,o,0,n)}qn(n)}var Iu=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(Iu||{});function ep(t,e,n,r){let i=C(null);try{let[o,s,a]=t.inputs[n],c=null;(s&Iu.SignalBased)!==0&&(c=e[o][Ge]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,c,r,n,o):mE(e,c,o,r)}finally{C(i)}}var Xt=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(Xt||{}),J0;function Sp(t,e){return J0(t,e)}var jr=new Set,Ap=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(Ap||{}),Kr=new I(""),Y_=new Set;function Yr(t){Y_.has(t)||(Y_.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var tI=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=w({token:t,providedIn:"root",factory:()=>new t})}return t})();var nI=new I("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:m(fe)})});function rI(t,e,n){let r=t.get(nI);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function Z0(t,e){let n=t.get(nI);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function Q0(t,e){for(let[n,r]of e)rI(t,r.animateFns)}function J_(t,e,n,r){let i=t?.[xr]?.enter;e!==null&&i&&i.has(n.index)&&Q0(r,i)}function Qi(t,e,n,r,i,o,s,a){if(i!=null){let c,u=!1;Pt(i)?c=i:Kt(i)&&(u=!0,i=i[kt]);let l=bt(i);t===0&&r!==null?(J_(a,r,o,n),s==null?qE(e,r,l):au(e,r,l,s||null,!0)):t===1&&r!==null?(J_(a,r,o,n),au(e,r,l,s||null,!0)):t===2?Z_(a,o,n,d=>{KE(e,l,u,d)}):t===3&&Z_(a,o,n,()=>{e.destroyNode(l)}),c!=null&&dR(e,t,n,c,o,r,s)}}function X0(t,e){iI(t,e),e[kt]=null,e[wt]=null}function eR(t,e,n,r,i,o){r[kt]=i,r[wt]=e,bu(t,r,n,1,i,o)}function iI(t,e){e[qt].changeDetectionScheduler?.notify(9),bu(t,e,e[ue],2,null,null)}function tR(t){let e=t[qi];if(!e)return jh(t[S],t);for(;e;){let n=null;if(Kt(e))n=e[qi];else{let r=e[ve];r&&(n=r)}if(!n){for(;e&&!e[It]&&e!==t;)Kt(e)&&jh(e[S],e),e=e[Re];e===null&&(e=t),Kt(e)&&jh(e[S],e),n=e&&e[It]}e=n}}function Rp(t,e){let n=t[ms],r=n.indexOf(e);n.splice(r,1)}function wu(t,e){if(Lr(e))return;let n=e[ue];n.destroyNode&&bu(t,e,n,3,null,null),tR(e)}function jh(t,e){if(Lr(e))return;let n=C(null);try{e[N]&=-129,e[N]|=256,e[lt]&&Jo(e[lt]),iR(t,e),rR(t,e),e[S].type===1&&e[ue].destroy();let r=e[kr];if(r!==null&&Pt(e[Re])){r!==e[Re]&&Rp(r,e);let i=e[Or];i!==null&&i.detachView(t)}Qh(e)}finally{C(n)}}function Z_(t,e,n,r){let i=t?.[xr];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&jr.add(t[In]),rI(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let u=s.animateFns[c],{promise:l}=u();a.push(l)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),nR(t,r)}else t&&jr.delete(t[In]),r(!1)},i)}function nR(t,e){let n=t[xr]?.running;if(n){n.then(()=>{t[xr].running=void 0,jr.delete(t[In]),e(!0)});return}e(!1)}function rR(t,e){let n=t.cleanup,r=e[Gi];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[Gi]=null);let i=e[mn];if(i!==null){e[mn]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[ps];if(o!==null){e[ps]=null;for(let s of o)s.destroy()}}function iR(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Ur)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];X(W.LifecycleHookStart,a,c);try{c.call(a)}finally{X(W.LifecycleHookEnd,a,c)}}else{X(W.LifecycleHookStart,i,o);try{o.call(i)}finally{X(W.LifecycleHookEnd,i,o)}}}}}function oR(t,e,n){return sR(t,e.parent,n)}function sR(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[kt];if(zn(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Lt.None||i===Lt.Emulated)return null}return Ot(r,n)}function aR(t,e,n){return uR(t,e,n)}function cR(t,e,n){return t.type&40?Ot(t,n):null}var uR=cR,Q_;function Mp(t,e,n,r){let i=oR(t,r,e),o=e[ue],s=r.parent||e[wt],a=aR(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)q_(o,i,n[c],a,!1);else q_(o,i,n,a,!1);Q_!==void 0&&Q_(o,r,e,n,i)}function ws(t,e){if(e!==null){let n=e.type;if(n&3)return Ot(e,t);if(n&4)return tp(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ws(t,r);{let i=t[e.index];return Pt(i)?tp(-1,i):bt(i)}}else{if(n&128)return ws(t,e.next);if(n&32)return Sp(e,t)()||bt(t[e.index]);{let r=oI(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Bn(t[ut]);return ws(i,r)}else return ws(t,e.next)}}}return null}function oI(t,e){if(e!==null){let r=t[ut][wt],i=e.projection;return r.projection[i]}return null}function tp(t,e){let n=ve+t+1;if(n<e.length){let r=e[n],i=r[S].firstChild;if(i!==null)return ws(r,i)}return e[Wn]}function Np(t,e,n,r,i,o,s){for(;n!=null;){let a=r[En];if(n.type===128){n=n.next;continue}let c=r[n.index],u=n.type;if(s&&e===0&&(c&&eo(bt(c),r),n.flags|=2),!_p(n))if(u&8)Np(t,e,n.child,r,i,o,!1),Qi(e,t,a,i,c,n,o,r);else if(u&32){let l=Sp(n,r),d;for(;d=l();)Qi(e,t,a,i,d,n,o,r);Qi(e,t,a,i,c,n,o,r)}else u&16?lR(t,e,r,n,i,o):Qi(e,t,a,i,c,n,o,r);n=s?n.projectionNext:n.next}}function bu(t,e,n,r,i,o){Np(n,r,t.firstChild,e,i,o,!1)}function lR(t,e,n,r,i,o){let s=n[ut],c=s[wt].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];Qi(e,t,n[En],i,l,r,o,n)}else{let u=c,l=s[Re];NE(r)&&(u.flags|=128),Np(t,e,u,l,i,o,!0)}}function dR(t,e,n,r,i,o,s){let a=r[Wn],c=bt(r);a!==c&&Qi(e,t,n,o,a,i,s);for(let u=ve;u<r.length;u++){let l=r[u];bu(l[S],l,t,e,o,a)}}function fR(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Xt.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Xt.Important),t.setStyle(n,r,i,o))}}function sI(t,e,n,r,i){let o=Gn(),s=r&2;try{qn(-1),s&&e.length>Me&&eI(t,e,Me,!1);let a=s?W.TemplateUpdateStart:W.TemplateCreateStart;X(a,i,n),n(r,i)}finally{qn(o);let a=s?W.TemplateUpdateEnd:W.TemplateCreateEnd;X(a,i,n)}}function kp(t,e,n){_R(t,e,n),(n.flags&64)===64&&ER(t,e,n)}function Pp(t,e,n=Ot){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function hR(t,e,n,r){let o=r.get(UE,VE)||n===Lt.ShadowDom||n===Lt.ExperimentalIsolatedShadowDom,s=t.selectRootElement(e,o);return pR(s),s}function pR(t){gR(t)}var gR=()=>null;function mR(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function aI(t,e,n,r,i,o){let s=e[S];if(Op(t,s,e,n,r)){zn(t)&&yR(e,t.index);return}t.type&3&&(n=mR(n)),vR(t,e,n,r,i,o)}function vR(t,e,n,r,i,o){if(t.type&3){let s=Ot(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function yR(t,e){let n=Ct(e,t);n[N]&16||(n[N]|=64)}function _R(t,e,n){let r=n.directiveStart,i=n.directiveEnd;zn(n)&&Y0(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||iu(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],c=ou(e,t,s,n);if(eo(c,e),o!==null&&CR(e,s-r,c,a,n,o),Yt(a)){let u=Ct(n.index,e);u[me]=ou(e,t,s,n)}}}function ER(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=A_();try{qn(o);for(let a=r;a<i;a++){let c=t.data[a],u=e[a];Wc(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&IR(c,u)}}finally{qn(-1),Wc(s)}}function IR(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function cI(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];B0(e,o.selectors,!1)&&(r??=[],Yt(o)?r.unshift(o):r.push(o))}return r}function wR(t,e,n,r,i,o){let s=Ot(t,e);bR(e[ue],s,o,t.value,n,r,i)}function bR(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?ls(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function CR(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],u=s[a+1];ep(r,n,c,u)}}function DR(t,e,n,r,i){let o=Me+n,s=e[S],a=i(s,e,t,r,n);e[o]=a,Yi(t,!0);let c=t.type===2;return c?(YE(e[ue],a,t),(g_()===0||vs(t))&&eo(a,e),m_()):eo(a,e),Kc()&&(!c||!_p(t))&&Mp(s,e,a,t),t}function TR(t){let e=t;return bh()?w_():(e=e.parent,Yi(e,!1)),e}function SR(t,e){let n=t[En];if(!n)return;let r;try{r=n.get(Dt,null)}catch{r=null}r?.(e)}function Op(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let u=s[c],l=s[c+1],d=e.data[u];ep(d,n[u],l,i),a=!0}if(o)for(let c of o){let u=n[c],l=e.data[c];ep(l,u,r,i),a=!0}return a}function AR(t,e){let n=Ct(e,t),r=n[S];RR(r,n);let i=n[kt];i!==null&&n[zi]===null&&(n[zi]=jE(i,n[En])),X(W.ComponentStart);try{xp(r,n,n[me])}finally{X(W.ComponentEnd,n[me])}}function RR(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function xp(t,e,n){zc(e);try{let r=t.viewQuery;r!==null&&Xh(1,r,n);let i=t.template;i!==null&&sI(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Or]?.finishViewCreation(t),t.staticContentQueries&&BE(t,e),t.staticViewQueries&&Xh(2,t.viewQuery,n);let o=t.components;o!==null&&MR(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[N]&=-5,Gc()}}function MR(t,e){for(let n=0;n<e.length;n++)AR(t,e[n])}function Cu(t,e,n,r){let i=C(null);try{let o=e.tView,a=t[N]&4096?4096:16,c=Dp(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=t[e.index];c[kr]=u;let l=t[Or];return l!==null&&(c[Or]=l.createEmbeddedView(o)),xp(o,c,n),c}finally{C(i)}}function Ds(t,e){return!e||e.firstChild===null||NE(t)}function Ts(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(bt(o)),Pt(o)&&uI(o,r);let s=n.type;if(s&8)Ts(t,e,n.child,r);else if(s&32){let a=Sp(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=oI(e,n);if(Array.isArray(a))r.push(...a);else{let c=Bn(e[ut]);Ts(c[S],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function uI(t,e){for(let n=ve;n<t.length;n++){let r=t[n],i=r[S].firstChild;i!==null&&Ts(r[S],r,i,e)}t[Wn]!==t[kt]&&e.push(t[Wn])}function lI(t){if(t[Bc]!==null){for(let e of t[Bc])e.impl.addSequence(e);t[Bc].length=0}}var dI=[];function NR(t){return t[lt]??kR(t)}function kR(t){let e=dI.pop()??Object.create(OR);return e.lView=t,e}function PR(t){t.lView[lt]!==t&&(t.lView=null,dI.push(t))}var OR=P(y({},qo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Es(t.lView)},consumerOnSignalRead(){this.lView[lt]=this}});function xR(t){let e=t[lt]??Object.create(LR);return e.lView=t,e}var LR=P(y({},qo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Bn(t.lView);for(;e&&!fI(e[S]);)e=Bn(e);e&&_h(e)},consumerOnSignalRead(){this.lView[lt]=this}});function fI(t){return t.type!==2}function hI(t){if(t[ps]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[ps])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[N]&8192)}}var FR=100;function pI(t,e=0){let r=t[qt].rendererFactory,i=!1;i||r.begin?.();try{VR(t,e)}finally{i||r.end?.()}}function VR(t,e){let n=Ch();try{Dh(!0),np(t,e);let r=0;for(;_s(t);){if(r===FR)throw new E(103,!1);r++,np(t,1)}}finally{Dh(n)}}function UR(t,e,n,r){if(Lr(e))return;let i=e[N],o=!1,s=!1;zc(e);let a=!0,c=null,u=null;o||(fI(t)?(u=NR(e),c=Yo(u)):ec()===null?(a=!1,u=xR(e),c=Yo(u)):e[lt]&&(Jo(e[lt]),e[lt]=null));try{yh(e),C_(t.bindingStartIndex),n!==null&&sI(t,e,n,2,r);let l=(i&3)===3;if(!o)if(l){let h=t.preOrderCheckHooks;h!==null&&Qc(e,h,null)}else{let h=t.preOrderHooks;h!==null&&Xc(e,h,0,null),Vh(e,0)}if(s||jR(e),hI(e),gI(e,0),t.contentQueries!==null&&BE(t,e),!o)if(l){let h=t.contentCheckHooks;h!==null&&Qc(e,h)}else{let h=t.contentHooks;h!==null&&Xc(e,h,1),Vh(e,1)}HR(t,e);let d=t.components;d!==null&&vI(e,d,0);let f=t.viewQuery;if(f!==null&&Xh(2,f,r),!o)if(l){let h=t.viewCheckHooks;h!==null&&Qc(e,h)}else{let h=t.viewHooks;h!==null&&Xc(e,h,2),Vh(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[jc]){for(let h of e[jc])h();e[jc]=null}o||(lI(e),e[N]&=-73)}catch(l){throw o||Es(e),l}finally{u!==null&&(tc(u,c),a&&PR(u)),Gc()}}function gI(t,e){for(let n=PE(t);n!==null;n=OE(n))for(let r=ve;r<n.length;r++){let i=n[r];mI(i,e)}}function jR(t){for(let e=PE(t);e!==null;e=OE(e)){if(!(e[N]&2))continue;let n=e[ms];for(let r=0;r<n.length;r++){let i=n[r];_h(i)}}}function BR(t,e,n){X(W.ComponentStart);let r=Ct(e,t);try{mI(r,n)}finally{X(W.ComponentEnd,r[me])}}function mI(t,e){Hc(t)&&np(t,e)}function np(t,e){let r=t[S],i=t[N],o=t[lt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&nc(o)),s||=!1,o&&(o.dirty=!1),t[N]&=-9217,s)UR(r,t,r.template,t[me]);else if(i&8192){let a=C(null);try{hI(t),gI(t,1);let c=r.components;c!==null&&vI(t,c,1),lI(t)}finally{C(a)}}}function vI(t,e,n){for(let r=0;r<e.length;r++)BR(t,e[r],n)}function HR(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)qn(~i);else{let o=i,s=n[++r],a=n[++r];S_(s,o);let c=e[o];X(W.HostBindingsUpdateStart,c);try{a(2,c)}finally{X(W.HostBindingsUpdateEnd,c)}}}}finally{qn(-1)}}function Lp(t,e){let n=Ch()?64:1088;for(t[qt].changeDetectionScheduler?.notify(e);t;){t[N]|=n;let r=Bn(t);if(Ki(t)&&!r)return t;t=r}return null}function yI(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function _I(t,e){let n=ve+e;if(n<t.length)return t[n]}function Du(t,e,n,r=!0){let i=e[S];if($R(i,e,t,n),r){let s=tp(n,t),a=e[ue],c=a.parentNode(t[Wn]);c!==null&&eR(i,t[wt],a,e,c,s)}let o=e[zi];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function EI(t,e){let n=Ss(t,e);return n!==void 0&&wu(n[S],n),n}function Ss(t,e){if(t.length<=ve)return;let n=ve+e,r=t[n];if(r){let i=r[kr];i!==null&&i!==t&&Rp(i,r),e>0&&(t[n-1][It]=r[It]);let o=ds(t,ve+e);X0(r[S],r);let s=o[Or];s!==null&&s.detachView(o[S]),r[Re]=null,r[It]=null,r[N]&=-129}return r}function $R(t,e,n,r){let i=ve+r,o=n.length;r>0&&(n[i-1][It]=e),r<o-ve?(e[It]=n[i],sh(n,ve+r,e)):(n.push(e),e[It]=null),e[Re]=n;let s=e[kr];s!==null&&n!==s&&II(s,e);let a=e[Or];a!==null&&a.insertView(t),$c(e),e[N]|=128}function II(t,e){let n=t[ms],r=e[Re];if(Kt(r))t[N]|=2;else{let i=r[Re][ut];e[ut]!==i&&(t[N]|=2)}n===null?t[ms]=[e]:n.push(e)}var Yn=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[S];return Ts(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[me]}set context(e){this._lView[me]=e}get destroyed(){return Lr(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Re];if(Pt(e)){let n=e[gs],r=n?n.indexOf(this):-1;r>-1&&(Ss(e,r),ds(n,r))}this._attachedToViewContainer=!1}wu(this._lView[S],this._lView)}onDestroy(e){Eh(this._lView,e)}markForCheck(){Lp(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[N]&=-129}reattach(){$c(this._lView),this._lView[N]|=128}detectChanges(){this._lView[N]|=1024,pI(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new E(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ki(this._lView),n=this._lView[kr];n!==null&&!e&&Rp(n,this._lView),iI(this._lView[S],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new E(902,!1);this._appRef=e;let n=Ki(this._lView),r=this._lView[kr];r!==null&&!n&&II(r,this._lView),$c(this._lView)}};var Ms=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=WR;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=Cu(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new Yn(o)}}return t})();function WR(){return zR(dt(),H())}function zR(t,e){return t.type&4?new Ms(e,t,vu(t,e)):null}function Tu(t,e,n,r,i){let o=t.data[e];if(o===null)o=GR(t,e,n,r,i),T_()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=I_();o.injectorIndex=s===null?-1:s.injectorIndex}return Yi(o,!0),o}function GR(t,e,n,r,i){let o=wh(),s=bh(),a=s?o:o&&o.parent,c=t.data[e]=KR(t,a,n,e,r,i);return qR(t,c,o,s),c}function qR(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function KR(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return y_()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function YR(t){let e=t[ph]??[],r=t[Re][ue],i=[];for(let o of e)o.data[FE]!==void 0?i.push(o):JR(o,r);t[ph]=i}function JR(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[LE];for(;n<i;){let o=r.nextSibling;KE(e,r,!1),r=o,n++}}}var ZR=()=>null,QR=()=>null;function rp(t,e){return ZR(t,e)}function wI(t,e,n){return QR(t,e,n)}var bI=class{},Su=class{},ip=class{resolveComponentFactory(e){throw new E(917,!1)}},Ns=class{static NULL=new ip},Br=class{},io=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>XR()}return t})();function XR(){let t=H(),e=dt(),n=Ct(e.index,t);return(Kt(n)?n:t)[ue]}var CI=(()=>{class t{static \u0275prov=w({token:t,providedIn:"root",factory:()=>null})}return t})();var eu={},op=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,eu,r);return i!==eu||n===eu?i:this.parentInjector.get(e,n,r)}};function X_(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Kf(i,a);else if(o==2){let c=a,u=e[++s];r=Kf(r,c+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function $(t,e=0){let n=H();if(n===null)return D(t,e);let r=dt();return AE(r,n,Le(t),e)}function DI(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,c=null,u=null;for(let l of s)if(l.resolveHostDirectives!==null){[a,c,u]=l.resolveHostDirectives(s);break}nM(t,e,n,a,o,c,u)}o!==null&&r!==null&&eM(n,r,o)}function eM(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new E(-301,!1);r.push(e[i],o)}}function tM(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function nM(t,e,n,r,i,o,s){let a=r.length,c=null;for(let f=0;f<a;f++){let h=r[f];c===null&&Yt(h)&&(c=h,tM(t,n,f)),Jh(iu(n,e),t,h.type)}cM(n,t.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let f=0;f<a;f++){let h=r[f];h.providersResolver&&h.providersResolver(h)}let u=!1,l=!1,d=XE(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let f=0;f<a;f++){let h=r[f];if(n.mergedAttrs=Cs(n.mergedAttrs,h.hostAttrs),iM(t,n,e,d,h),aM(d,h,i),s!==null&&s.has(h)){let[v,g]=s.get(h);n.directiveToIndex.set(h.type,[d,v+n.directiveStart,g+n.directiveStart])}else(o===null||!o.has(h))&&n.directiveToIndex.set(h.type,d);h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!u&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),u=!0),!l&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),l=!0),d++}rM(t,n,o)}function rM(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))eE(0,e,i,r),eE(1,e,i,r),nE(e,r,!1);else{let o=n.get(i);tE(0,e,o,r),tE(1,e,o,r),nE(e,r,!0)}}}function eE(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),TI(e,o)}}function tE(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),TI(e,s)}}function TI(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function nE(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||bp(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&i.hasOwnProperty(c)){let u=i[c];for(let l of u)if(l===e){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){let u=o[c];for(let l=0;l<u.length;l+=2)if(u[l]===e){s??=[],s.push(u[l+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function iM(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Cr(i.type,!0)),s=new Ur(o,Yt(i),$,null);t.blueprint[r]=s,n[r]=s,oM(t,e,r,XE(t,n,i.hostVars,tn),i)}function oM(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;sM(s)!=a&&s.push(a),s.push(n,r,o)}}function sM(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function aM(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Yt(e)&&(n[""]=t)}}function cM(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function SI(t,e,n,r,i,o,s,a){let c=e[S],u=c.consts,l=Jt(u,s),d=Tu(c,t,n,r,l);return o&&DI(c,e,d,Jt(u,a),i),d.mergedAttrs=Cs(d.mergedAttrs,d.attrs),d.attrs!==null&&X_(d,d.attrs,!1),d.mergedAttrs!==null&&X_(d,d.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,d),d}function AI(t,e){EE(t,e),gh(e)&&t.queries.elementEnd(e)}function Fp(t){return MI(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function RI(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function MI(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function NI(t,e,n){return t[e]=n}function en(t,e,n){if(n===tn)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function uM(t,e,n,r){let i=en(t,e,n);return en(t,e+1,r)||i}function Bh(t,e,n){return function r(i){let o=zn(t)?Ct(t.index,e):e;Lp(o,5);let s=e[me],a=rE(e,s,n,i),c=r.__ngNextListenerFn__;for(;c;)a=rE(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function rE(t,e,n,r){let i=C(null);try{return X(W.OutputStart,e,n),n(r)!==!1}catch(o){return SR(t,o),!1}finally{X(W.OutputEnd,e,n),C(i)}}function lM(t,e,n,r,i,o,s,a){let c=vs(t),u=!1,l=null;if(!r&&c&&(l=fM(e,n,o,t.index)),l!==null){let d=l.__ngLastListenerFn__||l;d.__ngNextListenerFn__=s,l.__ngLastListenerFn__=s,u=!0}else{let d=Ot(t,n),f=r?r(d):d;A0(n,f,o,a);let h=i.listen(f,o,a);if(!dM(o)){let p=r?v=>r(bt(v[t.index])):t.index;kI(p,e,n,o,a,h,!1)}}return u}function dM(t){return t.startsWith("animation")||t.startsWith("transition")}function fM(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Gi],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function kI(t,e,n,r,i,o,s){let a=e.firstCreatePass?p_(e):null,c=h_(n),u=c.length;c.push(i,o),a&&a.push(r,t,u,(u+1)*(s?-1:1))}function iE(t,e,n,r,i,o){let s=e[n],a=e[S],u=a.data[n].outputs[r],d=s[u].subscribe(o);kI(t.index,a,e,i,o,d,!0)}var sp=Symbol("BINDING");var cu=class extends Ns{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Hn(e);return new to(n,this.ngModule)}};function hM(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&Iu.SignalBased)!==0};return i&&(o.transform=i),o})}function pM(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function gM(t,e,n){let r=e instanceof fe?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new op(n,r):n}function mM(t){let e=t.get(Br,null);if(e===null)throw new E(407,!1);let n=t.get(CI,null),r=t.get(Sr,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function vM(t,e){let n=PI(t);return GE(e,n,n==="svg"?mh:n==="math"?c_:null)}function PI(t){return(t.selectors[0][0]||"div").toLowerCase()}var to=class extends Su{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=hM(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=pM(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=z0(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){X(W.DynamicComponentStart);let a=C(null);try{let c=this.componentDef,u=yM(r,c,s,o),l=gM(c,i||this.ngModule,e),d=mM(l),f=d.rendererFactory.createRenderer(null,c),h=r?hR(f,r,c.encapsulation,l):vM(c,f),p=s?.some(oE)||o?.some(_=>typeof _!="function"&&_.bindings.some(oE)),v=Dp(null,u,null,512|QE(c),null,null,d,f,l,null,jE(h,l,!0));v[Me]=h,zc(v);let g=null;try{let _=SI(Me,v,2,"#host",()=>u.directiveRegistry,!0,0);YE(f,h,_),eo(h,v),kp(u,v,_),HE(u,_,v),AI(u,_),n!==void 0&&EM(_,this.ngContentSelectors,n),g=Ct(_.index,v),v[me]=g[me],xp(u,v,null)}catch(_){throw g!==null&&Qh(g),Qh(v),_}finally{X(W.DynamicComponentEnd),Gc()}return new uu(this.componentType,v,!!p)}finally{C(a)}}};function yM(t,e,n,r){let i=t?["ng-version","21.0.7"]:G0(e.selectors[0]),o=null,s=null,a=0;if(n)for(let l of n)a+=l[sp].requiredVars,l.create&&(l.targetIdx=0,(o??=[]).push(l)),l.update&&(l.targetIdx=0,(s??=[]).push(l));if(r)for(let l=0;l<r.length;l++){let d=r[l];if(typeof d!="function")for(let f of d.bindings){a+=f[sp].requiredVars;let h=l+1;f.create&&(f.targetIdx=h,(o??=[]).push(f)),f.update&&(f.targetIdx=h,(s??=[]).push(f))}}let c=[e];if(r)for(let l of r){let d=typeof l=="function"?l:l.type,f=rh(d);c.push(f)}return Cp(0,null,_M(o,s),1,a,c,null,null,null,[i],null)}function _M(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function oE(t){let e=t[sp].kind;return e==="input"||e==="twoWay"}var uu=class extends bI{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=ys(n[S],Me),this.location=vu(this._tNode,n),this.instance=Ct(this._tNode.index,n)[me],this.hostView=this.changeDetectorRef=new Yn(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=Op(r,i[S],i,e,n);this.previousInputValues.set(e,n);let s=Ct(r.index,i);Lp(s,1)}get injector(){return new Vr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function EM(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Jr=(()=>{class t{static __NG_ELEMENT_ID__=IM}return t})();function IM(){let t=dt();return bM(t,H())}var wM=Jr,OI=class extends wM{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return vu(this._hostTNode,this._hostLView)}get injector(){return new Vr(this._hostTNode,this._hostLView)}get parentInjector(){let e=mp(this._hostTNode,this._hostLView);if(wE(e)){let n=ru(e,this._hostLView),r=nu(e),i=n[S].data[r+8];return new Vr(i,n)}else return new Vr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=sE(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-ve}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=rp(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Ds(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let c=e&&!t0(e),u;if(c)u=n;else{let g=n||{};u=g.index,r=g.injector,i=g.projectableNodes,o=g.environmentInjector||g.ngModuleRef,s=g.directives,a=g.bindings}let l=c?e:new to(Hn(e)),d=r||this.parentInjector;if(!o&&l.ngModule==null){let _=(c?d:this.parentInjector).get(fe,null);_&&(o=_)}let f=Hn(l.componentType??{}),h=rp(this._lContainer,f?.id??null),p=h?.firstChild??null,v=l.create(d,i,p,o,s,a);return this.insertImpl(v.hostView,u,Ds(this._hostTNode,h)),v}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(l_(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Re],u=new OI(c,c[wt],c[Re]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Du(s,i,o,r),e.attachToViewContainerRef(),sh(Hh(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=sE(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Ss(this._lContainer,n);r&&(ds(Hh(this._lContainer),n),wu(r[S],r))}detach(e){let n=this._adjustIndex(e,-1),r=Ss(this._lContainer,n);return r&&ds(Hh(this._lContainer),n)!=null?new Yn(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function sE(t){return t[gs]}function Hh(t){return t[gs]||(t[gs]=[])}function bM(t,e){let n,r=e[t.index];return Pt(r)?n=r:(n=yI(r,e,null,t),e[t.index]=n,Tp(e,n)),DM(n,e,t,r),new OI(n,t,e)}function CM(t,e){let n=t[ue],r=n.createComment(""),i=Ot(e,t),o=n.parentNode(i);return au(n,o,r,n.nextSibling(i),!1),r}var DM=AM,TM=()=>!1;function SM(t,e,n){return TM(t,e,n)}function AM(t,e,n,r){if(t[Wn])return;let i;n.type&8?i=bt(r):i=CM(e,n),t[Wn]=i}var Hr=class{},Au=class{};var lu=class extends Hr{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new cu(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=nh(e);this._bootstrapComponents=JE(o.bootstrap),this._r3Injector=Mh(e,n,[{provide:Hr,useValue:this},{provide:Ns,useValue:this.componentFactoryResolver},...r],vn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},du=class extends Au{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new lu(this.moduleType,e,[])}};var As=class extends Hr{injector;componentFactoryResolver=new cu(this);instance=null;constructor(e){super();let n=new Tr([...e.providers,{provide:Hr,useValue:this},{provide:Ns,useValue:this.componentFactoryResolver}],e.parent||hs(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ks(t,e,n=null){return new As({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var RM=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=uh(!1,n.type),i=r.length>0?ks([r],this._injector,""):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=w({token:t,providedIn:"environment",factory:()=>new t(D(fe))})}return t})();function bn(t){return ro(()=>{let e=xI(t),n=P(y({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===vp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(RM).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Lt.Emulated,styles:t.styles||at,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Yr("NgStandalone"),LI(n);let r=t.dependencies;return n.directiveDefs=aE(r,MM),n.pipeDefs=aE(r,qy),n.id=PM(n),n})}function MM(t){return Hn(t)||rh(t)}function Cn(t){return ro(()=>({type:t.type,bootstrap:t.bootstrap||at,declarations:t.declarations||at,imports:t.imports||at,exports:t.exports||at,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function NM(t,e){if(t==null)return $n;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=Iu.None,c=null),n[o]=[r,a,c],e[o]=s}return n}function kM(t){if(t==null)return $n;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Ne(t){return ro(()=>{let e=xI(t);return LI(e),e})}function xI(t){let e={};return{type:t.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||$n,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||at,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:NM(t.inputs,e),outputs:kM(t.outputs),debugInfo:null}}function LI(t){t.features?.forEach(e=>e(t))}function aE(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function PM(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function OM(t){return Object.getPrototypeOf(t.prototype).constructor}function nn(t){let e=OM(t.type),n=!0,r=[t];for(;e;){let i;if(Yt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new E(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=$h(t.inputs),s.declaredInputs=$h(t.declaredInputs),s.outputs=$h(t.outputs);let a=i.hostBindings;a&&UM(t,a);let c=i.viewQuery,u=i.contentQueries;if(c&&FM(t,c),u&&VM(t,u),xM(t,i),Gy(t.outputs,i.outputs),Yt(i)&&i.data.animation){let l=t.data;l.animation=(l.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===nn&&(n=!1)}}e=Object.getPrototypeOf(e)}LM(r)}function xM(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function LM(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Cs(i.hostAttrs,n=Cs(n,i.hostAttrs))}}function $h(t){return t===$n?{}:t===at?[]:t}function FM(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function VM(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function UM(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function FI(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=Cs(t.mergedAttrs,t.attrs);let l=t.tView=Cp(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),l.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),Yi(t,!1);let c=BM(n,e,t,r);Kc()&&Mp(n,e,c,t),eo(c,e);let u=yI(c,e,c,t);e[r+Me]=u,Tp(e,u),SM(u,t,e)}function jM(t,e,n,r,i,o,s,a,c,u,l){let d=n+Me,f;return e.firstCreatePass?(f=Tu(e,d,4,s||null,a||null),Ih()&&DI(e,t,f,Jt(e.consts,u),cI),EE(e,f)):f=e.data[d],FI(f,t,e,n,r,i,o,c),vs(f)&&kp(e,t,f),u!=null&&Pp(t,f,l),f}function fu(t,e,n,r,i,o,s,a,c,u,l){let d=n+Me,f;if(e.firstCreatePass){if(f=Tu(e,d,4,s||null,a||null),u!=null){let h=Jt(e.consts,u);f.localNames=[];for(let p=0;p<h.length;p+=2)f.localNames.push(h[p],-1)}}else f=e.data[d];return FI(f,t,e,n,r,i,o,c),u!=null&&Pp(t,f,l),f}function Zr(t,e,n,r,i,o,s,a){let c=H(),u=He(),l=Jt(u.consts,o);return jM(c,u,t,e,n,r,i,l,void 0,s,a),Zr}var BM=HM;function HM(t,e,n,r){return Yc(!0),e[ue].createComment("")}var Vp=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function VI(t){return typeof t=="function"&&t[Ge]!==void 0}function Up(t){return VI(t)&&typeof t.set=="function"}var jp=new I("");function Zn(t){return!!t&&typeof t.then=="function"}function Bp(t){return!!t&&typeof t.subscribe=="function"}var UI=new I("");var Hp=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=m(UI,{optional:!0})??[];injector=m(Fe);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=ge(this.injector,i);if(Zn(o))n.push(o);else if(Bp(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ru=new I("");function jI(){df(()=>{let t="";throw new E(600,t)})}function BI(t){return t.isBoundToModule}var $M=10;var Qr=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=m(Dt);afterRenderManager=m(tI);zonelessEnabled=m(Is);rootEffectScheduler=m(Fh);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ae;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=m(wn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(B(n=>!n))}constructor(){m(Kr,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=m(fe);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Fe.NULL){return this._injector.get(he).run(()=>{X(W.BootstrapComponentStart);let s=n instanceof Su;if(!this._injector.get(Hp).done){let p="";throw new E(405,p)}let c;s?c=n:c=this._injector.get(Ns).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let u=BI(c)?void 0:this._injector.get(Hr),l=r||c.selector,d=c.create(i,[],l,u),f=d.location.nativeElement,h=d.injector.get(jp,null);return h?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),bs(this.components,d),h?.unregisterApplication(f)}),this._loadComponent(d),X(W.BootstrapComponentEnd,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){X(W.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Ap.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw X(W.ChangeDetectionEnd),new E(101,!1);let n=C(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,C(n),this.afterTick.next(),X(W.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Br,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<$M;){X(W.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{X(W.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!_s(i))continue;let o=r&&!this.zonelessEnabled?0:1;pI(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>_s(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;bs(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Ru,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>bs(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new E(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function bs(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Mu(t,e,n,r){let i=H(),o=Fr();if(en(i,o,e)){let s=He(),a=qc();wR(a,i,t,e,n,r)}return Mu}var k8=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var ap=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Wh(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function WM(t,e,n,r){let i,o,s=0,a=t.length-1,c=void 0;if(Array.isArray(e)){C(r);let u=e.length-1;for(C(null);s<=a&&s<=u;){let l=t.at(s),d=e[s],f=Wh(s,l,s,d,n);if(f!==0){f<0&&t.updateValue(s,d),s++;continue}let h=t.at(a),p=e[u],v=Wh(a,h,u,p,n);if(v!==0){v<0&&t.updateValue(a,p),a--,u--;continue}let g=n(s,l),_=n(a,h),U=n(s,d);if(Object.is(U,_)){let q=n(u,p);Object.is(q,g)?(t.swap(s,a),t.updateValue(a,p),u--,a--):t.move(a,s),t.updateValue(s,d),s++;continue}if(i??=new hu,o??=uE(t,s,a,n),cp(t,i,s,U))t.updateValue(s,d),s++,a++;else if(o.has(U))i.set(g,t.detach(s)),a--;else{let q=t.create(s,e[s]);t.attach(s,q),s++,a++}}for(;s<=u;)cE(t,i,n,s,e[s]),s++}else if(e!=null){C(r);let u=e[Symbol.iterator]();C(null);let l=u.next();for(;!l.done&&s<=a;){let d=t.at(s),f=l.value,h=Wh(s,d,s,f,n);if(h!==0)h<0&&t.updateValue(s,f),s++,l=u.next();else{i??=new hu,o??=uE(t,s,a,n);let p=n(s,f);if(cp(t,i,s,p))t.updateValue(s,f),s++,a++,l=u.next();else if(!o.has(p))t.attach(s,t.create(s,f)),s++,a++,l=u.next();else{let v=n(s,d);i.set(v,t.detach(s)),a--}}}for(;!l.done;)cE(t,i,n,t.length,l.value),l=u.next()}for(;s<=a;)t.destroy(t.detach(a--));i?.forEach(u=>{t.destroy(u)})}function cp(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function cE(t,e,n,r,i){if(cp(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function uE(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var hu=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function $p(t,e,n,r,i,o,s,a){Yr("NgControlFlow");let c=H(),u=He(),l=Jt(u.consts,o);return fu(c,u,t,e,n,r,i,l,256,s,a),Wp}function Wp(t,e,n,r,i,o,s,a){Yr("NgControlFlow");let c=H(),u=He(),l=Jt(u.consts,o);return fu(c,u,t,e,n,r,i,l,512,s,a),Wp}function zp(t,e){Yr("NgControlFlow");let n=H(),r=Fr(),i=n[r]!==tn?n[r]:-1,o=i!==-1?pu(n,Me+i):void 0,s=0;if(en(n,r,t)){let a=C(null);try{if(o!==void 0&&EI(o,s),t!==-1){let c=Me+t,u=pu(n,c),l=fp(n[S],c),d=wI(u,l,n),f=Cu(n,l,e,{dehydratedView:d});Du(u,f,s,Ds(l,d))}}finally{C(a)}}else if(o!==void 0){let a=_I(o,s);a!==void 0&&(a[me]=e)}}var up=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-ve}};function Gp(t,e){return e}var lp=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function qp(t,e,n,r,i,o,s,a,c,u,l,d,f){Yr("NgControlFlow");let h=H(),p=He(),v=c!==void 0,g=H(),_=a?s.bind(g[ut][me]):s,U=new lp(v,_);g[Me+t]=U,fu(h,p,t+1,e,n,r,i,Jt(p.consts,o),256),v&&fu(h,p,t+2,c,u,l,d,Jt(p.consts,f),512)}var dp=class extends ap{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-ve}at(e){return this.getLView(e)[me].$implicit}attach(e,n){let r=n[zi];this.needsIndexUpdate||=e!==this.length,Du(this.lContainer,n,e,Ds(this.templateTNode,r)),zM(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,GM(this.lContainer,e),qM(this.lContainer,e)}create(e,n){let r=rp(this.lContainer,this.templateTNode.tView.ssrId);return Cu(this.hostLView,this.templateTNode,new up(this.lContainer,n,e),{dehydratedView:r})}destroy(e){wu(e[S],e)}updateValue(e,n){this.getLView(e)[me].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[me].$index=e}getLView(e){return KM(this.lContainer,e)}};function Kp(t){let e=C(null),n=Gn();try{let r=H(),i=r[S],o=r[n],s=n+1,a=pu(r,s);if(o.liveCollection===void 0){let u=fp(i,s);o.liveCollection=new dp(a,r,u)}else o.liveCollection.reset();let c=o.liveCollection;if(WM(c,t,o.trackByFn,e),c.updateIndexes(),o.hasEmptyBlock){let u=Fr(),l=c.length===0;if(en(r,u,l)){let d=n+2,f=pu(r,d);if(l){let h=fp(i,d),p=wI(f,h,r),v=Cu(r,h,void 0,{dehydratedView:p});Du(f,v,0,Ds(h,p))}else i.firstUpdatePass&&YR(f),EI(f,0)}}}finally{C(e)}}function pu(t,e){return t[e]}function zM(t,e){if(t.length<=ve)return;let n=ve+e,r=t[n],i=r?r[xr]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[En];Z0(o,i),jr.delete(r[In]),i.detachedLeaveAnimationFns=void 0}}function GM(t,e){if(t.length<=ve)return;let n=ve+e,r=t[n],i=r?r[xr]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function qM(t,e){return Ss(t,e)}function KM(t,e){return _I(t,e)}function fp(t,e){return ys(t,e)}function $e(t,e,n){let r=H(),i=Fr();if(en(r,i,e)){let o=He(),s=qc();aI(s,r,t,e,r[ue],n)}return $e}function lE(t,e,n,r,i){Op(e,t,n,i?"class":"style",r)}function A(t,e,n,r){let i=H(),o=i[S],s=t+Me,a=o.firstCreatePass?SI(s,i,2,e,cI,Ih(),n,r):o.data[s];if(DR(a,i,t,e,YM),vs(a)){let c=i[S];kp(c,i,a),HE(c,a,i)}return r!=null&&Pp(i,a),A}function L(){let t=He(),e=dt(),n=TR(e);return t.firstCreatePass&&AI(t,n),__(n)&&E_(),v_(),n.classesWithoutHost!=null&&a0(n)&&lE(t,n,H(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&c0(n)&&lE(t,n,H(),n.stylesWithoutHost,!1),L}function ft(t,e,n,r){return A(t,e,n,r),L(),ft}var YM=(t,e,n,r,i)=>(Yc(!0),GE(e[ue],r,O_()));function Xr(){return H()}var Ps="en-US";var JM=Ps;function HI(t){typeof t=="string"&&(JM=t.toLowerCase().replace(/_/g,"-"))}function Se(t,e,n){let r=H(),i=He(),o=dt();return $I(i,r,r[ue],o,t,e,n),Se}function $I(t,e,n,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=Bh(r,e,o),lM(r,t,e,s,n,i,o,c)&&(a=!1)),a){let u=r.outputs?.[i],l=r.hostDirectiveOutputs?.[i];if(l&&l.length)for(let d=0;d<l.length;d+=2){let f=l[d],h=l[d+1];c??=Bh(r,e,o),iE(r,e,f,h,i,c)}if(u&&u.length)for(let d of u)c??=Bh(r,e,o),iE(r,e,d,i,i,c)}}function ke(t=1){return P_(t)}function oo(t){let e=b_();return u_(e,Me+t)}function Zc(t,e){return t<<17|e<<2}function $r(t){return t>>17&32767}function ZM(t){return(t&2)==2}function QM(t,e){return t&131071|e<<17}function hp(t){return t|2}function no(t){return(t&131068)>>2}function zh(t,e){return t&-131069|e<<2}function XM(t){return(t&1)===1}function pp(t){return t|1}function eN(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=$r(s),c=no(s);t[r]=n;let u=!1,l;if(Array.isArray(n)){let d=n;l=d[1],(l===null||Wi(d,l)>0)&&(u=!0)}else l=n;if(i)if(c!==0){let f=$r(t[a+1]);t[r+1]=Zc(f,a),f!==0&&(t[f+1]=zh(t[f+1],r)),t[a+1]=QM(t[a+1],r)}else t[r+1]=Zc(a,0),a!==0&&(t[a+1]=zh(t[a+1],r)),a=r;else t[r+1]=Zc(c,0),a===0?a=r:t[c+1]=zh(t[c+1],r),c=r;u&&(t[r+1]=hp(t[r+1])),dE(t,l,r,!0),dE(t,l,r,!1),tN(e,l,t,r,o),s=Zc(a,c),o?e.classBindings=s:e.styleBindings=s}function tN(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Wi(o,e)>=0&&(n[r+1]=pp(n[r+1]))}function dE(t,e,n,r){let i=t[n+1],o=e===null,s=r?$r(i):no(i),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],u=t[s+1];nN(c,e)&&(a=!0,t[s+1]=r?pp(u):hp(u)),s=r?$r(u):no(u)}a&&(t[n+1]=r?hp(i):pp(i))}function nN(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Wi(t,e)>=0:!1}function Os(t,e){return rN(t,e,null,!0),Os}function rN(t,e,n,r){let i=H(),o=He(),s=D_(2);if(o.firstUpdatePass&&oN(o,t,s,r),e!==tn&&en(i,s,e)){let a=o.data[Gn()];lN(o,a,i,i[ue],t,i[s+1]=dN(e,n),r,s)}}function iN(t,e){return e>=t.expandoStartIndex}function oN(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Gn()],s=iN(t,n);fN(o,r)&&e===null&&!s&&(e=!1),e=sN(i,o,e,r),eN(i,o,e,n,s,r)}}function sN(t,e,n,r){let i=R_(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Gh(null,t,e,n,r),n=Rs(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Gh(i,t,e,n,r),o===null){let c=aN(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Gh(null,t,e,c[1],r),c=Rs(c,e.attrs,r),cN(t,e,r,c))}else o=uN(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function aN(t,e,n){let r=n?e.classBindings:e.styleBindings;if(no(r)!==0)return t[$r(r)]}function cN(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[$r(i)]=r}function uN(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Rs(r,s,n)}return Rs(r,e.attrs,n)}function Gh(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Rs(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Rs(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),e_(t,s,n?!0:e[++o]))}return t===void 0?null:t}function lN(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let c=t.data,u=c[a+1],l=XM(u)?fE(c,e,n,i,no(u),s):void 0;if(!gu(l)){gu(o)||ZM(u)&&(o=fE(c,null,n,i,a,s));let d=vh(Gn(),n);fR(r,s,d,i,o)}}function fE(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let c=t[i],u=Array.isArray(c),l=u?c[1]:c,d=l===null,f=n[i+1];f===tn&&(f=d?at:void 0);let h=d?Uc(f,r):l===r?f:void 0;if(u&&!gu(h)&&(h=Uc(c,r)),gu(h)&&(a=h,s))return a;let p=t[i+1];i=s?$r(p):no(p)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Uc(c,r))}return a}function gu(t){return t!==void 0}function dN(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=vn(Ep(t)))),t}function fN(t,e){return(t.flags&(e?8:16))!==0}function re(t,e=""){let n=H(),r=He(),i=t+Me,o=r.firstCreatePass?Tu(r,i,1,e,null):r.data[i],s=hN(r,n,o,e,t);n[i]=s,Kc()&&Mp(r,n,s,o),Yi(o,!1)}var hN=(t,e,n,r,i)=>(Yc(!0),N0(e[ue],r));function pN(t,e,n,r=""){return en(t,Fr(),n)?e+ls(n)+r:tn}function ei(t){return rn("",t),ei}function rn(t,e,n){let r=H(),i=pN(r,t,e,n);return i!==tn&&gN(r,Gn(),i),rn}function gN(t,e,n){let r=vh(e,t);k0(t[ue],r,n)}function ti(t,e,n){Up(e)&&(e=e());let r=H(),i=Fr();if(en(r,i,e)){let o=He(),s=qc();aI(s,r,t,e,r[ue],n)}return ti}function so(t,e){let n=Up(t);return n&&t.set(e),n}function ni(t,e){let n=H(),r=He(),i=dt();return $I(r,n,n[ue],i,t,e),ni}function hE(t,e,n){let r=He();r.firstCreatePass&&WI(e,r.data,r.blueprint,Yt(t),n)}function WI(t,e,n,r,i){if(t=Le(t),Array.isArray(t))for(let o=0;o<t.length;o++)WI(t[o],e,n,r,i);else{let o=He(),s=H(),a=dt(),c=Dr(t)?t:Le(t.provide),u=dh(t),l=a.providerIndexes&1048575,d=a.directiveStart,f=a.providerIndexes>>20;if(Dr(t)||!t.multi){let h=new Ur(u,i,$,null),p=Kh(c,e,i?l:l+f,d);p===-1?(Jh(iu(a,s),o,c),qh(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(h),s.push(h)):(n[p]=h,s[p]=h)}else{let h=Kh(c,e,l+f,d),p=Kh(c,e,l,l+f),v=h>=0&&n[h],g=p>=0&&n[p];if(i&&!g||!i&&!v){Jh(iu(a,s),o,c);let _=yN(i?vN:mN,n.length,i,r,u,t);!i&&g&&(n[p].providerFactory=_),qh(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(_),s.push(_)}else{let _=zI(n[i?p:h],u,!i&&r);qh(o,t,h>-1?h:p,_)}!i&&r&&g&&n[p].componentProviders++}}}function qh(t,e,n,r){let i=Dr(e),o=o_(e);if(i||o){let c=(o?Le(e.useClass):e).prototype.ngOnDestroy;if(c){let u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let l=u.indexOf(n);l===-1?u.push(n,[r,c]):u[l+1].push(r,c)}else u.push(n,c)}}}function zI(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Kh(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function mN(t,e,n,r,i){return gp(this.multi,[])}function vN(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=ou(r,r[S],this.providerFactory.index,i);s=c.slice(0,a),gp(o,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],gp(o,s);return s}function gp(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function yN(t,e,n,r,i,o){let s=new Ur(t,n,$,null);return s.multi=[],s.index=e,s.componentProviders=0,zI(s,i,r&&!n),s}function ao(t,e){return n=>{n.providersResolver=(r,i)=>hE(r,i?i(t):t,!1),e&&(n.viewProvidersResolver=(r,i)=>hE(r,i?i(e):e,!0))}}function Yp(t,e,n){return _N(H(),Th(),t,e,n)}function xs(t,e,n,r){return EN(H(),Th(),t,e,n,r)}function GI(t,e){let n=t[e];return n===tn?void 0:n}function _N(t,e,n,r,i,o){let s=e+n;return en(t,s,i)?NI(t,s+1,o?r.call(o,i):r(i)):GI(t,s+1)}function EN(t,e,n,r,i,o,s){let a=e+n;return uM(t,a,i,o)?NI(t,a+2,s?r.call(s,i,o):r(i,o)):GI(t,a+2)}var mu=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Jp=(()=>{class t{compileModuleSync(n){return new du(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=nh(n),o=JE(i.declarations).reduce((s,a)=>{let c=Hn(a);return c&&s.push(new to(c)),s},[]);return new mu(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var qI=(()=>{class t{applicationErrorHandler=m(Dt);appRef=m(Qr);taskService=m(wn);ngZone=m(he);zonelessEnabled=m(Is);tracing=m(Kr,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ce;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(as):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(m(Lh,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?kh:Nh;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(as+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,kh(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function KI(){return[{provide:Sr,useExisting:qI},{provide:he,useClass:cs},{provide:Is,useValue:!0}]}function IN(){return typeof $localize<"u"&&$localize.locale||Ps}var Nu=new I("",{factory:()=>m(Nu,{optional:!0,skipSelf:!0})||IN()});function co(t,e){return rc(t,e?.equal)}var XI=Symbol("InputSignalNode#UNSET"),VN=P(y({},ic),{transformFn:void 0,applyValueToInputSignal(t,e){Zo(t,e)}});function ew(t,e){let n=Object.create(VN);n.value=t,n.transformFn=e?.transform;function r(){if(Ko(n),n.value===XI){let i=null;throw new E(-950,i)}return n.value}return r[Ge]=n,r}function YI(t,e){return ew(t,e)}function UN(t){return ew(XI,t)}var tw=(YI.required=UN,YI);var Zp=new I(""),jN=new I("");function Ls(t){return!t.moduleRef}function BN(t){let e=Ls(t)?t.r3Injector:t.moduleRef.injector,n=e.get(he);return n.run(()=>{Ls(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Dt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Ls(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Zp);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Zp);s.add(o),t.moduleRef.onDestroy(()=>{bs(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return $N(r,n,()=>{let o=e.get(wn),s=o.add(),a=e.get(Hp);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(Nu,Ps);if(HI(c||Ps),!e.get(jN,!0))return Ls(t)?e.get(Qr):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Ls(t)){let l=e.get(Qr);return t.rootComponent!==void 0&&l.bootstrap(t.rootComponent),l}else return HN?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var HN;function $N(t,e,n){try{let r=n();return Zn(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var ku=null;function WN(t=[],e){return Fe.create({name:e,providers:[{provide:fs,useValue:"platform"},{provide:Zp,useValue:new Set([()=>ku=null])},...t]})}function zN(t=[]){if(ku)return ku;let e=WN(t);return ku=e,jI(),GN(e),e}function GN(t){let e=t.get(_u,null);ge(t,()=>{e?.forEach(n=>n())})}function rg(){return!1}var ri=(()=>{class t{static __NG_ELEMENT_ID__=qN}return t})();function qN(t){return KN(dt(),H(),(t&16)===16)}function KN(t,e,n){if(zn(t)&&!n){let r=Ct(t.index,e);return new Yn(r,r)}else if(t.type&175){let r=e[ut];return new Yn(r,e)}return null}var Qp=class{constructor(){}supports(e){return Fp(e)}create(e){return new Xp(e)}},YN=(t,e)=>e,Xp=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||YN}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<JI(r,i,o)?n:r,a=JI(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,l=c-i;if(u!=l){for(let f=0;f<u;f++){let h=f<o.length?o[f]:o[f]=0,p=h+f;l<=p&&p<u&&(o[f]=h+1)}let d=s.previousIndex;o[d]=l-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!Fp(e))throw new E(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,RI(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new eg(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Pu),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Pu),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},eg=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,n){this.item=e,this.trackById=n}},tg=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Pu=class{map=new Map;put(e){let n=e.trackById,r=this.map.get(n);r||(r=new tg,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function JI(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function ZI(){return new ig([new Qp])}var ig=(()=>{class t{factories;static \u0275prov=w({token:t,providedIn:"root",factory:ZI});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:()=>{let r=m(t,{optional:!0,skipSelf:!0});return t.create(n,r||ZI())}}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new E(901,!1)}}return t})();function nw(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;X(W.BootstrapApplicationStart);try{let o=i?.injector??zN(r),s=[KI(),V_,...n||[]],a=new As({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return BN({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{X(W.BootstrapApplicationEnd)}}function Ou(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var rw=null;function Tt(){return rw}function og(t){rw??=t}var Fs=class{},uo=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:()=>m(iw),providedIn:"platform"})}return t})();var iw=(()=>{class t extends uo{_location;_history;_doc=m(ye);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Tt().getBaseHref(this._doc)}onPopState(n){let r=Tt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Tt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function aw(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function ow(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function Qn(t){return t&&t[0]!=="?"?`?${t}`:t}var xu=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:()=>m(ZN),providedIn:"root"})}return t})(),JN=new I(""),ZN=(()=>{class t extends xu{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??m(ye).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return aw(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Qn(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Qn(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Qn(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(D(uo),D(JN,8))};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),lo=(()=>{class t{_subject=new Ae;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=ek(ow(sw(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Qn(r))}normalize(n){return t.stripTrailingSlash(XN(this._basePath,sw(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Qn(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Qn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Qn;static joinWithSlash=aw;static stripTrailingSlash=ow;static \u0275fac=function(r){return new(r||t)(D(xu))};static \u0275prov=w({token:t,factory:()=>QN(),providedIn:"root"})}return t})();function QN(){return new lo(D(xu))}function XN(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function sw(t){return t.replace(/\/index.html$/,"")}function ek(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var sg=/\s+/,cw=[],ag=(()=>{class t{_ngEl;_renderer;initialClasses=cw;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=n!=null?n.trim().split(sg):cw}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(sg):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(sg).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||t)($(Gr),$(io))};static \u0275dir=Ne({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})();var Lu=class{$implicit;ngForOf;index;count;constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Vu=(()=>{class t{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Lu(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),uw(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);uw(o,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)($(Jr),$(Ms),$(ig))};static \u0275dir=Ne({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return t})();function uw(t,e){t.context.$implicit=e.item}var Vs=(()=>{class t{_viewContainer;_context=new Fu;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){lw(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){lw(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)($(Jr),$(Ms))};static \u0275dir=Ne({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),Fu=class{$implicit=null;ngIf=null};function lw(t,e){if(t&&!t.createEmbeddedView)throw new E(2020,!1)}var fo=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Cn({type:t});static \u0275inj=Gt({})}return t})();function Us(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var ii=class{};var dw="browser";var js=class{_doc;constructor(e){this._doc=e}manager},Uu=(()=>{class t extends js{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(D(ye))};static \u0275prov=w({token:t,factory:t.\u0275fac})}return t})(),Hu=new I(""),dg=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof Uu));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof Uu);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new E(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(D(Hu),D(he))};static \u0275prov=w({token:t,factory:t.\u0275fac})}return t})(),cg="ng-app-id";function hw(t){for(let e of t)e.remove()}function pw(t,e){let n=e.createElement("style");return n.textContent=t,n}function tk(t,e,n,r){let i=t.head?.querySelectorAll(`style[${cg}="${e}"],link[${cg}="${e}"]`);if(i)for(let o of i)o.removeAttribute(cg),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function lg(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var fg=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,tk(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,pw);r?.forEach(i=>this.addUsage(i,this.external,lg))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(hw(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])hw(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,pw(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,lg(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(D(ye),D(yu),D(Eu,8),D(qr))};static \u0275prov=w({token:t,factory:t.\u0275fac})}return t})(),ug={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},hg=/%COMP%/g;var mw="%COMP%",nk=`_nghost-${mw}`,rk=`_ngcontent-${mw}`,ik=!0,ok=new I("",{factory:()=>ik});function sk(t){return rk.replace(hg,t)}function ak(t){return nk.replace(hg,t)}function vw(t,e){return e.map(n=>n.replace(hg,t))}var pg=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(n,r,i,o,s,a,c=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=u,this.defaultRenderer=new Bs(n,s,a,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof Bu?i.applyToHost(n):i instanceof Hs&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,l=this.removeStylesOnCompDestroy,d=this.tracingService;switch(r.encapsulation){case Lt.Emulated:o=new Bu(c,u,r,this.appId,l,s,a,d);break;case Lt.ShadowDom:return new ju(c,n,r,s,a,this.nonce,d,u);case Lt.ExperimentalIsolatedShadowDom:return new ju(c,n,r,s,a,this.nonce,d);default:o=new Hs(c,u,r,l,s,a,d);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(D(dg),D(fg),D(yu),D(ok),D(ye),D(he),D(Eu),D(Kr,8))};static \u0275prov=w({token:t,factory:t.\u0275fac})}return t})(),Bs=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(ug[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(gw(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(gw(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new E(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=ug[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=ug[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Xt.DashCase|Xt.Important)?e.style.setProperty(n,r,i&Xt.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Xt.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=Tt().getGlobalEventTarget(this.doc,e),!e))throw new E(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function gw(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var ju=class extends Bs{hostEl;sharedStylesHost;shadowRoot;constructor(e,n,r,i,o,s,a,c){super(e,i,o,a),this.hostEl=n,this.sharedStylesHost=c,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let u=r.styles;u=vw(r.id,u);for(let d of u){let f=document.createElement("style");s&&f.setAttribute("nonce",s),f.textContent=d,this.shadowRoot.appendChild(f)}let l=r.getExternalStyles?.();if(l)for(let d of l){let f=lg(d,i);s&&f.setAttribute("nonce",s),this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Hs=class extends Bs{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=c?vw(c,u):u,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&jr.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Bu=class extends Hs{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,c){let u=i+"-"+r.id;super(e,n,r,o,s,a,c,u),this.contentAttr=sk(u),this.hostAttr=ak(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var $u=class t extends Fs{supportsDOMEvents=!0;static makeCurrent(){og(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=ck();return n==null?null:uk(n)}resetBaseElement(){$s=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Us(document.cookie,e)}},$s=null;function ck(){return $s=$s||document.head.querySelector("base"),$s?$s.getAttribute("href"):null}function uk(t){return new URL(t,document.baseURI).pathname}var lk=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:t.\u0275fac})}return t})(),yw=["alt","control","meta","shift"],dk={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fk={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},_w=(()=>{class t extends js{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Tt().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),yw.forEach(u=>{let l=r.indexOf(u);l>-1&&(r.splice(l,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=dk[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),yw.forEach(s=>{if(s!==i){let a=fk[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(D(ye))};static \u0275prov=w({token:t,factory:t.\u0275fac})}return t})();function gg(t,e,n){let r=y({rootComponent:t,platformRef:n?.platformRef},hk(e));return nw(r)}function hk(t){return{appProviders:[...yk,...t?.providers??[]],platformProviders:vk}}function pk(){$u.makeCurrent()}function gk(){return new yn}function mk(){return yp(document),document}var vk=[{provide:qr,useValue:dw},{provide:_u,useValue:pk,multi:!0},{provide:ye,useFactory:mk}];var yk=[{provide:fs,useValue:"root"},{provide:yn,useFactory:gk},{provide:Hu,useClass:Uu,multi:!0},{provide:Hu,useClass:_w,multi:!0},pg,fg,dg,{provide:Br,useExisting:pg},{provide:ii,useClass:lk},[]];var on=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=n.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(e,n){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var zu=class{map=new Map;set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}},Gu=class{encodeKey(e){return Ew(e)}encodeValue(e){return Ew(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function _k(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var Ek=/%(\d[a-f0-9])/gi,Ik={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Ew(t){return encodeURIComponent(t).replace(Ek,(e,n)=>Ik[n]??e)}function Wu(t){return`${t}`}var Dn=class t{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Gu,e.fromString){if(e.fromObject)throw new E(2805,!1);this.map=_k(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(Wu):[Wu(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Wu(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Wu(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};function wk(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Iw(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function ww(t){return typeof Blob<"u"&&t instanceof Blob}function bw(t){return typeof FormData<"u"&&t instanceof FormData}function bk(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Cw="Content-Type",Dw="Accept",Tw="text/plain",Sw="application/json",Ck=`${Sw}, ${Tw}, */*`,ho=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;referrerPolicy;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,n,r,i){this.url=n,this.method=e.toUpperCase();let o;if(wk(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new E(2822,"");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),o.integrity&&(this.integrity=o.integrity),o.referrer&&(this.referrer=o.referrer),o.referrerPolicy&&(this.referrerPolicy=o.referrerPolicy),this.transferCache=o.transferCache}if(this.headers??=new on,this.context??=new zu,!this.params)this.params=new Dn,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Iw(this.body)||ww(this.body)||bw(this.body)||bk(this.body)?this.body:this.body instanceof Dn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||bw(this.body)?null:ww(this.body)?this.body.type||null:Iw(this.body)?null:typeof this.body=="string"?Tw:this.body instanceof Dn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?Sw:null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.priority||this.priority,a=e.cache||this.cache,c=e.mode||this.mode,u=e.redirect||this.redirect,l=e.credentials||this.credentials,d=e.referrer||this.referrer,f=e.integrity||this.integrity,h=e.referrerPolicy||this.referrerPolicy,p=e.transferCache??this.transferCache,v=e.timeout??this.timeout,g=e.body!==void 0?e.body:this.body,_=e.withCredentials??this.withCredentials,U=e.reportProgress??this.reportProgress,q=e.headers||this.headers,j=e.params||this.params,Wt=e.context??this.context;return e.setHeaders!==void 0&&(q=Object.keys(e.setHeaders).reduce((yt,_t)=>yt.set(_t,e.setHeaders[_t]),q)),e.setParams&&(j=Object.keys(e.setParams).reduce((yt,_t)=>yt.set(_t,e.setParams[_t]),j)),new t(n,r,g,{params:j,headers:q,context:Wt,reportProgress:U,responseType:i,withCredentials:_,transferCache:p,keepalive:o,cache:a,priority:s,timeout:v,mode:c,redirect:u,credentials:l,referrer:d,integrity:f,referrerPolicy:h})}},oi=(function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t})(oi||{}),go=class{headers;status;statusText;url;ok;type;redirected;responseType;constructor(e,n=200,r="OK"){this.headers=e.headers||new on,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.responseType=e.responseType,this.ok=this.status>=200&&this.status<300}},qu=class t extends go{constructor(e={}){super(e)}type=oi.ResponseHeader;clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Ws=class t extends go{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=oi.Response;clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected,responseType:e.responseType??this.responseType})}},po=class extends go{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},Dk=200,Tk=204;var Sk=new I("");var Ak=/^\)\]\}',?\n/;var vg=(()=>{class t{xhrFactory;tracingService=m(Kr,{optional:!0});constructor(n){this.xhrFactory=n}maybePropagateTrace(n){return this.tracingService?.propagate?this.tracingService.propagate(n):n}handle(n){if(n.method==="JSONP")throw new E(-2800,!1);let r=this.xhrFactory;return F(null).pipe(De(()=>new O(o=>{let s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((g,_)=>s.setRequestHeader(g,_.join(","))),n.headers.has(Dw)||s.setRequestHeader(Dw,Ck),!n.headers.has(Cw)){let g=n.detectContentTypeHeader();g!==null&&s.setRequestHeader(Cw,g)}if(n.timeout&&(s.timeout=n.timeout),n.responseType){let g=n.responseType.toLowerCase();s.responseType=g!=="json"?g:"text"}let a=n.serializeBody(),c=null,u=()=>{if(c!==null)return c;let g=s.statusText||"OK",_=new on(s.getAllResponseHeaders()),U=s.responseURL||n.url;return c=new qu({headers:_,status:s.status,statusText:g,url:U}),c},l=this.maybePropagateTrace(()=>{let{headers:g,status:_,statusText:U,url:q}=u(),j=null;_!==Tk&&(j=typeof s.response>"u"?s.responseText:s.response),_===0&&(_=j?Dk:0);let Wt=_>=200&&_<300;if(n.responseType==="json"&&typeof j=="string"){let yt=j;j=j.replace(Ak,"");try{j=j!==""?JSON.parse(j):null}catch(_t){j=yt,Wt&&(Wt=!1,j={error:_t,text:j})}}Wt?(o.next(new Ws({body:j,headers:g,status:_,statusText:U,url:q||void 0})),o.complete()):o.error(new po({error:j,headers:g,status:_,statusText:U,url:q||void 0}))}),d=this.maybePropagateTrace(g=>{let{url:_}=u(),U=new po({error:g,status:s.status||0,statusText:s.statusText||"Unknown Error",url:_||void 0});o.error(U)}),f=d;n.timeout&&(f=this.maybePropagateTrace(g=>{let{url:_}=u(),U=new po({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:_||void 0});o.error(U)}));let h=!1,p=this.maybePropagateTrace(g=>{h||(o.next(u()),h=!0);let _={type:oi.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(_.total=g.total),n.responseType==="text"&&s.responseText&&(_.partialText=s.responseText),o.next(_)}),v=this.maybePropagateTrace(g=>{let _={type:oi.UploadProgress,loaded:g.loaded};g.lengthComputable&&(_.total=g.total),o.next(_)});return s.addEventListener("load",l),s.addEventListener("error",d),s.addEventListener("timeout",f),s.addEventListener("abort",d),n.reportProgress&&(s.addEventListener("progress",p),a!==null&&s.upload&&s.upload.addEventListener("progress",v)),s.send(a),o.next({type:oi.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",l),s.removeEventListener("timeout",f),n.reportProgress&&(s.removeEventListener("progress",p),a!==null&&s.upload&&s.upload.removeEventListener("progress",v)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||t)(D(ii))};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Rk(t,e){return e(t)}function Mk(t,e,n){return(r,i)=>ge(n,()=>e(r,o=>t(o,i)))}var yg=new I("",{factory:()=>[]}),Aw=new I(""),Rw=new I("",{factory:()=>!0});var _g=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:function(r){let i=null;return r?i=new(r||t):i=D(vg),i},providedIn:"root"})}return t})();var Ku=(()=>{class t{backend;injector;chain=null;pendingTasks=m(Kn);contributeToStability=m(Rw);constructor(n,r){this.backend=n,this.injector=r}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(yg),...this.injector.get(Aw,[])]));this.chain=r.reduceRight((i,o)=>Mk(i,o,this.injector),Rk)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(ns(r))}else return this.chain(n,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||t)(D(_g),D(fe))};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Eg=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:function(r){let i=null;return r?i=new(r||t):i=D(Ku),i},providedIn:"root"})}return t})();function mg(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,credentials:t.credentials,transferCache:t.transferCache,timeout:t.timeout,keepalive:t.keepalive,priority:t.priority,cache:t.cache,mode:t.mode,redirect:t.redirect,integrity:t.integrity,referrer:t.referrer,referrerPolicy:t.referrerPolicy}}var mo=(()=>{class t{handler;constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof ho)o=n;else{let c;i.headers instanceof on?c=i.headers:c=new on(i.headers);let u;i.params&&(i.params instanceof Dn?u=i.params:u=new Dn({fromObject:i.params})),o=new ho(n,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials,referrer:i.referrer,referrerPolicy:i.referrerPolicy,integrity:i.integrity,timeout:i.timeout})}let s=F(o).pipe(Bi(c=>this.handler.handle(c)));if(n instanceof ho||i.observe==="events")return s;let a=s.pipe(Et(c=>c instanceof Ws));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(B(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new E(2806,!1);return c.body}));case"blob":return a.pipe(B(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new E(2807,!1);return c.body}));case"text":return a.pipe(B(c=>{if(c.body!==null&&typeof c.body!="string")throw new E(2808,!1);return c.body}));case"json":default:return a.pipe(B(c=>c.body))}case"response":return a;default:throw new E(2809,!1)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new Dn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,mg(i,r))}post(n,r,i={}){return this.request("POST",n,mg(i,r))}put(n,r,i={}){return this.request("PUT",n,mg(i,r))}static \u0275fac=function(r){return new(r||t)(D(Eg))};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Nk=new I("",{factory:()=>!0}),kk="XSRF-TOKEN",Pk=new I("",{factory:()=>kk}),Ok="X-XSRF-TOKEN",xk=new I("",{providedIn:"root",factory:()=>Ok}),Lk=(()=>{class t{cookieName=m(Pk);doc=m(ye);lastCookieString="";lastToken=null;parseCount=0;getToken(){let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=Us(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Mw=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:function(r){let i=null;return r?i=new(r||t):i=D(Lk),i},providedIn:"root"})}return t})();function Fk(t,e){if(!m(Nk)||t.method==="GET"||t.method==="HEAD")return e(t);try{let i=m(uo).href,{origin:o}=new URL(i),{origin:s}=new URL(t.url,o);if(o!==s)return e(t)}catch{return e(t)}let n=m(Mw).getToken(),r=m(xk);return n!=null&&!t.headers.has(r)&&(t=t.clone({headers:t.headers.set(r,n)})),e(t)}var Ig=(function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t})(Ig||{});function Vk(t,e){return{\u0275kind:t,\u0275providers:e}}function wg(...t){let e=[mo,Ku,{provide:Eg,useExisting:Ku},{provide:_g,useFactory:()=>m(Sk,{optional:!0})??m(vg)},{provide:yg,useValue:Fk,multi:!0}];for(let n of t)e.push(...n.\u0275providers);return ct(e)}function bg(t){return Vk(Ig.Interceptors,t.map(e=>({provide:yg,useValue:e,multi:!0})))}var Nw=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(D(ye))};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var kw=()=>{};var xw=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Bk=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Yu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,l=o>>2,d=(o&3)<<4|a>>4,f=(a&15)<<2|u>>6,h=u&63;c||(h=64,s||(f=64)),r.push(n[l],n[d],n[f],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(xw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Bk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let u=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||u==null||d==null)throw new Dg;let f=o<<2|a>>4;if(r.push(f),u!==64){let h=a<<4&240|u>>2;if(r.push(h),d!==64){let p=u<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Dg=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Hk=function(t){let e=xw(t);return Yu.encodeByteArray(e,!0)},Sg=function(t){return Hk(t).replace(/\./g,"")},Ju=function(t){try{return Yu.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Lw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var $k=()=>Lw().__FIREBASE_DEFAULTS__,Wk=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},zk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Ju(t[1]);return e&&JSON.parse(e)},Ag=()=>{try{return kw()||$k()||Wk()||zk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Fw=t=>{var e,n;return(n=(e=Ag())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]};var Rg=()=>{var t;return(t=Ag())===null||t===void 0?void 0:t.config},Mg=t=>{var e;return(e=Ag())===null||e===void 0?void 0:e[`_${t}`]};var si=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Gs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Vw(t){return(await fetch(t,{credentials:"include"})).ok}var zs={};function Gk(){let t={prod:[],emulator:[]};for(let e of Object.keys(zs))zs[e]?t.emulator.push(e):t.prod.push(e);return t}function qk(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var Pw=!1;function Uw(t,e){if(typeof window>"u"||typeof document>"u"||!Gs(window.location.host)||zs[t]===e||zs[t]||Pw)return;zs[t]=e;function n(f){return`__firebase__banner__${f}`}let r="__firebase__banner",o=Gk().prod.length>0;function s(){let f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,h){f.setAttribute("width","24"),f.setAttribute("id",h),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){let f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{Pw=!0,s()},f}function l(f,h){f.setAttribute("id",h),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){let f=qk(r),h=n("text"),p=document.getElementById(h)||document.createElement("span"),v=n("learnmore"),g=document.getElementById(v)||document.createElement("a"),_=n("preprendIcon"),U=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){let q=f.element;a(q),l(g,v);let j=u();c(U,_),q.append(U,p,g,j),document.body.appendChild(q)}o?(p.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,p.innerText="Preview backend running in this workspace."),p.setAttribute("id",h)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function We(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function Bw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Hw(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function $w(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ww(){let t=We();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Zu(){try{return typeof indexedDB=="object"}catch{return!1}}function zw(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var Kk="FirebaseError",Ft=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Kk,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vt.prototype.create)}},Vt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?Yk(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Ft(i,a,r)}};function Yk(t,e){return t.replace(Jk,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Jk=/\{\$([^}]+)}/g;function Gw(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Xn(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(Ow(o)&&Ow(s)){if(!Xn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function Ow(t){return t!==null&&typeof t=="object"}function qs(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function vo(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function yo(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function qw(t,e){let n=new Tg(t,e);return n.subscribe.bind(n)}var Tg=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Zk(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Cg),i.error===void 0&&(i.error=Cg),i.complete===void 0&&(i.complete=Cg);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Zk(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Cg(){}var HJ=14400*1e3;function sn(t){return t&&t._delegate?t._delegate:t}var ht=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ai="[DEFAULT]";var Ng=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new si;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Xk(e))try{this.getOrInitializeService({instanceIdentifier:ai})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ai){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ai){return this.instances.has(e)}getOptions(e=ai){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Qk(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ai){return this.component?this.component.multipleInstances?e:ai:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Qk(t){return t===ai?void 0:t}function Xk(t){return t.instantiationMode==="EAGER"}var Qu=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Ng(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var eP=[],ie=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(ie||{}),tP={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},nP=ie.INFO,rP={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},iP=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=rP[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},er=class{constructor(e){this.name=e,this._logLevel=nP,this._logHandler=iP,this._userLogHandler=null,eP.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}};var oP=(t,e)=>e.some(n=>t instanceof n),Kw,Yw;function sP(){return Kw||(Kw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aP(){return Yw||(Yw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Jw=new WeakMap,Pg=new WeakMap,Zw=new WeakMap,kg=new WeakMap,xg=new WeakMap;function cP(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(an(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&Jw.set(n,t)}).catch(()=>{}),xg.set(e,t),e}function uP(t){if(Pg.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Pg.set(t,e)}var Og={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Pg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Zw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return an(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Qw(t){Og=t(Og)}function lP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Xu(this),e,...n);return Zw.set(r,e.sort?e.sort():[e]),an(r)}:aP().includes(t)?function(...e){return t.apply(Xu(this),e),an(Jw.get(this))}:function(...e){return an(t.apply(Xu(this),e))}}function dP(t){return typeof t=="function"?lP(t):(t instanceof IDBTransaction&&uP(t),oP(t,sP())?new Proxy(t,Og):t)}function an(t){if(t instanceof IDBRequest)return cP(t);if(kg.has(t))return kg.get(t);let e=dP(t);return e!==t&&(kg.set(t,e),xg.set(e,t)),e}var Xu=t=>xg.get(t);function el(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=an(s);return r&&s.addEventListener("upgradeneeded",c=>{r(an(s.result),c.oldVersion,c.newVersion,an(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var fP=["get","getKey","getAll","getAllKeys","count"],hP=["put","add","delete","clear"],Lg=new Map;function Xw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Lg.get(e))return Lg.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=hP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||fP.includes(n)))return;let o=async function(s,...a){let c=this.transaction(s,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&c.done]))[0]};return Lg.set(e,o),o}Qw(t=>P(y({},t),{get:(e,n,r)=>Xw(e,n)||t.get(e,n,r),has:(e,n)=>!!Xw(e,n)||t.has(e,n)}));var Vg=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pP(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function pP(t){let e=t.getComponent();return e?.type==="VERSION"}var Ug="@firebase/app",eb="0.13.2";var Tn=new er("@firebase/app"),gP="@firebase/app-compat",mP="@firebase/analytics-compat",vP="@firebase/analytics",yP="@firebase/app-check-compat",_P="@firebase/app-check",EP="@firebase/auth",IP="@firebase/auth-compat",wP="@firebase/database",bP="@firebase/data-connect",CP="@firebase/database-compat",DP="@firebase/functions",TP="@firebase/functions-compat",SP="@firebase/installations",AP="@firebase/installations-compat",RP="@firebase/messaging",MP="@firebase/messaging-compat",NP="@firebase/performance",kP="@firebase/performance-compat",PP="@firebase/remote-config",OP="@firebase/remote-config-compat",xP="@firebase/storage",LP="@firebase/storage-compat",FP="@firebase/firestore",VP="@firebase/ai",UP="@firebase/firestore-compat",jP="firebase",BP="11.10.0";var jg="[DEFAULT]",HP={[Ug]:"fire-core",[gP]:"fire-core-compat",[vP]:"fire-analytics",[mP]:"fire-analytics-compat",[_P]:"fire-app-check",[yP]:"fire-app-check-compat",[EP]:"fire-auth",[IP]:"fire-auth-compat",[wP]:"fire-rtdb",[bP]:"fire-data-connect",[CP]:"fire-rtdb-compat",[DP]:"fire-fn",[TP]:"fire-fn-compat",[SP]:"fire-iid",[AP]:"fire-iid-compat",[RP]:"fire-fcm",[MP]:"fire-fcm-compat",[NP]:"fire-perf",[kP]:"fire-perf-compat",[PP]:"fire-rc",[OP]:"fire-rc-compat",[xP]:"fire-gcs",[LP]:"fire-gcs-compat",[FP]:"fire-fst",[UP]:"fire-fst-compat",[VP]:"fire-vertex","fire-js":"fire-js",[jP]:"fire-js-all"};var Ks=new Map,$P=new Map,Bg=new Map;function tb(t,e){try{t.container.addComponent(e)}catch(n){Tn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Sn(t){let e=t.name;if(Bg.has(e))return Tn.debug(`There were multiple attempts to register component ${e}.`),!1;Bg.set(e,t);for(let n of Ks.values())tb(n,t);for(let n of $P.values())tb(n,t);return!0}function tl(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ut(t){return t==null?!1:t.settings!==void 0}var WP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},tr=new Vt("app","Firebase",WP);var Hg=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ht("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw tr.create("app-deleted",{appName:this._name})}};var _o=BP;function zg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:jg,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw tr.create("bad-app-name",{appName:String(i)});if(n||(n=Rg()),!n)throw tr.create("no-options");let o=Ks.get(i);if(o){if(Xn(n,o.options)&&Xn(r,o.config))return o;throw tr.create("duplicate-app",{appName:i})}let s=new Qu(i);for(let c of Bg.values())s.addComponent(c);let a=new Hg(n,r,s);return Ks.set(i,a),a}function Js(t=jg){let e=Ks.get(t);if(!e&&t===jg&&Rg())return zg();if(!e)throw tr.create("no-app",{appName:t});return e}function nl(){return Array.from(Ks.values())}function Ve(t,e,n){var r;let i=(r=HP[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Tn.warn(a.join(" "));return}Sn(new ht(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var zP="firebase-heartbeat-database",GP=1,Ys="firebase-heartbeat-store",Fg=null;function ob(){return Fg||(Fg=el(zP,GP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ys)}catch(n){console.warn(n)}}}}).catch(t=>{throw tr.create("idb-open",{originalErrorMessage:t.message})})),Fg}async function qP(t){try{let n=(await ob()).transaction(Ys),r=await n.objectStore(Ys).get(sb(t));return await n.done,r}catch(e){if(e instanceof Ft)Tn.warn(e.message);else{let n=tr.create("idb-get",{originalErrorMessage:e?.message});Tn.warn(n.message)}}}async function nb(t,e){try{let r=(await ob()).transaction(Ys,"readwrite");await r.objectStore(Ys).put(e,sb(t)),await r.done}catch(n){if(n instanceof Ft)Tn.warn(n.message);else{let r=tr.create("idb-set",{originalErrorMessage:n?.message});Tn.warn(r.message)}}}function sb(t){return`${t.name}!${t.options.appId}`}var KP=1024,YP=30,$g=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Wg(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=rb();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>YP){let s=ZP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Tn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=rb(),{heartbeatsToSend:r,unsentEntries:i}=JP(this._heartbeatsCache.heartbeats),o=Sg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Tn.warn(n),""}}};function rb(){return new Date().toISOString().substring(0,10)}function JP(t,e=KP){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),ib(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ib(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Wg=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Zu()?zw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await qP(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){let i=await this.read();return nb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){let i=await this.read();return nb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function ib(t){return Sg(JSON.stringify({version:2,heartbeats:t})).length}function ZP(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function QP(t){Sn(new ht("platform-logger",e=>new Vg(e),"PRIVATE")),Sn(new ht("heartbeat",e=>new $g(e),"PRIVATE")),Ve(Ug,eb,t),Ve(Ug,eb,"esm2017"),Ve("fire-js","")}QP("");var XP="firebase",eO="11.10.0";Ve(XP,eO,"app");function ab(t){t===void 0&&(t=m(Fe));let e=t.get(Kn);return n=>new O(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Io=new wr("ANGULARFIRE2_VERSION");function Gg(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var il=(t,e)=>{let n=e?[e]:nl(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Eo=(function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t})(Eo||{}),cb=rg()&&typeof Zone<"u"?Eo.WARN:Eo.SILENT;var rl=class{zone;delegate;constructor(e,n=Cf){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},wo=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=m(he);this.outsideAngular=n.runOutsideAngular(()=>new rl(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new rl(typeof Zone>"u"?void 0:Zone.current,bf))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ub=!1;function tO(t,e){!ub&&(cb>Eo.SILENT||rg())&&(ub=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),cb>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function nO(t){let e=m(he,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function ci(t){let e=m(he,{optional:!0});return e?e.run(()=>t()):t()}var rO=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),ge(n,()=>ci(()=>t.apply(void 0,r)))),An=(t,e,n)=>(n||=e?Eo.WARN:Eo.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=m(wo),s=m(Kn),a=m(fe)}catch{return tO(t,n),t.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=ci(()=>s.add())),i[u]=rO(i[u],r,a));let c=nO(()=>t.apply(this,i));return e?c instanceof O?c.pipe(jn(o.outsideAngular),Un(o.insideAngular),ab(a)):c instanceof Promise?ci(()=>{let u=s.add();return new Promise((l,d)=>{c.then(f=>ge(a,()=>ci(()=>l(f))),f=>ge(a,()=>ci(()=>d(f)))).finally(u)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:ci(()=>c):c instanceof O?c.pipe(jn(o.outsideAngular),Un(o.insideAngular)):ci(()=>c)});var ui=class{constructor(e){return e}},Zs=class{constructor(){return nl()}};function iO(t){return t&&t.length===1?t[0]:new ui(Js())}var qg=new I("angularfire2._apps"),oO={provide:ui,useFactory:iO,deps:[[new Jn,qg]]},sO={provide:Zs,deps:[[new Jn,qg]]};function aO(t){return(e,n)=>{let r=n.get(qr);Ve("angularfire",Io.full,"core"),Ve("angularfire",Io.full,"app"),Ve("angular",qf.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new ui(i)}}function lb(t,...e){return ct([oO,sO,{provide:qg,useFactory:aO(t),multi:!0,deps:[he,Fe,wo,...e]}])}var db=An(zg,!0);var cO=new Map,uO={activated:!1,tokenObservers:[]},lO={initialized:!1,enabled:!1};function jt(t){return cO.get(t)||Object.assign({},uO)}function gb(){return lO}var dO="https://content-firebaseappcheck.googleapis.com/v1";var fO="exchangeDebugToken",fb={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},HZ=1440*60*1e3;var Jg=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new si,this.pending.promise.catch(n=>{}),await hO(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new si,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function hO(t){return new Promise(e=>{setTimeout(e,t)})}var pO={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},nr=new Vt("appCheck","AppCheck",pO);function mb(t){if(!jt(t).activated)throw nr.create("use-before-activation",{appName:t.name})}async function vb({url:t,body:e},n){let r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){let d=await i.getHeartbeatsHeader();d&&(r["X-Firebase-Client"]=d)}let o={method:"POST",body:JSON.stringify(e),headers:r},s;try{s=await fetch(t,o)}catch(d){throw nr.create("fetch-network-error",{originalErrorMessage:d?.message})}if(s.status!==200)throw nr.create("fetch-status-error",{httpStatus:s.status});let a;try{a=await s.json()}catch(d){throw nr.create("fetch-parse-error",{originalErrorMessage:d?.message})}let c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw nr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let u=Number(c[1])*1e3,l=Date.now();return{token:a.token,expireTimeMillis:l+u,issuedAtTimeMillis:l}}function yb(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${dO}/projects/${n}/apps/${r}:${fO}?key=${i}`,body:{debug_token:e}}}var gO="firebase-app-check-database",mO=1,Zg="firebase-app-check-store";var ol=null;function vO(){return ol||(ol=new Promise((t,e)=>{try{let n=indexedDB.open(gO,mO);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(nr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Zg,{keyPath:"compositeKey"})}}}catch(n){e(nr.create("storage-open",{originalErrorMessage:n?.message}))}}),ol)}function yO(t,e){return _O(EO(t),e)}async function _O(t,e){let r=(await vO()).transaction(Zg,"readwrite"),o=r.objectStore(Zg).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(nr.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})}function EO(t){return`${t.options.appId}-${t.name}`}var Qs=new er("@firebase/app-check");function Kg(t,e){return Zu()?yO(t,e).catch(n=>{Qs.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function _b(){return gb().enabled}async function Eb(){let t=gb();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var IO={error:"UNKNOWN_ERROR"};function wO(t){return Yu.encodeString(JSON.stringify(t),!1)}async function Qg(t,e=!1,n=!1){let r=t.app;mb(r);let i=jt(r),o=i.token,s;if(o&&!Xs(o)&&(i.token=void 0,o=void 0),!o){let u=await i.cachedTokenPromise;u&&(Xs(u)?o=u:await Kg(r,void 0))}if(!e&&o&&Xs(o))return{token:o.token};let a=!1;if(_b())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=vb(yb(r,await Eb()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=await i.exchangeTokenPromise;return await Kg(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Qs.warn(u.message):n&&Qs.error(u),Yg(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=await jt(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Qs.warn(u.message):n&&Qs.error(u),s=u}let c;return o?s?Xs(o)?c={token:o.token,internalError:s}:c=Yg(s):(c={token:o.token},i.token=o,await Kg(r,o)):c=Yg(s),a&&TO(r,c),c}async function bO(t){let e=t.app;mb(e);let{provider:n}=jt(e);if(_b()){let r=await Eb(),{token:i}=await vb(yb(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await n.getToken();return{token:r}}}function CO(t,e,n,r){let{app:i}=t,o=jt(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Xs(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),hb(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>hb(t))}function Ib(t,e){let n=jt(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function hb(t){let{app:e}=t,n=jt(e),r=n.tokenRefresher;r||(r=DO(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function DO(t){let{app:e}=t;return new Jg(async()=>{let n=jt(e),r;if(n.token?r=await Qg(t,!0):r=await Qg(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let n=jt(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},fb.RETRIAL_MIN_WAIT,fb.RETRIAL_MAX_WAIT)}function TO(t,e){let n=jt(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Xs(t){return t.expireTimeMillis-Date.now()>0}function Yg(t){return{token:wO(IO),error:t}}var Xg=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=jt(this.app);for(let n of e)Ib(this.app,n.next);return Promise.resolve()}};function SO(t,e){return new Xg(t,e)}function AO(t){return{getToken:e=>Qg(t,e),getLimitedUseToken:()=>bO(t),addTokenListener:e=>CO(t,"INTERNAL",e),removeTokenListener:e=>Ib(t.app,e)}}var RO="@firebase/app-check",MO="0.10.1";var NO="app-check",pb="app-check-internal";function kO(){Sn(new ht(NO,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return SO(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(pb).initialize()})),Sn(new ht(pb,t=>{let e=t.getProvider("app-check").getImmediate();return AO(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ve(RO,MO)}kO();var PO="app-check";var sl=class{constructor(){return il(PO)}};var OO=["localhost","0.0.0.0","127.0.0.1"],eQ=typeof window<"u"&&OO.includes(window.location.hostname);var wb=()=>{};var bb=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},xO=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Cb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,l=o>>2,d=(o&3)<<4|a>>4,f=(a&15)<<2|u>>6,h=u&63;c||(h=64,s||(f=64)),r.push(n[l],n[d],n[f],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(bb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):xO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let u=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||u==null||d==null)throw new tm;let f=o<<2|a>>4;if(r.push(f),u!==64){let h=a<<4&240|u>>2;if(r.push(h),d!==64){let p=u<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},tm=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},LO=function(t){let e=bb(t);return Cb.encodeByteArray(e,!0)},rm=function(t){return LO(t).replace(/\./g,"")},al=function(t){try{return Cb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function FO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var VO=()=>FO().__FIREBASE_DEFAULTS__,UO=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},jO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&al(t[1]);return e&&JSON.parse(e)},BO=()=>{try{return wb()||VO()||UO()||jO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}};var Db=t=>BO()?.[`_${t}`];function im(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function Bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Tb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bt())}function Sb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ab(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Rb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Mb(){try{return typeof indexedDB=="object"}catch{return!1}}function Nb(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}var HO="FirebaseError",cn=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=HO,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rn.prototype.create)}},Rn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?$O(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new cn(i,a,r)}};function $O(t,e){return t.replace(WO,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var WO=/\{\$([^}]+)}/g;function om(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function kb(t,e){let n=new nm(t,e);return n.subscribe.bind(n)}var nm=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");zO(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=em),i.error===void 0&&(i.error=em),i.complete===void 0&&(i.complete=em);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function zO(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function em(){}var oQ=14400*1e3;function li(t){return t&&t._delegate?t._delegate:t}var Mn=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var GO=[],oe=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(oe||{}),qO={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},KO=oe.INFO,YO={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},JO=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=YO[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},bo=class{constructor(e){this.name=e,this._logLevel=KO,this._logHandler=JO,this._userLogHandler=null,GO.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}};var am=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(QO(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function QO(t){return t.getComponent()?.type==="VERSION"}var cm="@firebase/app",Pb="0.14.7";var Nn=new bo("@firebase/app"),XO="@firebase/app-compat",ex="@firebase/analytics-compat",tx="@firebase/analytics",nx="@firebase/app-check-compat",rx="@firebase/app-check",ix="@firebase/auth",ox="@firebase/auth-compat",sx="@firebase/database",ax="@firebase/data-connect",cx="@firebase/database-compat",ux="@firebase/functions",lx="@firebase/functions-compat",dx="@firebase/installations",fx="@firebase/installations-compat",hx="@firebase/messaging",px="@firebase/messaging-compat",gx="@firebase/performance",mx="@firebase/performance-compat",vx="@firebase/remote-config",yx="@firebase/remote-config-compat",_x="@firebase/storage",Ex="@firebase/storage-compat",Ix="@firebase/firestore",wx="@firebase/ai",bx="@firebase/firestore-compat",Cx="firebase",Dx="12.8.0";var Tx={[cm]:"fire-core",[XO]:"fire-core-compat",[tx]:"fire-analytics",[ex]:"fire-analytics-compat",[rx]:"fire-app-check",[nx]:"fire-app-check-compat",[ix]:"fire-auth",[ox]:"fire-auth-compat",[sx]:"fire-rtdb",[ax]:"fire-data-connect",[cx]:"fire-rtdb-compat",[ux]:"fire-fn",[lx]:"fire-fn-compat",[dx]:"fire-iid",[fx]:"fire-iid-compat",[hx]:"fire-fcm",[px]:"fire-fcm-compat",[gx]:"fire-perf",[mx]:"fire-perf-compat",[vx]:"fire-rc",[yx]:"fire-rc-compat",[_x]:"fire-gcs",[Ex]:"fire-gcs-compat",[Ix]:"fire-fst",[bx]:"fire-fst-compat",[wx]:"fire-vertex","fire-js":"fire-js",[Cx]:"fire-js-all"};var Sx=new Map,Ax=new Map,Ob=new Map;function xb(t,e){try{t.container.addComponent(e)}catch(n){Nn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Do(t){let e=t.name;if(Ob.has(e))return Nn.debug(`There were multiple attempts to register component ${e}.`),!1;Ob.set(e,t);for(let n of Sx.values())xb(n,t);for(let n of Ax.values())xb(n,t);return!0}function di(t){return t==null?!1:t.settings!==void 0}var Rx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},dm=new Rn("app","Firebase",Rx);var cl=Dx;function Co(t,e,n){let r=Tx[t]??t;n&&(r+=`-${n}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Nn.warn(s.join(" "));return}Do(new Mn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var Mx="firebase-heartbeat-database",Nx=1,ea="firebase-heartbeat-store",sm=null;function Ub(){return sm||(sm=el(Mx,Nx,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ea)}catch(n){console.warn(n)}}}}).catch(t=>{throw dm.create("idb-open",{originalErrorMessage:t.message})})),sm}async function kx(t){try{let n=(await Ub()).transaction(ea),r=await n.objectStore(ea).get(jb(t));return await n.done,r}catch(e){if(e instanceof cn)Nn.warn(e.message);else{let n=dm.create("idb-get",{originalErrorMessage:e?.message});Nn.warn(n.message)}}}async function Lb(t,e){try{let r=(await Ub()).transaction(ea,"readwrite");await r.objectStore(ea).put(e,jb(t)),await r.done}catch(n){if(n instanceof cn)Nn.warn(n.message);else{let r=dm.create("idb-set",{originalErrorMessage:n?.message});Nn.warn(r.message)}}}function jb(t){return`${t.name}!${t.options.appId}`}var Px=1024,Ox=30,um=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new lm(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Fb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>Ox){let i=Lx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Nn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=Fb(),{heartbeatsToSend:n,unsentEntries:r}=xx(this._heartbeatsCache.heartbeats),i=rm(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Nn.warn(e),""}}};function Fb(){return new Date().toISOString().substring(0,10)}function xx(t,e=Px){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Vb(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Vb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var lm=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Mb()?Nb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await kx(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return Lb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return Lb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function Vb(t){return rm(JSON.stringify({version:2,heartbeats:t})).length}function Lx(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function Fx(t){Do(new Mn("platform-logger",e=>new am(e),"PRIVATE")),Do(new Mn("heartbeat",e=>new um(e),"PRIVATE")),Co(cm,Pb,t),Co(cm,Pb,"esm2020"),Co("fire-js","")}Fx("");function Kb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Yb=Kb,Jb=new Rn("auth","Firebase",Kb());var fl=new bo("@firebase/auth");function Vx(t,...e){fl.logLevel<=oe.WARN&&fl.warn(`Auth (${cl}): ${t}`,...e)}function ll(t,...e){fl.logLevel<=oe.ERROR&&fl.error(`Auth (${cl}): ${t}`,...e)}function Bb(t,...e){throw bm(t,...e)}function wm(t,...e){return bm(t,...e)}function Zb(t,e,n){let r=P(y({},Yb()),{[e]:n});return new Rn("auth","Firebase",r).create(e,{appName:t.name})}function dl(t){return Zb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bm(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Jb.create(t,...e)}function z(t,e,...n){if(!t)throw bm(e,...n)}function ta(t){let e="INTERNAL ASSERTION FAILED: "+t;throw ll(e),new Error(e)}function hl(t,e){t||ta(e)}function Ux(){return Hb()==="http:"||Hb()==="https:"}function Hb(){return typeof self<"u"&&self.location?.protocol||null}function jx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ux()||Ab()||"connection"in navigator)?navigator.onLine:!0}function Bx(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var pi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,hl(n>e,"Short delay should be less than long delay!"),this.isMobile=Tb()||Rb()}get(){return jx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Hx(t,e){hl(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var pl=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ta("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ta("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ta("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var $x={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Wx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],zx=new pi(3e4,6e4);function Qb(t,e){return t.tenantId&&!e.tenantId?P(y({},e),{tenantId:t.tenantId}):e}async function _l(t,e,n,r,i={}){return Xb(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=om(y({key:t.config.apiKey},s)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);let u=y({method:e,headers:c},o);return Sb()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&im(t.emulatorConfig.host)&&(u.credentials="include"),pl.fetch()(await eC(t,t.config.apiHost,n,a),u)})}async function Xb(t,e,n){t._canInitEmulator=!1;let r=y(y({},$x),e);try{let i=new pm(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw ul(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ul(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw ul(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw ul(t,"user-disabled",s);let l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Zb(t,l,u);Bb(t,l)}}catch(i){if(i instanceof cn)throw i;Bb(t,"network-request-failed",{message:String(i)})}}async function eC(t,e,n,r){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?Hx(t.config,i):`${t.config.apiScheme}://${i}`;return Wx.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}var pm=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(wm(this.auth,"network-request-failed")),zx.get())})}};function ul(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=wm(t,e,r);return i.customData._tokenResponse=n,i}async function Gx(t,e){return _l(t,"POST","/v1/accounts:delete",e)}async function gl(t,e){return _l(t,"POST","/v1/accounts:lookup",e)}function na(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Cm(t,e=!1){return li(t).getIdToken(e)}async function tC(t,e=!1){let n=li(t),r=await n.getIdToken(e),i=nC(r);z(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:na(fm(i.auth_time)),issuedAtTime:na(fm(i.iat)),expirationTime:na(fm(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function fm(t){return Number(t)*1e3}function nC(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ll("JWT malformed, contained fewer than 3 sections"),null;try{let i=al(n);return i?JSON.parse(i):(ll("Failed to decode base64 JWT payload"),null)}catch(i){return ll("Caught error parsing JWT payload as JSON",i?.toString()),null}}function $b(t){let e=nC(t);return z(e,"internal-error"),z(typeof e.exp<"u","internal-error"),z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function gm(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof cn&&qx(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function qx({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var mm=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var ia=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=na(this.lastLoginAt),this.creationTime=na(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function ml(t){let e=t.auth,n=await t.getIdToken(),r=await gm(t,gl(e,{idToken:n}));z(r?.users.length,e,"internal-error");let i=r.users[0];t._notifyReloadListener(i);let o=i.providerUserInfo?.length?iC(i.providerUserInfo):[],s=Kx(t.providerData,o),a=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!s?.length,u=a?c:!1,l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ia(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,l)}async function rC(t){let e=li(t);await ml(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Kx(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function iC(t){return t.map(r=>{var i=r,{providerId:e}=i,n=Za(i,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}async function Yx(t,e){let n=await Xb(t,{},async()=>{let r=om({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await eC(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return t.emulatorConfig&&im(t.emulatorConfig.host)&&(c.credentials="include"),pl.fetch()(s,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Jx(t,e){return _l(t,"POST","/v2/accounts:revokeToken",Qb(t,e))}var ra=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){z(e.idToken,"internal-error"),z(typeof e.idToken<"u","internal-error"),z(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$b(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){z(e.length!==0,"internal-error");let n=$b(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:o}=await Yx(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(z(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(z(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(z(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return ta("not implemented")}};function rr(t,e){z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var fi=class t{constructor(o){var s=o,{uid:e,auth:n,stsTokenManager:r}=s,i=Za(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mm(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ia(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let n=await gm(this,this.stsTokenManager.getToken(this.auth,e));return z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return tC(this,e)}reload(){return rC(this)}_assign(e){this!==e&&(z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>y({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(P(y({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ml(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(di(this.auth.app))return Promise.reject(dl(this.auth));let e=await this.getIdToken();return await gm(this,Gx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return P(y({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>y({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){let r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,s=n.photoURL??void 0,a=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,l=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:h,providerData:p,stsTokenManager:v}=n;z(d&&v,e,"internal-error");let g=ra.fromJSON(this.name,v);z(typeof d=="string",e,"internal-error"),rr(r,e.name),rr(i,e.name),z(typeof f=="boolean",e,"internal-error"),z(typeof h=="boolean",e,"internal-error"),rr(o,e.name),rr(s,e.name),rr(a,e.name),rr(c,e.name),rr(u,e.name),rr(l,e.name);let _=new t({uid:d,auth:e,email:i,emailVerified:f,displayName:r,isAnonymous:h,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:g,createdAt:u,lastLoginAt:l});return p&&Array.isArray(p)&&(_.providerData=p.map(U=>y({},U))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(e,n,r=!1){let i=new ra;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ml(o),o}static async _fromGetAccountInfoResponse(e,n,r){let i=n.users[0];z(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?iC(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new ra;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new ia(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,u),c}};var Wb=new Map;function hi(t){hl(t instanceof Function,"Expected a class definition");let e=Wb.get(t);return e?(hl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Wb.set(t,e),e)}var Zx=(()=>{class t{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,r){this.storage[n]=r}async _get(n){let r=this.storage[n];return r===void 0?null:r}async _remove(n){delete this.storage[n]}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),vm=Zx;function hm(t,e,n){return`firebase:${t}:${e}:${n}`}var vl=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=hm(this.userKey,i.apiKey,o),this.fullPersistenceKey=hm("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=await gl(this.auth,{idToken:e}).catch(()=>{});return n?fi._fromGetAccountInfoResponse(this.auth,n,e):null}return fi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new t(hi(vm),e,r);let i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u),o=i[0]||hi(vm),s=hm(r,e.config.apiKey,e.name),a=null;for(let u of n)try{let l=await u._get(s);if(l){let d;if(typeof l=="string"){let f=await gl(e,{idToken:l}).catch(()=>{});if(!f)break;d=await fi._fromGetAccountInfoResponse(e,f,l)}else d=fi._fromJSON(e,l);u!==o&&(a=d),o=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new t(o,e,r):(o=c[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==o)try{await u._remove(s)}catch{}})),new t(o,e,r))}};function zb(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tL(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Qx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rL(e))return"Blackberry";if(iL(e))return"Webos";if(Xx(e))return"Safari";if((e.includes("chrome/")||eL(e))&&!e.includes("edge/"))return"Chrome";if(nL(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function Qx(t=Bt()){return/firefox\//i.test(t)}function Xx(t=Bt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function eL(t=Bt()){return/crios\//i.test(t)}function tL(t=Bt()){return/iemobile/i.test(t)}function nL(t=Bt()){return/android/i.test(t)}function rL(t=Bt()){return/blackberry/i.test(t)}function iL(t=Bt()){return/webos/i.test(t)}function oC(t,e=[]){let n;switch(t){case"Browser":n=zb(Bt());break;case"Worker":n=`${zb(Bt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${cl}/${r}`}var ym=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function oL(t,e={}){return _l(t,"GET","/v2/passwordPolicy",Qb(t,e))}var sL=6,_m=class{constructor(e){let n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??sL,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Em=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yl(this),this.idTokenSubscription=new yl(this),this.beforeStateQueue=new ym(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=hi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await vl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let n=await gl(this,{idToken:e}),r=await fi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(di(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let n=await this.assertedPersistence.getCurrentUser(),r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return z(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ml(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Bx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(di(this.app))return Promise.reject(dl(this));let n=e?li(e):null;return n&&z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return di(this.app)?Promise.reject(dl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return di(this.app)?Promise.reject(dl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await oL(this),n=new _m(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Rn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){let n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Jx(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&hi(e)||this._popupRedirectResolver;z(n,this,"argument-error"),this.redirectPersistenceManager=await vl.create(this,[hi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(z(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(di(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Vx(`Error while retrieving App Check token: ${e.error}`),e?.token}};function aL(t){return li(t)}var yl=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=kb(n=>this.observer=n)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var cL={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uL(t){cL=t}function lL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function dL(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(hi);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Dm(t,e,n,r){return li(t).onIdTokenChanged(e,n,r)}var VQ=lL("rcb"),UQ=new pi(3e4,6e4);var jQ=new pi(2e3,1e4);var BQ=600*1e3;var HQ=new pi(3e4,6e4);var $Q=new pi(5e3,15e3);var WQ=encodeURIComponent("fac");var Gb="@firebase/auth",qb="1.12.0";var Im=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function fL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hL(t){Do(new Mn("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;z(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oC(t)},u=new Em(r,i,o,c);return dL(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Do(new Mn("auth-internal",e=>{let n=aL(e.getProvider("auth").getImmediate());return(r=>new Im(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Co(Gb,qb,fL(t)),Co(Gb,qb,"esm2020")}var pL=300,zQ=Db("authIdTokenMaxAge")||pL;function gL(){return document.getElementsByTagName("head")?.[0]??document}uL({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=wm("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",gL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hL("Browser");function Tm(t){return new O(function(e){var n=Dm(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}function sC(t){return Tm(t).pipe(De(function(e){return e?de(Cm(e)):F(null)}))}function bC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var CC=bC,DC=new Vt("auth","Firebase",bC());var Dl=new er("@firebase/auth");function vL(t,...e){Dl.logLevel<=ie.WARN&&Dl.warn(`Auth (${_o}): ${t}`,...e)}function Il(t,...e){Dl.logLevel<=ie.ERROR&&Dl.error(`Auth (${_o}): ${t}`,...e)}function ln(t,...e){throw Jm(t,...e)}function gi(t,...e){return Jm(t,...e)}function TC(t,e,n){let r=Object.assign(Object.assign({},CC()),{[e]:n});return new Vt("auth","Firebase",r).create(e,{appName:t.name})}function sr(t){return TC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jm(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return DC.create(t,...e)}function T(t,e,...n){if(!t)throw Jm(e,...n)}function kn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Il(e),new Error(e)}function ar(t,e){t||kn(e)}function Mm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function yL(){return aC()==="http:"||aC()==="https:"}function aC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function _L(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yL()||Hw()||"connection"in navigator)?navigator.onLine:!0}function EL(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var mi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,ar(n>e,"Short delay should be less than long delay!"),this.isMobile=jw()||$w()}get(){return _L()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Zm(t,e){ar(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Tl=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;kn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;kn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;kn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var IL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var wL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bL=new mi(3e4,6e4);function yi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function cr(t,e,n,r,i={}){return SC(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=qs(Object.assign({key:t.config.apiKey},s)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);let u=Object.assign({method:e,headers:c},o);return Bw()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Gs(t.emulatorConfig.host)&&(u.credentials="include"),Tl.fetch()(await AC(t,t.config.apiHost,n,a),u)})}async function SC(t,e,n){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},IL),e);try{let i=new Nm(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw El(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw El(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw El(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw El(t,"user-disabled",s);let l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw TC(t,l,u);ln(t,l)}}catch(i){if(i instanceof Ft)throw i;ln(t,"network-request-failed",{message:String(i)})}}async function Fl(t,e,n,r,i={}){let o=await cr(t,e,n,r,i);return"mfaPendingCredential"in o&&ln(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function AC(t,e,n,r){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?Zm(t.config,i):`${t.config.apiScheme}://${i}`;return wL.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}function CL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Nm=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(gi(this.auth,"network-request-failed")),bL.get())})}};function El(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=gi(t,e,r);return i.customData._tokenResponse=n,i}function cC(t){return t!==void 0&&t.enterprise!==void 0}var km=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return CL(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};async function DL(t,e){return cr(t,"GET","/v2/recaptchaConfig",yi(t,e))}async function TL(t,e){return cr(t,"POST","/v1/accounts:delete",e)}async function Sl(t,e){return cr(t,"POST","/v1/accounts:lookup",e)}function sa(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Qm(t,e=!1){let n=sn(t),r=await n.getIdToken(e),i=Xm(r);T(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:sa(Sm(i.auth_time)),issuedAtTime:sa(Sm(i.iat)),expirationTime:sa(Sm(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Sm(t){return Number(t)*1e3}function Xm(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Il("JWT malformed, contained fewer than 3 sections"),null;try{let i=Ju(n);return i?JSON.parse(i):(Il("Failed to decode base64 JWT payload"),null)}catch(i){return Il("Caught error parsing JWT payload as JSON",i?.toString()),null}}function uC(t){let e=Xm(t);return T(e,"internal-error"),T(typeof e.exp<"u","internal-error"),T(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ca(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ft&&SL(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function SL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Pm=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var ua=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=sa(this.lastLoginAt),this.creationTime=sa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Al(t){var e;let n=t.auth,r=await t.getIdToken(),i=await ca(t,Sl(n,{idToken:r}));T(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?RC(o.providerUserInfo):[],a=AL(t.providerData,s),c=t.isAnonymous,u=!(t.email&&o.passwordHash)&&!a?.length,l=c?u:!1,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new ua(o.createdAt,o.lastLoginAt),isAnonymous:l};Object.assign(t,d)}async function ev(t){let e=sn(t);await Al(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function AL(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function RC(t){return t.map(e=>{var{providerId:n}=e,r=Df(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function RL(t,e){let n=await SC(t,{},async()=>{let r=qs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await AC(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return t.emulatorConfig&&Gs(t.emulatorConfig.host)&&(c.credentials="include"),Tl.fetch()(s,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ML(t,e){return cr(t,"POST","/v2/accounts:revokeToken",yi(t,e))}var aa=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){T(e.idToken,"internal-error"),T(typeof e.idToken<"u","internal-error"),T(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):uC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){T(e.length!==0,"internal-error");let n=uC(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(T(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:o}=await RL(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(T(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(T(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(T(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return kn("not implemented")}};function ir(t,e){T(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var or=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Df(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Pm(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ua(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){let n=await ca(this,this.stsTokenManager.getToken(this.auth,e));return T(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Qm(this,e)}reload(){return ev(this)}_assign(e){this!==e&&(T(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){T(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Al(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ut(this.auth.app))return Promise.reject(sr(this.auth));let e=await this.getIdToken();return await ca(this,TL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,c,u,l;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,h=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,p=(s=n.photoURL)!==null&&s!==void 0?s:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,_=(u=n.createdAt)!==null&&u!==void 0?u:void 0,U=(l=n.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:q,emailVerified:j,isAnonymous:Wt,providerData:yt,stsTokenManager:_t}=n;T(q&&_t,e,"internal-error");let gr=aa.fromJSON(this.name,_t);T(typeof q=="string",e,"internal-error"),ir(d,e.name),ir(f,e.name),T(typeof j=="boolean",e,"internal-error"),T(typeof Wt=="boolean",e,"internal-error"),ir(h,e.name),ir(p,e.name),ir(v,e.name),ir(g,e.name),ir(_,e.name),ir(U,e.name);let Mi=new t({uid:q,auth:e,email:f,emailVerified:j,displayName:d,isAnonymous:Wt,photoURL:p,phoneNumber:h,tenantId:v,stsTokenManager:gr,createdAt:_,lastLoginAt:U});return yt&&Array.isArray(yt)&&(Mi.providerData=yt.map(se=>Object.assign({},se))),g&&(Mi._redirectEventId=g),Mi}static async _fromIdTokenResponse(e,n,r=!1){let i=new aa;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Al(o),o}static async _fromGetAccountInfoResponse(e,n,r){let i=n.users[0];T(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?RC(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new aa;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new ua(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,u),c}};var lC=new Map;function Pn(t){ar(t instanceof Function,"Expected a class definition");let e=lC.get(t);return e?(ar(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,lC.set(t,e),e)}var NL=(()=>{class t{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,r){this.storage[n]=r}async _get(n){let r=this.storage[n];return r===void 0?null:r}async _remove(n){delete this.storage[n]}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Om=NL;function wl(t,e,n){return`firebase:${t}:${e}:${n}`}var Rl=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=wl(this.userKey,i.apiKey,o),this.fullPersistenceKey=wl("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=await Sl(this.auth,{idToken:e}).catch(()=>{});return n?or._fromGetAccountInfoResponse(this.auth,n,e):null}return or._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new t(Pn(Om),e,r);let i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u),o=i[0]||Pn(Om),s=wl(r,e.config.apiKey,e.name),a=null;for(let u of n)try{let l=await u._get(s);if(l){let d;if(typeof l=="string"){let f=await Sl(e,{idToken:l}).catch(()=>{});if(!f)break;d=await or._fromGetAccountInfoResponse(e,f,l)}else d=or._fromJSON(e,l);u!==o&&(a=d),o=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new t(o,e,r):(o=c[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==o)try{await u._remove(s)}catch{}})),new t(o,e,r))}};function dC(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(MC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xC(e))return"Blackberry";if(LC(e))return"Webos";if(NC(e))return"Safari";if((e.includes("chrome/")||kC(e))&&!e.includes("edge/"))return"Chrome";if(OC(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function MC(t=We()){return/firefox\//i.test(t)}function NC(t=We()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kC(t=We()){return/crios\//i.test(t)}function PC(t=We()){return/iemobile/i.test(t)}function OC(t=We()){return/android/i.test(t)}function xC(t=We()){return/blackberry/i.test(t)}function LC(t=We()){return/webos/i.test(t)}function tv(t=We()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function kL(t=We()){var e;return tv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function PL(){return Ww()&&document.documentMode===10}function FC(t=We()){return tv(t)||OC(t)||LC(t)||xC(t)||/windows phone/i.test(t)||PC(t)}function VC(t,e=[]){let n;switch(t){case"Browser":n=dC(We());break;case"Worker":n=`${dC(We())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${_o}/${r}`}var xm=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function OL(t,e={}){return cr(t,"GET","/v2/passwordPolicy",yi(t,e))}var xL=6,Lm=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:xL,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Fm=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ml(this),this.idTokenSubscription=new Ml(this),this.beforeStateQueue=new xm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Pn(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await Rl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let n=await Sl(this,{idToken:e}),r=await or._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ut(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return T(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Al(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=EL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ut(this.app))return Promise.reject(sr(this));let n=e?sn(e):null;return n&&T(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&T(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ut(this.app)?Promise.reject(sr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ut(this.app)?Promise.reject(sr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await OL(this),n=new Lm(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Vt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){let n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await ML(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&Pn(e)||this._popupRedirectResolver;T(n,this,"argument-error"),this.redirectPersistenceManager=await Rl.create(this,[Pn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(T(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return T(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=VC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(Ut(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&vL(`Error while retrieving App Check token: ${n.error}`),n?.token}};function To(t){return sn(t)}var Ml=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=qw(n=>this.observer=n)}get next(){return T(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Vl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function LL(t){Vl=t}function UC(t){return Vl.loadJS(t)}function FL(){return Vl.recaptchaEnterpriseScript}function VL(){return Vl.gapiScript}function jC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var Vm=class{constructor(){this.enterprise=new Um}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}},Um=class{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}};var UL="recaptcha-enterprise",BC="NO_RECAPTCHA",jm=class{constructor(e){this.type=UL,this.auth=To(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,a)=>{DL(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let u=new km(c);return o.tenantId==null?o._agentRecaptchaConfig=u:o._tenantRecaptchaConfigs[o.tenantId]=u,s(u.siteKey)}}).catch(c=>{a(c)})})}function i(o,s,a){let c=window.grecaptcha;cC(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(u=>{s(u)}).catch(()=>{s(BC)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Vm().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&cC(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=FL();c.length!==0&&(c+=a),UC(c).then(()=>{i(a,o,s)}).catch(u=>{s(u)})}}).catch(a=>{s(a)})})}};async function oa(t,e,n,r=!1,i=!1){let o=new jm(t),s;if(i)s=BC;else try{s=await o.verify(n)}catch{s=await o.verify(n,!0)}let a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function fC(t,e,n,r,i){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=await oa(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=await oa(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=await oa(t,e,n);return r(t,a).catch(async c=>{var u;if(((u=t._getRecaptchaConfig())===null||u===void 0?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let l=await oa(t,e,n,!1,!0);return r(t,l)}return Promise.reject(c)})}else{let a=await oa(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")}function nv(t,e){let n=tl(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(Xn(o,e??{}))return i;ln(i,"already-initialized")}return n.initialize({options:e})}function jL(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Pn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function rv(t,e,n){let r=To(t);T(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=HC(e),{host:s,port:a}=BL(e),c=a===null?"":`:${a}`,u={url:`${o}//${s}${c}/`},l=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){T(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),T(Xn(u,r.config.emulator)&&Xn(l,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=l,r.settings.appVerificationDisabledForTesting=!0,Gs(s)?(Vw(`${o}//${s}${c}`),Uw("Auth",!0)):i||HL()}function HC(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function BL(t){let e=HC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:hC(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:hC(s)}}}function hC(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function HL(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var la=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return kn("not implemented")}_getIdTokenResponse(e){return kn("not implemented")}_linkToIdToken(e,n){return kn("not implemented")}_getReauthenticationResolver(e){return kn("not implemented")}};async function $L(t,e){return cr(t,"POST","/v1/accounts:signUp",e)}async function WL(t,e){return Fl(t,"POST","/v1/accounts:signInWithPassword",yi(t,e))}async function zL(t,e){return Fl(t,"POST","/v1/accounts:signInWithEmailLink",yi(t,e))}async function GL(t,e){return Fl(t,"POST","/v1/accounts:signInWithEmailLink",yi(t,e))}var da=class t extends la{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fC(e,n,"signInWithPassword",WL,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return zL(e,{email:this._email,oobCode:this._password});default:ln(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fC(e,r,"signUpPassword",$L,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return GL(e,{idToken:n,email:this._email,oobCode:this._password});default:ln(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function Am(t,e){return Fl(t,"POST","/v1/accounts:signInWithIdp",yi(t,e))}function qL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function KL(t){let e=vo(yo(t)).link,n=e?vo(yo(e)).deep_link_id:null,r=vo(yo(t)).deep_link_id;return(r?vo(yo(r)).link:null)||r||n||e||t}var Nl=class t{constructor(e){var n,r,i,o,s,a;let c=vo(yo(e)),u=(n=c.apiKey)!==null&&n!==void 0?n:null,l=(r=c.oobCode)!==null&&r!==void 0?r:null,d=qL((i=c.mode)!==null&&i!==void 0?i:null);T(u&&l&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=l,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=KL(e);try{return new t(n)}catch{return null}}};var $C=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return da._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Nl.parseLink(r);return T(i,"argument-error"),da._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),kl=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Bm=class extends kl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var fa=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){let o=await or._fromIdTokenResponse(e,r,i),s=pC(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);let i=pC(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})}};function pC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Hm=class t extends Ft{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function WC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Hm._fromErrorAndOperation(t,o,e,r):o})}async function YL(t,e,n=!1){let r=await ca(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return fa._forOperation(t,"link",r)}async function JL(t,e,n=!1){let{auth:r}=t;if(Ut(r.app))return Promise.reject(sr(r));let i="reauthenticate";try{let o=await ca(t,WC(r,i,e,t),n);T(o.idToken,r,"internal-error");let s=Xm(o.idToken);T(s,r,"internal-error");let{sub:a}=s;return T(t.uid===a,r,"user-mismatch"),fa._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&ln(r,"user-mismatch"),o}}async function zC(t,e,n=!1){if(Ut(t.app))return Promise.reject(sr(t));let r="signIn",i=await WC(t,r,e),o=await fa._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function iv(t,e){return zC(To(t),e)}async function ZL(t){let e=To(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function ov(t,e,n){return Ut(t.app)?Promise.reject(sr(t)):iv(sn(t),$C.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ZL(t),r})}function sv(t,e,n,r){return sn(t).onIdTokenChanged(e,n,r)}function av(t,e,n){return sn(t).beforeAuthStateChanged(e,n)}function cv(t){return sn(t).signOut()}var Pl="__sak";var Ol=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pl,"1"),this.storage.removeItem(Pl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var QL=1e3,XL=10,e1=(()=>{class t extends Ol{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=FC(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);PL()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,XL):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},QL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(n,r){await super._set(n,r),this.localCache[n]=JSON.stringify(r)}async _get(n){let r=await super._get(n);return this.localCache[n]=JSON.stringify(r),r}async _remove(n){await super._remove(n),delete this.localCache[n]}}return t.type="LOCAL",t})(),GC=e1;var t1=(()=>{class t extends Ol{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),uv=t1;function n1(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}var r1=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}async handleEvent(n){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(async l=>l(r.origin,s)),u=await n1(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:u})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function qC(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var $m=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let u=qC("",20);i.port1.start();let l=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(d){let f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(l),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(f.data.response);break;default:clearTimeout(l),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function un(){return window}function i1(t){un().location.href=t}function KC(){return typeof un().WorkerGlobalScope<"u"&&typeof un().importScripts=="function"}async function o1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function s1(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function a1(){return KC()?self:null}var YC="firebaseLocalStorageDb",c1=1,xl="firebaseLocalStorage",JC="fbase_key",vi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Ul(t,e){return t.transaction([xl],e?"readwrite":"readonly").objectStore(xl)}function u1(){let t=indexedDB.deleteDatabase(YC);return new vi(t).toPromise()}function Wm(){let t=indexedDB.open(YC,c1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(xl,{keyPath:JC})}catch(i){n(i)}}),t.addEventListener("success",async()=>{let r=t.result;r.objectStoreNames.contains(xl)?e(r):(r.close(),await u1(),e(await Wm()))})})}async function gC(t,e,n){let r=Ul(t,!0).put({[JC]:e,value:n});return new vi(r).toPromise()}async function l1(t,e){let n=Ul(t,!1).get(e),r=await new vi(n).toPromise();return r===void 0?null:r.value}function mC(t,e){let n=Ul(t,!0).delete(e);return new vi(n).toPromise()}var d1=800,f1=3,h1=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wm(),this.db)}async _withRetries(n){let r=0;for(;;)try{let i=await this._openDb();return await n(i)}catch(i){if(r++>f1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return KC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=r1._getInstance(a1()),this.receiver._subscribe("keyChanged",async(n,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(n,r)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await o1(),!this.activeServiceWorker)return;this.sender=new $m(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(n){if(!(!this.sender||!this.activeServiceWorker||s1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let n=await Wm();return await gC(n,Pl,"1"),await mC(n,Pl),!0}catch{}return!1}async _withPendingWrite(n){this.pendingWrites++;try{await n()}finally{this.pendingWrites--}}async _set(n,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>gC(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)))}async _get(n){let r=await this._withRetries(i=>l1(i,n));return this.localCache[n]=r,r}async _remove(n){return this._withPendingWrite(async()=>(await this._withRetries(r=>mC(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)))}async _poll(){let n=await this._withRetries(o=>{let s=Ul(o,!1).getAll();return new vi(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),d1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),ZC=h1;var xee=jC("rcb"),Lee=new mi(3e4,6e4);function p1(t,e){return e?Pn(e):(T(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var ha=class extends la{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Am(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Am(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Am(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function g1(t){return zC(t.auth,new ha(t),t.bypassAuthState)}function m1(t){let{auth:e,user:n}=t;return T(n,e,"internal-error"),JL(n,new ha(t),t.bypassAuthState)}async function v1(t){let{auth:e,user:n}=t;return T(n,e,"internal-error"),YL(n,new ha(t),t.bypassAuthState)}var zm=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return g1;case"linkViaPopup":case"linkViaRedirect":return v1;case"reauthViaPopup":case"reauthViaRedirect":return m1;default:ln(this.auth,"internal-error")}}resolve(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Fee=new mi(2e3,1e4);var y1="pendingRedirect",bl=new Map,Gm=class extends zm{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=bl.get(this.auth._key());if(!e){try{let r=await _1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}bl.set(this.auth._key(),e)}return this.bypassAuthState||bl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function _1(t,e){let n=w1(e),r=I1(t);if(!await r._isAvailable())return!1;let i=await r._get(n)==="true";return await r._remove(n),i}function E1(t,e){bl.set(t._key(),e)}function I1(t){return Pn(t._redirectPersistence)}function w1(t){return wl(y1,t.config.apiKey,t.name)}async function b1(t,e,n=!1){if(Ut(t.app))return Promise.reject(sr(t));let r=To(t),i=p1(r,e),s=await new Gm(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var C1=600*1e3,qm=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!D1(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!QC(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(gi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=C1&&this.cachedEventUids.clear(),this.cachedEventUids.has(vC(e))}saveEventToCache(e){this.cachedEventUids.add(vC(e)),this.lastProcessedEventTime=Date.now()}};function vC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function QC({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function D1(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QC(t);default:return!1}}async function T1(t,e={}){return cr(t,"GET","/v1/projects",e)}var S1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,A1=/^https?/;async function R1(t){if(t.config.emulator)return;let{authorizedDomains:e}=await T1(t);for(let n of e)try{if(M1(n))return}catch{}ln(t,"unauthorized-domain")}function M1(t){let e=Mm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!A1.test(n))return!1;if(S1.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var N1=new mi(3e4,6e4);function yC(){let t=un().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function k1(t){return new Promise((e,n)=>{var r,i,o;function s(){yC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yC(),n(gi(t,"network-request-failed"))},timeout:N1.get()})}if(!((i=(r=un().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=un().gapi)===null||o===void 0)&&o.load)s();else{let a=jC("iframefcb");return un()[a]=()=>{gapi.load?s():n(gi(t,"network-request-failed"))},UC(`${VL()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Cl=null,e})}var Cl=null;function P1(t){return Cl=Cl||k1(t),Cl}var O1=new mi(5e3,15e3),x1="__/auth/iframe",L1="emulator/auth/iframe",F1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},V1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function U1(t){let e=t.config;T(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Zm(e,L1):`https://${t.config.authDomain}/${x1}`,r={apiKey:e.apiKey,appName:t.name,v:_o},i=V1.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${qs(r).slice(1)}`}async function j1(t){let e=await P1(t),n=un().gapi;return T(n,t,"internal-error"),e.open({where:document.body,url:U1(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:F1,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=gi(t,"network-request-failed"),a=un().setTimeout(()=>{o(s)},O1.get());function c(){un().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})}))}var B1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},H1=500,$1=600,W1="_blank",z1="http://localhost",Ll=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function G1(t,e,n,r=H1,i=$1){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},B1),{width:r.toString(),height:i.toString(),top:o,left:s}),u=We().toLowerCase();n&&(a=kC(u)?W1:n),MC(u)&&(e=e||z1,c.scrollbars="yes");let l=Object.entries(c).reduce((f,[h,p])=>`${f}${h}=${p},`,"");if(kL(u)&&a!=="_self")return q1(e||"",a),new Ll(null);let d=window.open(e||"",a,l);T(d,t,"popup-blocked");try{d.focus()}catch{}return new Ll(d)}function q1(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var K1="__/auth/handler",Y1="emulator/auth/handler",J1=encodeURIComponent("fac");async function _C(t,e,n,r,i,o){T(t.config.authDomain,t,"auth-domain-config-required"),T(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:_o,eventId:i};if(e instanceof kl){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",Gw(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[l,d]of Object.entries(o||{}))s[l]=d}if(e instanceof Bm){let l=e.getScopes().filter(d=>d!=="");l.length>0&&(s.scopes=l.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let l of Object.keys(a))a[l]===void 0&&delete a[l];let c=await t._getAppCheckToken(),u=c?`#${J1}=${encodeURIComponent(c)}`:"";return`${Z1(t)}?${qs(a).slice(1)}${u}`}function Z1({config:t}){return t.emulator?Zm(t,Y1):`https://${t.authDomain}/${K1}`}var Rm="webStorageSupport",Km=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uv,this._completeRedirectFn=b1,this._overrideRedirectResult=E1}async _openPopup(e,n,r,i){var o;ar((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=await _C(e,n,r,Mm(),i);return G1(e,s,qC())}async _openRedirect(e,n,r,i){await this._originValidation(e);let o=await _C(e,n,r,Mm(),i);return i1(o),new Promise(()=>{})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(ar(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){let n=await j1(e),r=new qm(e);return n.register("authEvent",i=>(T(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Rm,{type:Rm},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[Rm];s!==void 0&&n(!!s),ln(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=R1(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return FC()||NC()||tv()}},XC=Km;var EC="@firebase/auth",IC="1.10.8";var Ym=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){T(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Q1(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function X1(t){Sn(new ht("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;T(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:VC(t)},u=new Fm(r,i,o,c);return jL(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Sn(new ht("auth-internal",e=>{let n=To(e.getProvider("auth").getImmediate());return(r=>new Ym(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ve(EC,IC,Q1(t)),Ve(EC,IC,"esm2017")}var eF=300,tF=Mg("authIdTokenMaxAge")||eF,wC=null,nF=t=>async e=>{let n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>tF)return;let i=n?.token;wC!==i&&(wC=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function lv(t=Js()){let e=tl(t,"auth");if(e.isInitialized())return e.getImmediate();let n=nv(t,{popupRedirectResolver:XC,persistence:[ZC,GC,uv]}),r=Mg("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=nF(o.toString());av(n,s,()=>s(n.currentUser)),sv(n,a=>s(a))}}let i=Fw("auth");return i&&rv(n,`http://${i}`),n}function rF(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}LL({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=gi("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",rF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});X1("Browser");var eD="auth",pt=class{constructor(e){return e}},dv=class{constructor(){return il(eD)}};var fv=new I("angularfire2.auth-instances");function qF(t,e){let n=Gg(eD,t,e);return n&&new pt(n)}function KF(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new pt(r)}}var YF={provide:dv,deps:[[new Jn,fv]]},JF={provide:pt,useFactory:qF,deps:[[new Jn,fv],ui]};function tD(t,...e){return Ve("angularfire",Io.full,"auth"),ct([JF,YF,{provide:fv,useFactory:KF(t),multi:!0,deps:[he,Fe,wo,Zs,[new Jn,sl],...e]}])}var jl=An(sC,!0),Bl=An(Tm,!0);var nD=An(lv,!0);var rD=An(ov,!0,2);var iD=An(cv,!0,2);var R="primary",Ta=Symbol("RouteTitle"),vv=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function wi(t){return new vv(t)}function hD(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function ql(t){return new Promise((e,n)=>{t.pipe(gn()).subscribe({next:r=>e(r),error:r=>n(r)})})}function ZF(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!dn(t[n],e[n]))return!1;return!0}function dn(t,e){let n=t?yv(t):void 0,r=e?yv(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!pD(t[i],e[i]))return!1;return!0}function yv(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function pD(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function gD(t){return t.length>0?t[t.length-1]:null}function Ci(t){return Cc(t)?t:Zn(t)?de(Promise.resolve(t)):F(t)}function mD(t){return Cc(t)?ql(t):Promise.resolve(t)}var QF={exact:yD,subset:_D},vD={exact:XF,subset:eV,ignored:()=>!0};function oD(t,e,n){return QF[n.paths](t.root,e.root,n.matrixParams)&&vD[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function XF(t,e){return dn(t,e)}function yD(t,e,n){if(!Ei(t.segments,e.segments)||!Wl(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!yD(t.children[r],e.children[r],n))return!1;return!0}function eV(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>pD(t[n],e[n]))}function _D(t,e,n){return ED(t,e,e.segments,n)}function ED(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Ei(i,n)||e.hasChildren()||!Wl(i,n,r))}else if(t.segments.length===n.length){if(!Ei(t.segments,n)||!Wl(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!_D(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Ei(t.segments,i)||!Wl(t.segments,i,r)||!t.children[R]?!1:ED(t.children[R],e,o,r)}}function Wl(t,e,n){return e.every((r,i)=>vD[n](t[i].parameters,r.parameters))}var $t=class{root;queryParams;fragment;_queryParamMap;constructor(e=new G([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=wi(this.queryParams),this._queryParamMap}toString(){return rV.serialize(this)}},G=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zl(this)}},ur=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=wi(this.parameters),this._parameterMap}toString(){return wD(this)}};function tV(t,e){return Ei(t,e)&&t.every((n,r)=>dn(n.parameters,e[r].parameters))}function Ei(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function nV(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===R&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==R&&(n=n.concat(e(i,r)))}),n}var Sa=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:()=>new lr,providedIn:"root"})}return t})(),lr=class{parse(e){let n=new Ev(e);return new $t(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${pa(e.root,!0)}`,r=sV(e.queryParams),i=typeof e.fragment=="string"?`#${iV(e.fragment)}`:"";return`${n}${r}${i}`}},rV=new lr;function zl(t){return t.segments.map(e=>wD(e)).join("/")}function pa(t,e){if(!t.hasChildren())return zl(t);if(e){let n=t.children[R]?pa(t.children[R],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==R&&r.push(`${i}:${pa(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=nV(t,(r,i)=>i===R?[pa(t.children[R],!1)]:[`${i}:${pa(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[R]!=null?`${zl(t)}/${n[0]}`:`${zl(t)}/(${n.join("//")})`}}function ID(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hl(t){return ID(t).replace(/%3B/gi,";")}function iV(t){return encodeURI(t)}function _v(t){return ID(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Gl(t){return decodeURIComponent(t)}function sD(t){return Gl(t.replace(/\+/g,"%20"))}function wD(t){return`${_v(t.path)}${oV(t.parameters)}`}function oV(t){return Object.entries(t).map(([e,n])=>`;${_v(e)}=${_v(n)}`).join("")}function sV(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Hl(n)}=${Hl(i)}`).join("&"):`${Hl(n)}=${Hl(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var aV=/^[^\/()?;#]+/;function hv(t){let e=t.match(aV);return e?e[0]:""}var cV=/^[^\/()?;=#]+/;function uV(t){let e=t.match(cV);return e?e[0]:""}var lV=/^[^=?&#]+/;function dV(t){let e=t.match(lV);return e?e[0]:""}var fV=/^[^&#]+/;function hV(t){let e=t.match(fV);return e?e[0]:""}var Ev=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new G([],{}):new G([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[R]=new G(e,n)),r}parseSegment(){let e=hv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new E(4009,!1);return this.capture(e),new ur(Gl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=uV(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=hv(this.remaining);i&&(r=i,this.capture(r))}e[Gl(n)]=Gl(r)}parseQueryParam(e){let n=dV(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=hV(this.remaining);s&&(r=s,this.capture(r))}let i=sD(n),o=sD(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=hv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new E(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=R);let s=this.parseChildren();n[o??R]=Object.keys(s).length===1&&s[R]?s[R]:new G([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new E(4011,!1)}};function bD(t){return t.segments.length>0?new G([],{[R]:t}):t}function CD(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=CD(i);if(r===R&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new G(t.segments,e);return pV(n)}function pV(t){if(t.numberOfChildren===1&&t.children[R]){let e=t.children[R];return new G(t.segments.concat(e.segments),e.children)}return t}function Mo(t){return t instanceof $t}function DD(t,e,n=null,r=null,i=new lr){let o=TD(t);return SD(o,e,n,r,i)}function TD(t){let e;function n(o){let s={};for(let c of o.children){let u=n(c);s[c.outlet]=u}let a=new G(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=bD(r);return e??i}function SD(t,e,n,r,i){let o=t;for(;o.parent;)o=o.parent;if(e.length===0)return pv(o,o,o,n,r,i);let s=gV(e);if(s.toRoot())return pv(o,o,new G([],{}),n,r,i);let a=mV(s,o,t),c=a.processChildren?ma(a.segmentGroup,a.index,s.commands):RD(a.segmentGroup,a.index,s.commands);return pv(o,a.segmentGroup,c,n,r,i)}function Kl(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function _a(t){return typeof t=="object"&&t!=null&&t.outlets}function aD(t,e,n){t||="\u0275";let r=new $t;return r.queryParams={[t]:e},n.parse(n.serialize(r)).queryParams[t]}function pv(t,e,n,r,i,o){let s={};for(let[u,l]of Object.entries(r??{}))s[u]=Array.isArray(l)?l.map(d=>aD(u,d,o)):aD(u,l,o);let a;t===e?a=n:a=AD(t,e,n);let c=bD(CD(a));return new $t(c,s,i)}function AD(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=AD(o,e,n)}),new G(t.segments,r)}var Yl=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Kl(r[0]))throw new E(4003,!1);let i=r.find(_a);if(i&&i!==gD(r))throw new E(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function gV(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Yl(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Yl(n,e,r)}var Ao=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function mV(t,e,n){if(t.isAbsolute)return new Ao(e,!0,0);if(!n)return new Ao(e,!1,NaN);if(n.parent===null)return new Ao(n,!0,0);let r=Kl(t.commands[0])?0:1,i=n.segments.length-1+r;return vV(n,i,t.numberOfDoubleDots)}function vV(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new E(4005,!1);i=r.segments.length}return new Ao(r,!1,i-o)}function yV(t){return _a(t[0])?t[0].outlets:{[R]:t}}function RD(t,e,n){if(t??=new G([],{}),t.segments.length===0&&t.hasChildren())return ma(t,e,n);let r=_V(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new G(t.segments.slice(0,r.pathIndex),{});return o.children[R]=new G(t.segments.slice(r.pathIndex),t.children),ma(o,0,i)}else return r.match&&i.length===0?new G(t.segments,{}):r.match&&!t.hasChildren()?Iv(t,e,n):r.match?ma(t,0,i):Iv(t,e,n)}function ma(t,e,n){if(n.length===0)return new G(t.segments,{});{let r=yV(n),i={};if(Object.keys(r).some(o=>o!==R)&&t.children[R]&&t.numberOfChildren===1&&t.children[R].segments.length===0){let o=ma(t.children[R],e,n);return new G(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=RD(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new G(t.segments,i)}}function _V(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(_a(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!uD(c,u,s))return o;r+=2}else{if(!uD(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Iv(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(_a(o)){let c=EV(o.outlets);return new G(r,c)}if(i===0&&Kl(n[0])){let c=t.segments[e];r.push(new ur(c.path,cD(n[0]))),i++;continue}let s=_a(o)?o.outlets[R]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Kl(a)?(r.push(new ur(s,cD(a))),i+=2):(r.push(new ur(s,{})),i++)}return new G(r,{})}function EV(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Iv(new G([],{}),0,r))}),e}function cD(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function uD(t,e,n){return t==n.path&&dn(e,n.parameters)}var va="imperative",Pe=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(Pe||{}),mt=class{id;url;constructor(e,n){this.id=e,this.url=n}},bi=class extends mt{type=Pe.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},On=class extends mt{urlAfterRedirects;type=Pe.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Qe=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(Qe||{}),Ea=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(Ea||{}),fn=class extends mt{reason;code;type=Pe.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},xn=class extends mt{reason;code;type=Pe.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},No=class extends mt{error;target;type=Pe.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ia=class extends mt{urlAfterRedirects;state;type=Pe.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jl=class extends mt{urlAfterRedirects;state;type=Pe.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zl=class extends mt{urlAfterRedirects;state;shouldActivate;type=Pe.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Ql=class extends mt{urlAfterRedirects;state;type=Pe.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xl=class extends mt{urlAfterRedirects;state;type=Pe.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ed=class{route;type=Pe.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},td=class{route;type=Pe.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},nd=class{snapshot;type=Pe.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rd=class{snapshot;type=Pe.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},id=class{snapshot;type=Pe.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},od=class{snapshot;type=Pe.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var wa=class{},ko=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function IV(t){return!(t instanceof wa)&&!(t instanceof ko)}function wV(t,e){return t.providers&&!t._injector&&(t._injector=ks(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Ht(t){return t.outlet||R}function bV(t,e){let n=t.filter(r=>Ht(r)===e);return n.push(...t.filter(r=>Ht(r)!==e)),n}function xo(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var sd=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return xo(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Lo(this.rootInjector)}},Lo=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new sd(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(D(fe))};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ad=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=wv(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=wv(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=bv(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return bv(e,this._root).map(n=>n.value)}};function wv(t,e){if(t===e.value)return e;for(let n of e.children){let r=wv(t,n);if(r)return r}return null}function bv(t,e){if(t===e.value)return[e];for(let n of e.children){let r=bv(t,n);if(r.length)return r.unshift(e),r}return[]}var gt=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function So(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var ba=class extends ad{snapshot;constructor(e,n){super(e),this.snapshot=n,Rv(this,e)}toString(){return this.snapshot.toString()}};function MD(t){let e=CV(t),n=new xe([new ur("",{})]),r=new xe({}),i=new xe({}),o=new xe({}),s=new xe(""),a=new dr(n,r,o,s,i,R,t,e.root);return a.snapshot=e.root,new ba(new gt(a,[]),e)}function CV(t){let e={},n={},r={},o=new Ii([],e,r,"",n,R,t,null,{});return new Ca("",new gt(o,[]))}var dr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(B(u=>u[Ta]))??F(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(B(e=>wi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(B(e=>wi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function cd(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:y(y({},e.params),t.params),data:y(y({},e.data),t.data),resolve:y(y(y(y({},t.data),e.data),i?.data),t._resolvedData)}:r={params:y({},t.params),data:y({},t.data),resolve:y(y({},t.data),t._resolvedData??{})},i&&kD(i)&&(r.resolve[Ta]=i.title),r}var Ii=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ta]}constructor(e,n,r,i,o,s,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=wi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=wi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ca=class extends ad{url;constructor(e,n){super(n),this.url=e,Rv(this,n)}toString(){return ND(this._root)}};function Rv(t,e){e.value._routerState=t,e.children.forEach(n=>Rv(t,n))}function ND(t){let e=t.children.length>0?` { ${t.children.map(ND).join(", ")} } `:"";return`${t.value}${e}`}function gv(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,dn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),dn(e.params,n.params)||t.paramsSubject.next(n.params),ZF(e.url,n.url)||t.urlSubject.next(n.url),dn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Cv(t,e){let n=dn(t.params,e.params)&&tV(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Cv(t.parent,e.parent))}function kD(t){return typeof t.title=="string"||t.title===null}var PD=new I(""),Aa=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=R;activateEvents=new we;deactivateEvents=new we;attachEvents=new we;detachEvents=new we;routerOutletData=tw();parentContexts=m(Lo);location=m(Jr);changeDetector=m(ri);inputBinder=m(fd,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new E(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new E(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new E(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new E(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Dv(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ne({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Wr]})}return t})(),Dv=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===dr?this.route:e===Lo?this.childContexts:e===PD?this.outletData:this.parent.get(e,n)}},fd=new I("");var Mv=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=bn({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&ft(0,"router-outlet")},dependencies:[Aa],encapsulation:2})}return t})();function Nv(t){let e=t.children&&t.children.map(Nv),n=e?P(y({},t),{children:e}):y({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==R&&(n.component=Mv),n}function DV(t,e,n){let r=Da(t,e._root,n?n._root:void 0);return new ba(r,e)}function Da(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=TV(t,e,n);return new gt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Da(t,a)),s}}let r=SV(e.value),i=e.children.map(o=>Da(t,o));return new gt(r,i)}}function TV(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Da(t,r,i);return Da(t,r)})}function SV(t){return new dr(new xe(t.url),new xe(t.params),new xe(t.queryParams),new xe(t.fragment),new xe(t.data),t.outlet,t.component,t)}var Po=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},OD="ngNavigationCancelingError";function ud(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Mo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=xD(!1,Qe.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function xD(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[OD]=!0,n.cancellationCode=e,n}function AV(t){return LD(t)&&Mo(t.url)}function LD(t){return!!t&&t[OD]}var RV=(t,e,n,r)=>B(i=>(new Tv(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Tv=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),gv(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=So(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=So(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=So(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=So(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new od(o.value.snapshot))}),e.children.length&&this.forwardEvent(new rd(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(gv(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),gv(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},ld=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ro=class{component;route;constructor(e,n){this.component=e,this.route=n}};function MV(t,e,n){let r=t._root,i=e?e._root:null;return ga(r,i,n,[r.value])}function NV(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Fo(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Jf(t)?t:e.get(t):r}function ga(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=So(e);return t.children.forEach(s=>{kV(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ya(a,n.getContext(s),i)),i}function kV(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=PV(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new ld(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ga(t,e,a?a.children:null,r,i):ga(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ro(a.outlet.component,s))}else s&&ya(e,a,i),i.canActivateChecks.push(new ld(r)),o.component?ga(t,null,a?a.children:null,r,i):ga(t,null,n,r,i);return i}function PV(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Ei(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ei(t.url,e.url)||!dn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Cv(t,e)||!dn(t.queryParams,e.queryParams);case"paramsChange":default:return!Cv(t,e)}}function ya(t,e,n){let r=So(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ya(s,e.children.getContext(o),n):ya(s,null,n):ya(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Ro(e.outlet.component,i)):n.canDeactivateChecks.push(new Ro(null,i)):n.canDeactivateChecks.push(new Ro(null,i))}function Ra(t){return typeof t=="function"}function OV(t){return typeof t=="boolean"}function xV(t){return t&&Ra(t.canLoad)}function LV(t){return t&&Ra(t.canActivate)}function FV(t){return t&&Ra(t.canActivateChild)}function VV(t){return t&&Ra(t.canDeactivate)}function UV(t){return t&&Ra(t.canMatch)}function FD(t){return t instanceof Er||t?.name==="EmptyError"}var $l=Symbol("INITIAL_VALUE");function Oo(){return De(t=>Sf(t.map(e=>e.pipe(Be(1),Mf($l)))).pipe(B(e=>{for(let n of e)if(n!==!0){if(n===$l)return $l;if(n===!1||jV(n))return n}return!0}),Et(e=>e!==$l),Be(1)))}function jV(t){return Mo(t)||t instanceof Po}function VD(t){return t.aborted?F(void 0).pipe(Be(1)):new O(e=>{let n=()=>{e.next(),e.complete()};return t.addEventListener("abort",n),()=>t.removeEventListener("abort",n)})}function UD(t){return rs(VD(t))}function BV(t,e){return qe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?F(P(y({},n),{guardsResult:!0})):HV(s,r,i,t).pipe(qe(a=>a&&OV(a)?$V(r,o,t,e):F(a)),B(a=>P(y({},n),{guardsResult:a})))})}function HV(t,e,n,r){return de(t).pipe(qe(i=>KV(i.component,i.route,n,e,r)),gn(i=>i!==!0,!0))}function $V(t,e,n,r){return de(e).pipe(Bi(i=>ji(zV(i.route.parent,r),WV(i.route,r),qV(t,i.path,n),GV(t,i.route,n))),gn(i=>i!==!0,!0))}function WV(t,e){return t!==null&&e&&e(new id(t)),F(!0)}function zV(t,e){return t!==null&&e&&e(new nd(t)),F(!0)}function GV(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return F(!0);let i=r.map(o=>es(()=>{let s=xo(e)??n,a=Fo(o,s),c=LV(a)?a.canActivate(e,t):ge(s,()=>a(e,t));return Ci(c).pipe(gn())}));return F(i).pipe(Oo())}function qV(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>NV(s)).filter(s=>s!==null).map(s=>es(()=>{let a=s.guards.map(c=>{let u=xo(s.node)??n,l=Fo(c,u),d=FV(l)?l.canActivateChild(r,t):ge(u,()=>l(r,t));return Ci(d).pipe(gn())});return F(a).pipe(Oo())}));return F(o).pipe(Oo())}function KV(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return F(!0);let s=o.map(a=>{let c=xo(e)??i,u=Fo(a,c),l=VV(u)?u.canDeactivate(t,e,n,r):ge(c,()=>u(t,e,n,r));return Ci(l).pipe(gn())});return F(s).pipe(Oo())}function YV(t,e,n,r,i){let o=e.canLoad;if(o===void 0||o.length===0)return F(!0);let s=o.map(a=>{let c=Fo(a,t),u=xV(c)?c.canLoad(e,n):ge(t,()=>c(e,n)),l=Ci(u);return i?l.pipe(UD(i)):l});return F(s).pipe(Oo(),jD(r))}function jD(t){return _f(Ke(e=>{if(typeof e!="boolean")throw ud(t,e)}),B(e=>e===!0))}function JV(t,e,n,r,i){let o=e.canMatch;if(!o||o.length===0)return F(!0);let s=o.map(a=>{let c=Fo(a,t),u=UV(c)?c.canMatch(e,n):ge(t,()=>c(e,n)),l=Ci(u);return i?l.pipe(UD(i)):l});return F(s).pipe(Oo(),jD(r))}var _i=class BD extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,BD.prototype)}},Sv=class HD extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,HD.prototype)}};function ZV(t){throw new E(4e3,!1)}function QV(t){throw xD(!1,Qe.GuardRejected)}var XV=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}async lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[R])throw ZV(`${e.redirectTo}`);i=i.children[R]}}async applyRedirectCommands(e,n,r,i,o){let s=await eU(n,i,o);if(s instanceof $t)throw new Sv(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Sv(a);return a}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new $t(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new G(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new E(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function eU(t,e,n){if(typeof t=="string")return Promise.resolve(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:u,data:l,title:d}=e;return ql(Ci(ge(n,()=>r({params:u,data:l,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:d}))))}var Av={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function tU(t,e,n,r,i,o){let s=$D(t,e,n);return s.matched?(r=wV(e,r),JV(r,e,n,i,o).pipe(B(a=>a===!0?s:y({},Av)))):F(s)}function $D(t,e,n){if(e.path==="**")return nU(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?y({},Av):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||hD)(n,t,e);if(!i)return y({},Av);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?y(y({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function nU(t){return{matched:!0,parameters:t.length>0?gD(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function lD(t,e,n,r){return n.length>0&&oU(t,n,r)?{segmentGroup:new G(e,iU(r,new G(n,t.children))),slicedSegments:[]}:n.length===0&&sU(t,n,r)?{segmentGroup:new G(t.segments,rU(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new G(t.segments,t.children),slicedSegments:n}}function rU(t,e,n,r){let i={};for(let o of n)if(hd(t,e,o)&&!r[Ht(o)]){let s=new G([],{});i[Ht(o)]=s}return y(y({},r),i)}function iU(t,e){let n={};n[R]=e;for(let r of t)if(r.path===""&&Ht(r)!==R){let i=new G([],{});n[Ht(r)]=i}return n}function oU(t,e,n){return n.some(r=>hd(t,e,r)&&Ht(r)!==R)}function sU(t,e,n){return n.some(r=>hd(t,e,r))}function hd(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function aU(t,e,n){return e.length===0&&!t.children[n]}var cU=class{};async function uU(t,e,n,r,i,o,s="emptyOnly",a){return new dU(t,e,n,r,i,s,o,a).recognize()}var lU=31,dU=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a,c){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new XV(this.urlSerializer,this.urlTree)}noMatchError(e){return new E(4002,`'${e.segmentGroup}'`)}async recognize(){let e=lD(this.urlTree.root,[],[],this.config).segmentGroup,{children:n,rootSnapshot:r}=await this.match(e),i=new gt(r,n),o=new Ca("",i),s=DD(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(e){let n=new Ii([],Object.freeze({}),Object.freeze(y({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),R,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,R,n),rootSnapshot:n}}catch(r){if(r instanceof Sv)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof _i?this.noMatchError(r):r}}async processSegmentGroup(e,n,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,n,r,o);let s=await this.processSegment(e,n,r,r.segments,i,!0,o);return s instanceof gt?[s]:[]}async processChildren(e,n,r,i){let o=[];for(let c of Object.keys(r.children))c==="primary"?o.unshift(c):o.push(c);let s=[];for(let c of o){let u=r.children[c],l=bV(n,c),d=await this.processSegmentGroup(e,l,u,c,i);s.push(...d)}let a=WD(s);return fU(a),a}async processSegment(e,n,r,i,o,s,a){for(let c of n)try{return await this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,o,s,a)}catch(u){if(u instanceof _i||FD(u))continue;throw u}if(aU(r,i,o))return new cU;throw new _i(r)}async processSegmentAgainstRoute(e,n,r,i,o,s,a,c){if(Ht(r)!==s&&(s===R||!hd(i,o,r)))throw new _i(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,o,s,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,c);throw new _i(i)}async expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:l,positionalParamSegments:d,remainingSegments:f}=$D(n,i,o);if(!c)throw new _i(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>lU&&(this.allowRedirects=!1));let h=new Ii(o,u,Object.freeze(y({},this.urlTree.queryParams)),this.urlTree.fragment,dD(i),Ht(i),i.component??i._loadedComponent??null,i,fD(i)),p=cd(h,a,this.paramsInheritanceStrategy);if(h.params=Object.freeze(p.params),h.data=Object.freeze(p.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let v=await this.applyRedirects.applyRedirectCommands(l,i.redirectTo,d,h,e),g=await this.applyRedirects.lineralizeSegments(i,v);return this.processSegment(e,r,n,g.concat(f),s,!1,a)}async matchSegmentAgainstRoute(e,n,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await ql(tU(n,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(n.children={}),!a?.matched)throw new _i(n);e=r._injector??e;let{routes:c}=await this.getChildConfig(e,r,i),u=r._loadedInjector??e,{parameters:l,consumedSegments:d,remainingSegments:f}=a,h=new Ii(d,l,Object.freeze(y({},this.urlTree.queryParams)),this.urlTree.fragment,dD(r),Ht(r),r.component??r._loadedComponent??null,r,fD(r)),p=cd(h,s,this.paramsInheritanceStrategy);h.params=Object.freeze(p.params),h.data=Object.freeze(p.data);let{segmentGroup:v,slicedSegments:g}=lD(n,d,f,c);if(g.length===0&&v.hasChildren()){let q=await this.processChildren(u,c,v,h);return new gt(h,q)}if(c.length===0&&g.length===0)return new gt(h,[]);let _=Ht(r)===o,U=await this.processSegment(u,c,v,g,_?R:o,!0,h);return new gt(h,U instanceof gt?[U]:[])}async getChildConfig(e,n,r){if(n.children)return{routes:n.children,injector:e};if(n.loadChildren){if(n._loadedRoutes!==void 0)return{routes:n._loadedRoutes,injector:n._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await ql(YV(e,n,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(e,n);return n._loadedRoutes=o.routes,n._loadedInjector=o.injector,o}throw QV(n)}return{routes:[],injector:e}}};function fU(t){t.sort((e,n)=>e.value.outlet===R?-1:n.value.outlet===R?1:e.value.outlet.localeCompare(n.value.outlet))}function hU(t){let e=t.value.routeConfig;return e&&e.path===""}function WD(t){let e=[],n=new Set;for(let r of t){if(!hU(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=WD(r.children);e.push(new gt(r.value,i))}return e.filter(r=>!n.has(r))}function dD(t){return t.data||{}}function fD(t){return t.resolve||{}}var pU=new I("",{factory:()=>uU});function gU(t,e,n,r,i,o,s){let a=t.get(pU);return qe(c=>F(c).pipe(De(u=>a(t,e,n,r,u.extractedUrl,i,o,s)),B(({state:u,tree:l})=>P(y({},c),{targetSnapshot:u,urlAfterRedirects:l}))))}function mU(t,e){return qe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return F(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of zD(c))s.add(u);let a=0;return de(s).pipe(Bi(c=>o.has(c)?vU(c,r,t,e):(c.data=cd(c,c.parent,t).resolve,F(void 0))),Ke(()=>a++),Ac(1),qe(c=>a===s.size?F(n):tt))})}function zD(t){let e=t.children.map(n=>zD(n)).flat();return[t,...e]}function vU(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!kD(i)&&(o[Ta]=i.title),es(()=>(t.data=cd(t,t.parent,n).resolve,yU(o,t,e,r).pipe(B(s=>(t._resolvedData=s,t.data=y(y({},t.data),s),null)))))}function yU(t,e,n,r){let i=yv(t);if(i.length===0)return F({});let o={};return de(i).pipe(qe(s=>_U(t[s],e,n,r).pipe(gn(),Ke(a=>{if(a instanceof Po)throw ud(new lr,a);o[s]=a}))),Ac(1),B(()=>o),ts(s=>FD(s)?tt:Tf(s)))}function _U(t,e,n,r){let i=xo(e)??r,o=Fo(t,i),s=o.resolve?o.resolve(e,n):ge(i,()=>o(e,n));return Ci(s)}function mv(t){return De(e=>{let n=t(e);return n?de(n).pipe(B(()=>e)):F(e)})}var kv=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===R);return r}getResolvedTitleForRoute(n){return n.data[Ta]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:()=>m(GD),providedIn:"root"})}return t})(),GD=(()=>{class t extends kv{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(D(Nw))};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ma=new I("",{factory:()=>({})}),Na=new I(""),qD=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=m(Jp);async loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await mD(ge(n,()=>r.loadComponent())),s=await JD(YD(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await KD(r,this.compiler,n,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();async function KD(t,e,n,r){let i=await mD(ge(n,()=>t.loadChildren())),o=await JD(YD(i)),s;o instanceof Au||Array.isArray(o)?s=o:s=await e.compileModuleAsync(o),r&&r(t);let a,c,u=!1;return Array.isArray(s)?(c=s,u=!0):(a=s.create(n).injector,c=a.get(Na,[],{optional:!0,self:!0}).flat()),{routes:c.map(Nv),injector:a}}function EU(t){return t&&typeof t=="object"&&"default"in t}function YD(t){return EU(t)?t.default:t}async function JD(t){return t}var pd=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:()=>m(IU),providedIn:"root"})}return t})(),IU=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ZD=new I("");var wU=()=>{},QD=new I(""),XD=(()=>{class t{currentNavigation=rt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=rt(null);events=new Ae;transitionAbortWithErrorSubject=new Ae;configLoader=m(qD);environmentInjector=m(fe);destroyRef=m(Zt);urlSerializer=m(Sa);rootContexts=m(Lo);location=m(lo);inputBindingEnabled=m(fd,{optional:!0})!==null;titleStrategy=m(kv);options=m(Ma,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=m(pd);createViewTransition=m(ZD,{optional:!0});navigationErrorHandler=m(QD,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>F(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new ed(i)),r=i=>this.events.next(new td(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;Te(()=>{this.transitions?.next(P(y({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(n){return this.transitions=new xe(null),this.transitions.pipe(Et(r=>r!==null),De(r=>{let i=!1,o=new AbortController;return F(r).pipe(De(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Qe.SupersededByNewNavigation),tt;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:a?P(y({},a),{previousNavigation:null}):null,abort:()=>o.abort()});let c=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=s.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!c&&u!=="reload")return this.events.next(new xn(s.id,this.urlSerializer.serialize(s.rawUrl),"",Ea.IgnoredSameUrlNavigation)),s.resolve(!1),tt;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return F(s).pipe(De(l=>(this.events.next(new bi(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?tt:Promise.resolve(l))),gU(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),Ke(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation.update(f=>(f.finalUrl=l.urlAfterRedirects,f));let d=new Ia(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:l,extractedUrl:d,source:f,restoredState:h,extras:p}=s,v=new bi(l,this.urlSerializer.serialize(d),f,h);this.events.next(v);let g=MD(this.rootComponentType).snapshot;return this.currentTransition=r=P(y({},s),{targetSnapshot:g,urlAfterRedirects:d,extras:P(y({},p),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(_=>(_.finalUrl=d,_)),F(r)}else return this.events.next(new xn(s.id,this.urlSerializer.serialize(s.extractedUrl),"",Ea.IgnoredByUrlHandlingStrategy)),s.resolve(!1),tt}),Ke(s=>{let a=new Jl(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),B(s=>(this.currentTransition=r=P(y({},s),{guards:MV(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),BV(this.environmentInjector,s=>this.events.next(s)),Ke(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw ud(this.urlSerializer,s.guardsResult);let a=new Zl(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Et(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Qe.GuardRejected),!1)),mv(s=>{if(s.guards.canActivateChecks.length!==0)return F(s).pipe(Ke(a=>{let c=new Ql(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),De(a=>{let c=!1;return F(a).pipe(mU(this.paramsInheritanceStrategy,this.environmentInjector),Ke({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",Qe.NoDataFromResolver)}}))}),Ke(a=>{let c=new Xl(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),mv(s=>{let a=u=>{let l=[];if(u.routeConfig?._loadedComponent)u.component=u.routeConfig?._loadedComponent;else if(u.routeConfig?.loadComponent){let d=xo(u)??this.environmentInjector;l.push(this.configLoader.loadComponent(d,u.routeConfig).then(f=>{u.component=f}))}for(let d of u.children)l.push(...a(d));return l},c=a(s.targetSnapshot.root);return c.length===0?F(s):de(Promise.all(c).then(()=>s))}),mv(()=>this.afterPreactivation()),De(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return c?de(c).pipe(B(()=>r)):F(r)}),B(s=>{let a=DV(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=P(y({},s),{targetRouterState:a}),this.currentNavigation.update(c=>(c.targetRouterState=a,c)),r}),Ke(()=>{this.events.next(new wa)}),RV(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Be(1),rs(VD(o.signal).pipe(Et(()=>!i&&!r.targetRouterState),Ke(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",Qe.Aborted)}))),Ke({next:s=>{i=!0,this.currentNavigation.update(a=>(a.abort=wU,a)),this.lastSuccessfulNavigation.set(Te(this.currentNavigation)),this.events.next(new On(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),rs(this.transitionAbortWithErrorSubject.pipe(Ke(s=>{throw s}))),ns(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",Qe.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),ts(s=>{if(this.destroyed)return r.resolve(!1),tt;if(i=!0,LD(s))this.events.next(new fn(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),AV(s)?this.events.next(new ko(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new No(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let c=ge(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof Po){let{message:u,cancellationCode:l}=ud(this.urlSerializer,c);this.events.next(new fn(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new ko(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return tt}))}))}cancelNavigationTransition(n,r,i){let o=new fn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Te(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function bU(t){return t!==va}var eT=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:()=>m(CU),providedIn:"root"})}return t})(),dd=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},CU=(()=>{class t extends dd{static \u0275fac=(()=>{let n;return function(i){return(n||(n=zr(t)))(i||t)}})();static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Pv=(()=>{class t{urlSerializer=m(Sa);options=m(Ma,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=m(lo);urlHandlingStrategy=m(pd);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new $t;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof $t?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=MD(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:()=>m(tT),providedIn:"root"})}return t})(),tT=(()=>{class t extends Pv{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof bi?this.updateStateMemento():n instanceof xn?this.commitTransition(r):n instanceof Ia?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof wa?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof fn&&n.code!==Qe.SupersededByNewNavigation&&n.code!==Qe.Redirect?this.restoreHistory(r):n instanceof No?this.restoreHistory(r,!0):n instanceof On&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,c=y(y({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",c)}else{let a=y(y({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=zr(t)))(i||t)}})();static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ov(t,e){t.events.pipe(Et(n=>n instanceof On||n instanceof fn||n instanceof No||n instanceof xn),B(n=>n instanceof On||n instanceof xn?0:(n instanceof fn?n.code===Qe.Redirect||n.code===Qe.SupersededByNewNavigation:!1)?2:1),Et(n=>n!==2),Be(1)).subscribe(()=>{e()})}var DU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},TU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},fr=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=m(Vp);stateManager=m(Pv);options=m(Ma,{optional:!0})||{};pendingTasks=m(wn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=m(XD);urlSerializer=m(Sa);location=m(lo);urlHandlingStrategy=m(pd);injector=m(fe);_events=new Ae;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=m(eT);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=m(Na,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!m(fd,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ce;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Te(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof fn&&r.code!==Qe.Redirect&&r.code!==Qe.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof On)this.navigated=!0;else if(r instanceof ko){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=y({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||bU(i.source)},s);this.scheduleNavigation(a,va,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}IV(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),va,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=y({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(Dt)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Te(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Nv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription?.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0,this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s,l=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":l=y(y({},this.currentUrlTree.queryParams),o);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=o||null}l!==null&&(l=this.removeEmptyProps(l));let d;try{let f=i?i.snapshot:this.routerState.snapshot.root;d=TD(f)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),d=this.currentUrlTree.root}return SD(d,n,l,u??null,this.urlSerializer)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Mo(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,va,null,r)}navigate(n,r={skipLocationChange:!1}){return SU(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(Ar(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=y({},DU):r===!1?i=y({},TU):i=r,Mo(n))return oD(this.currentUrlTree,n,i);let o=this.parseUrl(n);return oD(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((d,f)=>{a=d,c=f});let l=this.pendingTasks.add();return Ov(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(l))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function SU(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new E(4008,!1)}var RU=new I("");function xv(t,...e){return ct([{provide:Na,multi:!0,useValue:t},[],{provide:dr,useFactory:MU},{provide:Ru,multi:!0,useFactory:NU},e.map(n=>n.\u0275providers)])}function MU(){return m(fr).routerState.root}function NU(){let t=m(Fe);return e=>{let n=t.get(Qr);if(e!==n.components[0])return;let r=t.get(fr),i=t.get(kU);t.get(PU)===1&&r.initialNavigation(),t.get(OU,null,{optional:!0})?.setUpPreloading(),t.get(RU,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var kU=new I("",{factory:()=>new Ae}),PU=new I("",{factory:()=>1});var OU=new I("");var nT=(t,e)=>{let n=m(pt),r=m(fr);return Bl(n).pipe(Be(1),B(i=>i?!0:r.parseUrl("/login")))};var dT=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)($(io),$(Gr))};static \u0275dir=Ne({type:t})}return t})(),LU=(()=>{class t extends dT{static \u0275fac=(()=>{let n;return function(i){return(n||(n=zr(t)))(i||t)}})();static \u0275dir=Ne({type:t,features:[nn]})}return t})(),fT=new I("");var FU={provide:fT,useExisting:_n(()=>Bo),multi:!0};function VU(){let t=Tt()?Tt().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var UU=new I(""),Bo=(()=>{class t extends dT{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!VU())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)($(io),$(Gr),$(UU,8))};static \u0275dir=Ne({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Se("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[ao([FU]),nn]})}return t})();function jU(t){return t==null||BU(t)===0}function BU(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var Vv=new I(""),hT=new I("");function HU(t){return jU(t.value)?{required:!0}:null}function rT(t){return null}function pT(t){return t!=null}function gT(t){return Zn(t)?de(t):t}function mT(t){let e={};return t.forEach(n=>{e=n!=null?y(y({},e),n):e}),Object.keys(e).length===0?null:e}function vT(t,e){return e.map(n=>n(t))}function $U(t){return!t.validate}function yT(t){return t.map(e=>$U(e)?e:n=>e.validate(n))}function WU(t){if(!t)return null;let e=t.filter(pT);return e.length==0?null:function(n){return mT(vT(n,e))}}function Uv(t){return t!=null?WU(yT(t)):null}function zU(t){if(!t)return null;let e=t.filter(pT);return e.length==0?null:function(n){let r=vT(n,e).map(gT);return Af(r).pipe(B(mT))}}function jv(t){return t!=null?zU(yT(t)):null}function iT(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function GU(t){return t._rawValidators}function qU(t){return t._rawAsyncValidators}function Lv(t){return t?Array.isArray(t)?t:[t]:[]}function md(t,e){return Array.isArray(t)?t.includes(e):t===e}function oT(t,e){let n=Lv(e);return Lv(t).forEach(i=>{md(n,i)||n.push(i)}),n}function sT(t,e){return Lv(e).filter(n=>!md(t,n))}var vd=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Uv(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=jv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},jo=class extends vd{name;get formDirective(){return null}get path(){return null}},Fa=class extends vd{_parent=null;name=null;valueAccessor=null},yd=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var bd=(()=>{class t extends yd{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)($(Fa,2))};static \u0275dir=Ne({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Os("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[nn]})}return t})(),_T=(()=>{class t extends yd{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)($(jo,10))};static \u0275dir=Ne({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Os("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[nn]})}return t})();var ka="VALID",gd="INVALID",Vo="PENDING",Pa="DISABLED",hr=class{},_d=class extends hr{value;source;constructor(e,n){super(),this.value=e,this.source=n}},xa=class extends hr{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},La=class extends hr{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},Uo=class extends hr{status;source;constructor(e,n){super(),this.status=e,this.source=n}},Fv=class extends hr{source;constructor(e){super(),this.source=e}},Ed=class extends hr{source;constructor(e){super(),this.source=e}};function ET(t){return(Cd(t)?t.validators:t)||null}function KU(t){return Array.isArray(t)?Uv(t):t||null}function IT(t,e){return(Cd(e)?e.asyncValidators:t)||null}function YU(t){return Array.isArray(t)?jv(t):t||null}function Cd(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function JU(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new E(1e3,"");if(!r[n])throw new E(1001,"")}function ZU(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new E(1002,"")})}var Id=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Te(this.statusReactive)}set status(e){Te(()=>this.statusReactive.set(e))}_status=co(()=>this.statusReactive());statusReactive=rt(void 0);get valid(){return this.status===ka}get invalid(){return this.status===gd}get pending(){return this.status==Vo}get disabled(){return this.status===Pa}get enabled(){return this.status!==Pa}errors;get pristine(){return Te(this.pristineReactive)}set pristine(e){Te(()=>this.pristineReactive.set(e))}_pristine=co(()=>this.pristineReactive());pristineReactive=rt(!0);get dirty(){return!this.pristine}get touched(){return Te(this.touchedReactive)}set touched(e){Te(()=>this.touchedReactive.set(e))}_touched=co(()=>this.touchedReactive());touchedReactive=rt(!1);get untouched(){return!this.touched}_events=new Ae;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(oT(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(oT(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(sT(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(sT(e,this._rawAsyncValidators))}hasValidator(e){return md(this._rawValidators,e)}hasAsyncValidator(e){return md(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(P(y({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new La(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new La(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(P(y({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new xa(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new xa(!0,r))}markAsPending(e={}){this.status=Vo;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Uo(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(P(y({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Pa,this.errors=null,this._forEachChild(i=>{i.disable(P(y({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new _d(this.value,r)),this._events.next(new Uo(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(P(y({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=ka,this._forEachChild(r=>{r.enable(P(y({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(P(y({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ka||this.status===Vo)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new _d(this.value,n)),this._events.next(new Uo(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(P(y({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Pa:ka}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Vo,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=gT(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Uo(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new we,this.statusChanges=new we}_calculateStatus(){return this._allControlsDisabled()?Pa:this.errors?gd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Vo)?Vo:this._anyControlsHaveStatus(gd)?gd:ka}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new xa(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new La(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Cd(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=KU(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=YU(this._rawAsyncValidators)}},wd=class extends Id{constructor(e,n,r){super(ET(n),IT(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){ZU(this,!0,e),Object.keys(e).forEach(r=>{JU(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,P(y({},n),{onlySelf:!0}))}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new Ed(this))}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Bv=new I("",{factory:()=>Hv}),Hv="always";function QU(t,e){return[...e.path,t]}function wT(t,e,n=Hv){bT(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),ej(t,e),nj(t,e),tj(t,e),XU(t,e)}function aT(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function XU(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function bT(t,e){let n=GU(t);e.validator!==null?t.setValidators(iT(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=qU(t);e.asyncValidator!==null?t.setAsyncValidators(iT(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();aT(e._rawValidators,i),aT(e._rawAsyncValidators,i)}function ej(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&CT(t,e)})}function tj(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&CT(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function CT(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function nj(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function rj(t,e){t==null,bT(t,e)}function ij(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function oj(t){return Object.getPrototypeOf(t.constructor)===LU}function sj(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function aj(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===Bo?n=o:oj(o)?r=o:i=o}),i||r||n||null}var cj={provide:jo,useExisting:_n(()=>$v)},Oa=Promise.resolve(),$v=(()=>{class t extends jo{callSetDisabledState;get submitted(){return Te(this.submittedReactive)}_submitted=co(()=>this.submittedReactive());submittedReactive=rt(!1);_directives=new Set;form;ngSubmit=new we;options;constructor(n,r,i){super(),this.callSetDisabledState=i,this.form=new wd({},Uv(n),jv(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Oa.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),wT(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Oa.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Oa.then(()=>{let r=this._findContainer(n.path),i=new wd({});rj(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Oa.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Oa.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),sj(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new Fv(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||t)($(Vv,10),$(hT,10),$(Bv,8))};static \u0275dir=Ne({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup","",3,"formArray",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Se("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[ao([cj]),nn]})}return t})();function cT(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function uT(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var uj=class extends Id{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(ET(n),IT(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Cd(n)&&(n.nonNullable||n.initialValueIsDefault)&&(uT(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),n.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new Ed(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){cT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){cT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){uT(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var lj={provide:Fa,useExisting:_n(()=>Va)},lT=Promise.resolve(),Va=(()=>{class t extends Fa{_changeDetectorRef;callSetDisabledState;control=new uj;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new we;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=aj(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),ij(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){wT(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){lT.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&Ou(r);lT.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?QU(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)($(jo,9),$(Vv,10),$(hT,10),$(fT,10),$(ri,8),$(Bv,8))};static \u0275dir=Ne({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[ao([lj]),nn,Wr]})}return t})();var DT=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ne({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})();var dj=(()=>{class t{_validator=rT;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):rT,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ne({type:t,features:[Wr]})}return t})();var fj={provide:Vv,useExisting:_n(()=>Wv),multi:!0};var Wv=(()=>{class t extends dj{required;inputName="required";normalizeInput=Ou;createValidator=n=>HU;enabled(n){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=zr(t)))(i||t)}})();static \u0275dir=Ne({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Mu("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[ao([fj]),nn]})}return t})();var hj=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Cn({type:t});static \u0275inj=Gt({})}return t})();var Dd=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Bv,useValue:n.callSetDisabledState??Hv}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Cn({type:t});static \u0275inj=Gt({imports:[hj]})}return t})();var Td=class t{auth=m(pt);router=m(fr);user$=Bl(this.auth);async login(e,n){try{await rD(this.auth,e,n),this.router.navigate(["/dashboard"])}catch(r){throw r.message}}async logout(){await iD(this.auth),this.router.navigate(["/login"])}static \u0275fac=function(n){return new(n||t)};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})};function pj(t,e){if(t&1&&(A(0,"div",12)(1,"div",13)(2,"div",14)(3,"p",15),re(4),L()()()()),t&2){let n=ke();ne(4),rn(" ",n.errorMessage," ")}}var Sd=class t{authService=m(Td);email="";password="";errorMessage="";async onLogin(){try{await this.authService.login(this.email,this.password)}catch(e){this.errorMessage=e}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=bn({type:t,selectors:[["app-login"]],decls:19,vars:3,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gray-50","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-md","w-full","space-y-8","bg-white","p-10","rounded-xl","shadow-lg","border","border-gray-100"],[1,"mt-6","text-center","text-3xl","font-extrabold","text-gray-900"],[1,"mt-8","space-y-6",3,"submit"],[1,"rounded-md","shadow-sm","-space-y-px"],[1,"mb-4"],["for","email-address",1,"sr-only"],["name","email","type","email","required","","placeholder","Email address",1,"appearance-none","rounded-lg","relative","block","w-full","px-3","py-3","border","border-gray-300","placeholder-gray-500","text-gray-900","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","focus:z-10","sm:text-sm",3,"ngModelChange","ngModel"],["for","password",1,"sr-only"],["name","password","type","password","required","","placeholder","Password",1,"appearance-none","rounded-lg","relative","block","w-full","px-3","py-3","border","border-gray-300","placeholder-gray-500","text-gray-900","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","focus:z-10","sm:text-sm",3,"ngModelChange","ngModel"],["type","submit",1,"group","relative","w-full","flex","justify-center","py-3","px-4","border","border-transparent","text-sm","font-medium","rounded-lg","text-white","bg-indigo-600","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","transition","duration-150","ease-in-out"],["class","bg-red-50 border-l-4 border-red-400 p-4 mt-4",4,"ngIf"],[1,"bg-red-50","border-l-4","border-red-400","p-4","mt-4"],[1,"flex"],[1,"ml-3"],[1,"text-sm","text-red-700"]],template:function(n,r){n&1&&(A(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),re(4," Twilio Messaging Login "),L()(),A(5,"form",3),Se("submit",function(){return r.onLogin()}),A(6,"div",4)(7,"div",5)(8,"label",6),re(9,"Email address"),L(),A(10,"input",7),ni("ngModelChange",function(o){return so(r.email,o)||(r.email=o),o}),L()(),A(11,"div")(12,"label",8),re(13,"Password"),L(),A(14,"input",9),ni("ngModelChange",function(o){return so(r.password,o)||(r.password=o),o}),L()()(),A(15,"div")(16,"button",10),re(17," Log in "),L()(),Zr(18,pj,5,1,"div",11),L()()()),n&2&&(ne(10),ti("ngModel",r.email),ne(4),ti("ngModel",r.password),ne(4),$e("ngIf",r.errorMessage))},dependencies:[Dd,DT,Bo,bd,_T,Wv,Va,$v,fo,Vs],encapsulation:2})};var TS=ot(St());var FT=ot(St()),Di=class extends FT.EventEmitter{constructor(e){super(),Object.defineProperties(this,{_attempts:{value:0,writable:!0},_duration:{enumerable:!1,get(){if(this._useInitialValue&&this._attempts===0)return this._min;let n=this._min*Math.pow(this._factor,this._attempts);if(this._jitter){let r=Math.random(),i=Math.floor(r*this._jitter*n);n=(Math.floor(r*10)&1)===0?n-i:n+i}return Math.min(n,this._max)|0}},_factor:{value:e.factor||2},_jitter:{value:e.jitter>0&&e.jitter<=1?e.jitter:0},_max:{value:e.max||1e4},_min:{value:e.min||100},_timeoutID:{value:null,writable:!0},_useInitialValue:{value:e.useInitialValue||!1}})}backoff(){let e=this._duration;this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null),this.emit("backoff",this._attempts,e),this._timeoutID=setTimeout(()=>{this.emit("ready",this._attempts,e),this._attempts++},e)}reset(){this._attempts=0,this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}};var ry=ot(St()),iy=ot(Gv());var HT=ot(St());var k=class t extends Error{constructor(e,n){super(),Object.setPrototypeOf(this,t.prototype);let r=typeof e=="string"?e:this.explanation,i=typeof e=="object"?e:n;this.message=`${this.name} (${this.code}): ${r}`,this.originalError=i}};var _e;(function(t){class e extends k{constructor(o,s){super(o,s),this.causes=[],this.code=20101,this.description="Invalid access token",this.explanation="Twilio was unable to validate your Access Token",this.name="AccessTokenInvalid",this.solutions=[],Object.setPrototypeOf(this,t.AccessTokenInvalid.prototype);let a=typeof o=="string"?o:this.explanation,c=typeof o=="object"?o:s;this.message=`${this.name} (${this.code}): ${a}`,this.originalError=c}}t.AccessTokenInvalid=e;class n extends k{constructor(o,s){super(o,s),this.causes=[],this.code=20104,this.description="Access token expired or expiration date invalid",this.explanation="The Access Token provided to the Twilio API has expired, the expiration time specified in the token was invalid, or the expiration time specified was too far in the future",this.name="AccessTokenExpired",this.solutions=[],Object.setPrototypeOf(this,t.AccessTokenExpired.prototype);let a=typeof o=="string"?o:this.explanation,c=typeof o=="object"?o:s;this.message=`${this.name} (${this.code}): ${a}`,this.originalError=c}}t.AccessTokenExpired=n;class r extends k{constructor(o,s){super(o,s),this.causes=[],this.code=20151,this.description="Authentication Failed",this.explanation="The Authentication with the provided JWT failed",this.name="AuthenticationFailed",this.solutions=[],Object.setPrototypeOf(this,t.AuthenticationFailed.prototype);let a=typeof o=="string"?o:this.explanation,c=typeof o=="object"?o:s;this.message=`${this.name} (${this.code}): ${a}`,this.originalError=c}}t.AuthenticationFailed=r})(_e||(_e={}));var Nd;(function(t){class e extends k{constructor(r,i){super(r,i),this.causes=["The access token has an invalid Account SID, API Key, or API Key Secret."],this.code=31202,this.description="Signature validation failed.",this.explanation="The provided access token failed signature validation.",this.name="AccessTokenSignatureValidationFailed",this.solutions=["Ensure the Account SID, API Key, and API Key Secret are valid when generating your access token."],Object.setPrototypeOf(this,t.AccessTokenSignatureValidationFailed.prototype);let o=typeof r=="string"?r:this.explanation,s=typeof r=="object"?r:i;this.message=`${this.name} (${this.code}): ${o}`,this.originalError=s}}t.AccessTokenSignatureValidationFailed=e})(Nd||(Nd={}));var Ln;(function(t){class e extends k{constructor(s,a){super(s,a),this.causes=[],this.code=31400,this.description="Bad Request (HTTP/SIP)",this.explanation="The request could not be understood due to malformed syntax.",this.name="BadRequest",this.solutions=[],Object.setPrototypeOf(this,t.BadRequest.prototype);let c=typeof s=="string"?s:this.explanation,u=typeof s=="object"?s:a;this.message=`${this.name} (${this.code}): ${c}`,this.originalError=u}}t.BadRequest=e;class n extends k{constructor(s,a){super(s,a),this.causes=["The outbound call was made to an invalid phone number.","The TwiML application sid is missing a Voice URL."],this.code=31404,this.description="Not Found (HTTP/SIP)",this.explanation="The server has not found anything matching the request.",this.name="NotFound",this.solutions=["Ensure the phone number dialed is valid.","Ensure the TwiML application is configured correctly with a Voice URL link."],Object.setPrototypeOf(this,t.NotFound.prototype);let c=typeof s=="string"?s:this.explanation,u=typeof s=="object"?s:a;this.message=`${this.name} (${this.code}): ${c}`,this.originalError=u}}t.NotFound=n;class r extends k{constructor(s,a){super(s,a),this.causes=[],this.code=31480,this.description="Temporarily Unavailable (SIP)",this.explanation="The callee is currently unavailable.",this.name="TemporarilyUnavailable",this.solutions=[],Object.setPrototypeOf(this,t.TemporarilyUnavailable.prototype);let c=typeof s=="string"?s:this.explanation,u=typeof s=="object"?s:a;this.message=`${this.name} (${this.code}): ${c}`,this.originalError=u}}t.TemporarilyUnavailable=r;class i extends k{constructor(s,a){super(s,a),this.causes=[],this.code=31486,this.description="Busy Here (SIP)",this.explanation="The callee is busy.",this.name="BusyHere",this.solutions=[],Object.setPrototypeOf(this,t.BusyHere.prototype);let c=typeof s=="string"?s:this.explanation,u=typeof s=="object"?s:a;this.message=`${this.name} (${this.code}): ${c}`,this.originalError=u}}t.BusyHere=i})(Ln||(Ln={}));var kd;(function(t){class e extends k{constructor(r,i){super(r,i),this.causes=[],this.code=31603,this.description="Decline (SIP)",this.explanation="The callee does not wish to participate in the call.",this.name="Decline",this.solutions=[],Object.setPrototypeOf(this,t.Decline.prototype);let o=typeof r=="string"?r:this.explanation,s=typeof r=="object"?r:i;this.message=`${this.name} (${this.code}): ${o}`,this.originalError=s}}t.Decline=e})(kd||(kd={}));var Ee;(function(t){class e extends k{constructor(u,l){super(u,l),this.causes=[],this.code=31e3,this.description="Unknown Error",this.explanation="An unknown error has occurred. See error details for more information.",this.name="UnknownError",this.solutions=[],Object.setPrototypeOf(this,t.UnknownError.prototype);let d=typeof u=="string"?u:this.explanation,f=typeof u=="object"?u:l;this.message=`${this.name} (${this.code}): ${d}`,this.originalError=f}}t.UnknownError=e;class n extends k{constructor(u,l){super(u,l),this.causes=[],this.code=31001,this.description="Application Not Found",this.explanation="",this.name="ApplicationNotFoundError",this.solutions=[],Object.setPrototypeOf(this,t.ApplicationNotFoundError.prototype);let d=typeof u=="string"?u:this.explanation,f=typeof u=="object"?u:l;this.message=`${this.name} (${this.code}): ${d}`,this.originalError=f}}t.ApplicationNotFoundError=n;class r extends k{constructor(u,l){super(u,l),this.causes=[],this.code=31002,this.description="Connection Declined",this.explanation="",this.name="ConnectionDeclinedError",this.solutions=[],Object.setPrototypeOf(this,t.ConnectionDeclinedError.prototype);let d=typeof u=="string"?u:this.explanation,f=typeof u=="object"?u:l;this.message=`${this.name} (${this.code}): ${d}`,this.originalError=f}}t.ConnectionDeclinedError=r;class i extends k{constructor(u,l){super(u,l),this.causes=[],this.code=31003,this.description="Connection Timeout",this.explanation="The server could not produce a response within a suitable amount of time.",this.name="ConnectionTimeoutError",this.solutions=[],Object.setPrototypeOf(this,t.ConnectionTimeoutError.prototype);let d=typeof u=="string"?u:this.explanation,f=typeof u=="object"?u:l;this.message=`${this.name} (${this.code}): ${d}`,this.originalError=f}}t.ConnectionTimeoutError=i;class o extends k{constructor(u,l){super(u,l),this.causes=[],this.code=31005,this.description="Connection error",this.explanation="A connection error occurred during the call",this.name="ConnectionError",this.solutions=[],Object.setPrototypeOf(this,t.ConnectionError.prototype);let d=typeof u=="string"?u:this.explanation,f=typeof u=="object"?u:l;this.message=`${this.name} (${this.code}): ${d}`,this.originalError=f}}t.ConnectionError=o;class s extends k{constructor(u,l){super(u,l),this.causes=["The incoming call was cancelled because it was not answered in time or it was accepted/rejected by another application instance registered with the same identity."],this.code=31008,this.description="Call cancelled",this.explanation="Unable to answer because the call has ended",this.name="CallCancelledError",this.solutions=[],Object.setPrototypeOf(this,t.CallCancelledError.prototype);let d=typeof u=="string"?u:this.explanation,f=typeof u=="object"?u:l;this.message=`${this.name} (${this.code}): ${d}`,this.originalError=f}}t.CallCancelledError=s;class a extends k{constructor(u,l){super(u,l),this.causes=[],this.code=31009,this.description="Transport error",this.explanation="No transport available to send or receive messages",this.name="TransportError",this.solutions=[],Object.setPrototypeOf(this,t.TransportError.prototype);let d=typeof u=="string"?u:this.explanation,f=typeof u=="object"?u:l;this.message=`${this.name} (${this.code}): ${d}`,this.originalError=f}}t.TransportError=a})(Ee||(Ee={}));var hn;(function(t){class e extends k{constructor(u,l){super(u,l),this.causes=["Invalid content or MessageType passed to sendMessage method."],this.code=31100,this.description="The request had malformed syntax.",this.explanation="The request could not be understood due to malformed syntax.",this.name="MalformedRequestError",this.solutions=["Ensure content and MessageType passed to sendMessage method are valid."],Object.setPrototypeOf(this,t.MalformedRequestError.prototype);let d=typeof u=="string"?u:this.explanation,f=typeof u=="object"?u:l;this.message=`${this.name} (${this.code}): ${d}`,this.originalError=f}}t.MalformedRequestError=e;class n extends k{constructor(u,l){super(u,l),this.causes=[],this.code=31101,this.description="Missing parameter array in request",this.explanation="",this.name="MissingParameterArrayError",this.solutions=[],Object.setPrototypeOf(this,t.MissingParameterArrayError.prototype);let d=typeof u=="string"?u:this.explanation,f=typeof u=="object"?u:l;this.message=`${this.name} (${this.code}): ${d}`,this.originalError=f}}t.MissingParameterArrayError=n;class r extends k{constructor(u,l){super(u,l),this.causes=[],this.code=31102,this.description="Authorization token missing in request.",this.explanation="",this.name="AuthorizationTokenMissingError",this.solutions=[],Object.setPrototypeOf(this,t.AuthorizationTokenMissingError.prototype);let d=typeof u=="string"?u:this.explanation,f=typeof u=="object"?u:l;this.message=`${this.name} (${this.code}): ${d}`,this.originalError=f}}t.AuthorizationTokenMissingError=r;class i extends k{constructor(u,l){super(u,l),this.causes=[],this.code=31103,this.description="Maximum parameter length has been exceeded.",this.explanation="Length of parameters cannot exceed MAX_PARAM_LENGTH.",this.name="MaxParameterLengthExceededError",this.solutions=[],Object.setPrototypeOf(this,t.MaxParameterLengthExceededError.prototype);let d=typeof u=="string"?u:this.explanation,f=typeof u=="object"?u:l;this.message=`${this.name} (${this.code}): ${d}`,this.originalError=f}}t.MaxParameterLengthExceededError=i;class o extends k{constructor(u,l){super(u,l),this.causes=[],this.code=31104,this.description="Invalid bridge token",this.explanation="",this.name="InvalidBridgeTokenError",this.solutions=[],Object.setPrototypeOf(this,t.InvalidBridgeTokenError.prototype);let d=typeof u=="string"?u:this.explanation,f=typeof u=="object"?u:l;this.message=`${this.name} (${this.code}): ${d}`,this.originalError=f}}t.InvalidBridgeTokenError=o;class s extends k{constructor(u,l){super(u,l),this.causes=["Client name contains invalid characters."],this.code=31105,this.description="Invalid client name",this.explanation="Client name should not contain control, space, delims, or unwise characters.",this.name="InvalidClientNameError",this.solutions=["Make sure that client name does not contain any of the invalid characters."],Object.setPrototypeOf(this,t.InvalidClientNameError.prototype);let d=typeof u=="string"?u:this.explanation,f=typeof u=="object"?u:l;this.message=`${this.name} (${this.code}): ${d}`,this.originalError=f}}t.InvalidClientNameError=s;class a extends k{constructor(u,l){super(u,l),this.causes=[],this.code=31107,this.description="The reconnect parameter is invalid",this.explanation="",this.name="ReconnectParameterInvalidError",this.solutions=[],Object.setPrototypeOf(this,t.ReconnectParameterInvalidError.prototype);let d=typeof u=="string"?u:this.explanation,f=typeof u=="object"?u:l;this.message=`${this.name} (${this.code}): ${d}`,this.originalError=f}}t.ReconnectParameterInvalidError=a})(hn||(hn={}));(function(t){class e extends k{constructor(d,f){super(d,f),this.causes=[],this.code=31201,this.description="Authorization error",this.explanation="The request requires user authentication. The server understood the request, but is refusing to fulfill it.",this.name="AuthorizationError",this.solutions=[],Object.setPrototypeOf(this,t.AuthorizationError.prototype);let h=typeof d=="string"?d:this.explanation,p=typeof d=="object"?d:f;this.message=`${this.name} (${this.code}): ${h}`,this.originalError=p}}t.AuthorizationError=e;class n extends k{constructor(d,f){super(d,f),this.causes=[],this.code=31203,this.description="No valid account",this.explanation="",this.name="NoValidAccountError",this.solutions=[],Object.setPrototypeOf(this,t.NoValidAccountError.prototype);let h=typeof d=="string"?d:this.explanation,p=typeof d=="object"?d:f;this.message=`${this.name} (${this.code}): ${h}`,this.originalError=p}}t.NoValidAccountError=n;class r extends k{constructor(d,f){super(d,f),this.causes=[],this.code=31204,this.description="Invalid JWT token",this.explanation="",this.name="InvalidJWTTokenError",this.solutions=[],Object.setPrototypeOf(this,t.InvalidJWTTokenError.prototype);let h=typeof d=="string"?d:this.explanation,p=typeof d=="object"?d:f;this.message=`${this.name} (${this.code}): ${h}`,this.originalError=p}}t.InvalidJWTTokenError=r;class i extends k{constructor(d,f){super(d,f),this.causes=[],this.code=31205,this.description="JWT token expired",this.explanation="",this.name="JWTTokenExpiredError",this.solutions=[],Object.setPrototypeOf(this,t.JWTTokenExpiredError.prototype);let h=typeof d=="string"?d:this.explanation,p=typeof d=="object"?d:f;this.message=`${this.name} (${this.code}): ${h}`,this.originalError=p}}t.JWTTokenExpiredError=i;class o extends k{constructor(d,f){super(d,f),this.causes=["Rate limit exceeded."],this.code=31206,this.description="Rate exceeded authorized limit.",this.explanation="The request performed exceeds the authorized limit.",this.name="RateExceededError",this.solutions=["Ensure message send rate does not exceed authorized limits."],Object.setPrototypeOf(this,t.RateExceededError.prototype);let h=typeof d=="string"?d:this.explanation,p=typeof d=="object"?d:f;this.message=`${this.name} (${this.code}): ${h}`,this.originalError=p}}t.RateExceededError=o;class s extends k{constructor(d,f){super(d,f),this.causes=[],this.code=31207,this.description="JWT token expiration too long",this.explanation="",this.name="JWTTokenExpirationTooLongError",this.solutions=[],Object.setPrototypeOf(this,t.JWTTokenExpirationTooLongError.prototype);let h=typeof d=="string"?d:this.explanation,p=typeof d=="object"?d:f;this.message=`${this.name} (${this.code}): ${h}`,this.originalError=p}}t.JWTTokenExpirationTooLongError=s;class a extends k{constructor(d,f){super(d,f),this.causes=[],this.code=31209,this.description="Reconnect attempt is not authorized.",this.explanation="",this.name="ReconnectAttemptError",this.solutions=[],Object.setPrototypeOf(this,t.ReconnectAttemptError.prototype);let h=typeof d=="string"?d:this.explanation,p=typeof d=="object"?d:f;this.message=`${this.name} (${this.code}): ${h}`,this.originalError=p}}t.ReconnectAttemptError=a;class c extends k{constructor(d,f){super(d,f),this.causes=["The Call Message Event Type is invalid and is not understood by Twilio Voice."],this.code=31210,this.description="Call Message Event Type is invalid.",this.explanation="The Call Message Event Type is invalid and is not understood by Twilio Voice.",this.name="CallMessageEventTypeInvalidError",this.solutions=["Ensure the Call Message Event Type is Valid and understood by Twilio Voice and try again."],Object.setPrototypeOf(this,t.CallMessageEventTypeInvalidError.prototype);let h=typeof d=="string"?d:this.explanation,p=typeof d=="object"?d:f;this.message=`${this.name} (${this.code}): ${h}`,this.originalError=p}}t.CallMessageEventTypeInvalidError=c;class u extends k{constructor(d,f){super(d,f),this.causes=["The payload size of Call Message Event exceeds the authorized limit."],this.code=31212,this.description="Call Message Event Payload size exceeded authorized limit.",this.explanation="The request performed to send a Call Message Event exceeds the payload size authorized limit",this.name="PayloadSizeExceededError",this.solutions=["Reduce payload size of Call Message Event to be within the authorized limit and try again."],Object.setPrototypeOf(this,t.PayloadSizeExceededError.prototype);let h=typeof d=="string"?d:this.explanation,p=typeof d=="object"?d:f;this.message=`${this.name} (${this.code}): ${h}`,this.originalError=p}}t.PayloadSizeExceededError=u})(_e||(_e={}));var pr;(function(t){class e extends k{constructor(i,o){super(i,o),this.causes=["The user denied the getUserMedia request.","The browser denied the getUserMedia request."],this.code=31401,this.description="UserMedia Permission Denied Error",this.explanation="The browser or end-user denied permissions to user media. Therefore we were unable to acquire input audio.",this.name="PermissionDeniedError",this.solutions=["The user should accept the request next time prompted. If the browser saved the deny, the user should change that permission in their browser.","The user should to verify that the browser has permission to access the microphone at this address."],Object.setPrototypeOf(this,t.PermissionDeniedError.prototype);let s=typeof i=="string"?i:this.explanation,a=typeof i=="object"?i:o;this.message=`${this.name} (${this.code}): ${s}`,this.originalError=a}}t.PermissionDeniedError=e;class n extends k{constructor(i,o){super(i,o),this.causes=["NotFoundError - The deviceID specified was not found.","The getUserMedia constraints were overconstrained and no devices matched."],this.code=31402,this.description="UserMedia Acquisition Failed Error",this.explanation="The browser and end-user allowed permissions, however getting the media failed. Usually this is due to bad constraints, but can sometimes fail due to browser, OS or hardware issues.",this.name="AcquisitionFailedError",this.solutions=["Ensure the deviceID being specified exists.","Try acquiring media with fewer constraints."],Object.setPrototypeOf(this,t.AcquisitionFailedError.prototype);let s=typeof i=="string"?i:this.explanation,a=typeof i=="object"?i:o;this.message=`${this.name} (${this.code}): ${s}`,this.originalError=a}}t.AcquisitionFailedError=n})(pr||(pr={}));var Oe;(function(t){class e extends k{constructor(i,o){super(i,o),this.causes=[],this.code=53e3,this.description="Signaling connection error",this.explanation="Raised whenever a signaling connection error occurs that is not covered by a more specific error code.",this.name="ConnectionError",this.solutions=[],Object.setPrototypeOf(this,t.ConnectionError.prototype);let s=typeof i=="string"?i:this.explanation,a=typeof i=="object"?i:o;this.message=`${this.name} (${this.code}): ${s}`,this.originalError=a}}t.ConnectionError=e;class n extends k{constructor(i,o){super(i,o),this.causes=["The device running your application lost its Internet connection."],this.code=53001,this.description="Signaling connection disconnected",this.explanation="Raised whenever the signaling connection is unexpectedly disconnected.",this.name="ConnectionDisconnected",this.solutions=["Ensure the device running your application has access to a stable Internet connection."],Object.setPrototypeOf(this,t.ConnectionDisconnected.prototype);let s=typeof i=="string"?i:this.explanation,a=typeof i=="object"?i:o;this.message=`${this.name} (${this.code}): ${s}`,this.originalError=a}}t.ConnectionDisconnected=n})(Oe||(Oe={}));var vt;(function(t){class e extends k{constructor(o,s){super(o,s),this.causes=["The Client may not be using a supported WebRTC implementation.","The Client may not have the necessary resources to create or apply a new media description."],this.code=53400,this.description="Client is unable to create or apply a local media description",this.explanation="Raised whenever a Client is unable to create or apply a local media description.",this.name="ClientLocalDescFailed",this.solutions=["If you are experiencing this error using the JavaScript SDK, ensure you are running it with a supported WebRTC implementation."],Object.setPrototypeOf(this,t.ClientLocalDescFailed.prototype);let a=typeof o=="string"?o:this.explanation,c=typeof o=="object"?o:s;this.message=`${this.name} (${this.code}): ${a}`,this.originalError=c}}t.ClientLocalDescFailed=e;class n extends k{constructor(o,s){super(o,s),this.causes=["The Client may not be using a supported WebRTC implementation.","The Client may be connecting peer-to-peer with another Participant that is not using a supported WebRTC implementation.","The Client may not have the necessary resources to apply a new media description."],this.code=53402,this.description="Client is unable to apply a remote media description",this.explanation="Raised whenever the Client receives a remote media description but is unable to apply it.",this.name="ClientRemoteDescFailed",this.solutions=["If you are experiencing this error using the JavaScript SDK, ensure you are running it with a supported WebRTC implementation."],Object.setPrototypeOf(this,t.ClientRemoteDescFailed.prototype);let a=typeof o=="string"?o:this.explanation,c=typeof o=="object"?o:s;this.message=`${this.name} (${this.code}): ${a}`,this.originalError=c}}t.ClientRemoteDescFailed=n;class r extends k{constructor(o,s){super(o,s),this.causes=["The Client was unable to establish a media connection.","A media connection which was active failed liveliness checks."],this.code=53405,this.description="Media connection failed",this.explanation="Raised by the Client or Server whenever a media connection fails.",this.name="ConnectionError",this.solutions=["If the problem persists, try connecting to another region.","Check your Client's network connectivity.","If you've provided custom ICE Servers then ensure that the URLs and credentials are valid."],Object.setPrototypeOf(this,t.ConnectionError.prototype);let a=typeof o=="string"?o:this.explanation,c=typeof o=="object"?o:s;this.message=`${this.name} (${this.code}): ${a}`,this.originalError=c}}t.ConnectionError=r})(vt||(vt={}));var Pd=new Map([[20101,_e.AccessTokenInvalid],[20104,_e.AccessTokenExpired],[20151,_e.AuthenticationFailed],[31202,Nd.AccessTokenSignatureValidationFailed],[31400,Ln.BadRequest],[31404,Ln.NotFound],[31480,Ln.TemporarilyUnavailable],[31486,Ln.BusyHere],[31603,kd.Decline],[31e3,Ee.UnknownError],[31001,Ee.ApplicationNotFoundError],[31002,Ee.ConnectionDeclinedError],[31003,Ee.ConnectionTimeoutError],[31005,Ee.ConnectionError],[31008,Ee.CallCancelledError],[31009,Ee.TransportError],[31100,hn.MalformedRequestError],[31101,hn.MissingParameterArrayError],[31102,hn.AuthorizationTokenMissingError],[31103,hn.MaxParameterLengthExceededError],[31104,hn.InvalidBridgeTokenError],[31105,hn.InvalidClientNameError],[31107,hn.ReconnectParameterInvalidError],[31201,_e.AuthorizationError],[31203,_e.NoValidAccountError],[31204,_e.InvalidJWTTokenError],[31205,_e.JWTTokenExpiredError],[31206,_e.RateExceededError],[31207,_e.JWTTokenExpirationTooLongError],[31209,_e.ReconnectAttemptError],[31210,_e.CallMessageEventTypeInvalidError],[31212,_e.PayloadSizeExceededError],[31401,pr.PermissionDeniedError],[31402,pr.AcquisitionFailedError],[53e3,Oe.ConnectionError],[53001,Oe.ConnectionDisconnected],[53400,vt.ClientLocalDescFailed],[53402,vt.ClientRemoteDescFailed],[53405,vt.ConnectionError]]);Object.freeze(Pd);var Ij=new Set([31001,31002,31003,31101,31102,31103,31104,31105,31107,31201,31202,31203,31204,31205,31207,31404,31480,31486,31603]);function Ua(t,e){if(!(typeof e!="number"||!bj(e)||!(t||!Ij.has(e))))return wj(e)}var x=class extends Error{constructor(e){super(e),this.name="InvalidArgumentError"}},ze=class extends Error{constructor(e){super(e),this.name="InvalidStateError"}},te=class extends Error{constructor(e){super(e),this.name="NotSupportedError"}};function wj(t){let e=Pd.get(t);if(!e)throw new x(`Error code ${t} not found`);return e}function bj(t){return Pd.has(t)}var qv=ot(Gv());var Od="@twilio/voice-sdk",Fn="2.18.0",ja="https://sdk.twilio.com/js/client/sounds/releases/1.0.0",UT=`${ja}/cowbell.mp3?cache=${Fn}`,jT=2e4;var ae=class t{static getLogLevelInstance(e){if(!t.loglevelInstance)try{t.loglevelInstance=(e&&e.LogLevelModule?e.LogLevelModule:qv).getLogger(Od)}catch{console.warn("Cannot create custom logger"),t.loglevelInstance=console}return t.loglevelInstance}constructor(e,n){this._log=t.getLogLevelInstance(n),this._prefix=`[TwilioVoice][${e}]`}debug(...e){this._log.debug(this._prefix,...e)}error(...e){this._log.error(this._prefix,...e)}info(...e){this._log.info(this._prefix,...e)}setDefaultLevel(e){this._log.setDefaultLevel?this._log.setDefaultLevel(e):console.warn("Logger cannot setDefaultLevel")}warn(...e){this._log.warn(this._prefix,...e)}};ae.levels=qv.levels;var Dj=ae.getLogLevelInstance();var Tj=`${ja}/outgoing.mp3`,Ba=class{constructor(e,n,r,i){this._name=e,this._availableDevices=n,this._beforeChange=r,this._isSupported=i,this._activeDevices=new Set,this._log=new ae("OutputDeviceCollection")}delete(e){this._log.debug(".delete",e);let n=!!this._activeDevices.delete(e),r=this._availableDevices.get("default")||Array.from(this._availableDevices.values())[0];!this._activeDevices.size&&r&&this._activeDevices.add(r);let i=Array.from(this._activeDevices.values()).map(o=>o.deviceId);return this._beforeChange(this._name,i),!!n}get(){return this._activeDevices}set(e){if(this._log.debug(".set",e),!this._isSupported)return Promise.reject(new te("This browser does not support audio output selection"));let n=Array.isArray(e)?e:[e];if(!n.length)return Promise.reject(new x("Must specify at least one device to set"));let r=[],i=n.map(o=>{let s=this._availableDevices.get(o);return s||r.push(o),s});return r.length?Promise.reject(new x(`Devices not found: ${r.join(", ")}`)):new Promise(o=>{o(this._beforeChange(this._name,n))}).then(()=>{this._activeDevices.clear(),i.forEach(this._activeDevices.add,this._activeDevices)})}test(e=Tj){return this._isSupported?this._activeDevices.size?Promise.all(Array.from(this._activeDevices).map(n=>{let r;return new Promise(i=>{r=new Audio(e),r.oncanplay=i}).then(()=>r.setSinkId(n.deviceId).then(()=>r.play()))})):Promise.reject(new ze("No active output devices to test")):Promise.reject(new te("This browser does not support audio output selection"))}};var xd=class{constructor(e){Object.defineProperties(this,{deviceId:{get(){return e.deviceId}},groupId:{get(){return e.groupId}},kind:{get(){return e.kind}},label:{get(){return e.label}}})}};var Wa={};FS(Wa,{Exception:()=>Rj,average:()=>Ti,difference:()=>Ha,flatMap:()=>Fd,isChrome:()=>$a,isElectron:()=>BT,isFirefox:()=>Sj,isLegacyEdge:()=>$o,isSafari:()=>Aj,promisifyEvents:()=>Vd,queryToJson:()=>Kv,sortByMimeTypes:()=>Yv});function Ld(t){if(!(this instanceof Ld))return new Ld(t);this.message=t}Ld.prototype.toString=function(){return`Twilio.Exception: ${this.message}`};function Ti(t){return t&&t.length?t.reduce((e,n)=>e+n)/t.length:0}function Ha(t,e,n){n=n||(i=>i);let r=new Set(e.map(n));return t.filter(i=>!r.has(n(i)))}function BT(t){return!!t.userAgent.match("Electron")}function $a(t,e){let n=!!e.userAgent.match("CriOS"),r=!!e.userAgent.match("HeadlessChrome"),i=typeof t.chrome<"u"&&e.vendor==="Google Inc."&&e.userAgent.indexOf("OPR")===-1&&e.userAgent.indexOf("Edge")===-1;return n||BT(e)||i||r}function Sj(t){return t=t||(typeof window>"u"?global.navigator:window.navigator),!!t&&typeof t.userAgent=="string"&&/firefox|fxios/i.test(t.userAgent)}function $o(t){return t=t||(typeof window>"u"?global.navigator:window.navigator),!!t&&typeof t.userAgent=="string"&&/edge\/\d+/i.test(t.userAgent)}function Aj(t){return!!t.vendor&&t.vendor.indexOf("Apple")!==-1&&t.userAgent&&t.userAgent.indexOf("CriOS")===-1&&t.userAgent.indexOf("FxiOS")===-1}function Kv(t){return t?t.split("&").reduce((e,n)=>{let r=n.split("="),i=r[0],o=decodeURIComponent((r[1]||"").replace(/\+/g,"%20"));return i&&(e[i]=o),e},{}):""}function Fd(t,e){let n=t instanceof Map||t instanceof Set?Array.from(t.values()):t;return e=e||(r=>r),n.reduce((r,i)=>{let o=e(i);return r.concat(o)},[])}function Vd(t,e,n){return new Promise((r,i)=>{function o(){t.removeListener(n,s),r()}function s(){t.removeListener(e,o),i()}t.once(e,o),t.once(n,s)})}function Yv(t,e){let n=e.map(r=>"audio/"+r.toLowerCase());return t.sort((r,i)=>{let o=n.indexOf(r.mimeType.toLowerCase()),s=n.indexOf(i.mimeType.toLowerCase()),a=o>=0?o:Number.MAX_VALUE,c=s>=0?s:Number.MAX_VALUE;return a-c})}var Rj=Ld;var Mj={audioinput:"Audio Input",audiooutput:"Audio Output"},za=class extends HT.EventEmitter{get audioConstraints(){return this._audioConstraints}get inputDevice(){return this._inputDevice}get inputStream(){return this._localProcessedStream||this._selectedInputDeviceStream}get processedStream(){return this._log.warn("AudioHelper#processedStream is deprecated. Please use AudioHelper#localProcessedStream instead."),this._localProcessedStream}get localProcessedStream(){return this._localProcessedStream}get remoteProcessedStream(){return this._remoteProcessedStream}constructor(e,n,r){super(),this.availableInputDevices=new Map,this.availableOutputDevices=new Map,this._audioConstraints=null,this._defaultInputDeviceStream=null,this._enabledSounds={[be.SoundName.Disconnect]:!0,[be.SoundName.Incoming]:!0,[be.SoundName.Outgoing]:!0},this._inputDevice=null,this._inputDevicePromise=null,this._isPollingInputVolume=!1,this._log=new ae("AudioHelper"),this._localProcessedStream=null,this._remoteProcessedStream=null,this._selectedInputDeviceStream=null,this._unknownDeviceIndexes={audioinput:{},audiooutput:{}},this._updateAvailableDevices=()=>!this._mediaDevices||!this._enumerateDevices?Promise.reject("Enumeration not supported"):this._enumerateDevices().then(a=>{this._updateDevices(a.filter(u=>u.kind==="audiooutput"),this.availableOutputDevices,this._removeLostOutput),this._updateDevices(a.filter(u=>u.kind==="audioinput"),this.availableInputDevices,this._removeLostInput);let c=this.availableOutputDevices.get("default")||Array.from(this.availableOutputDevices.values())[0];[this.speakerDevices,this.ringtoneDevices].forEach(u=>{!u.get().size&&this.availableOutputDevices.size&&this.isOutputSelectionSupported&&u.set(c.deviceId).catch(l=>{this._log.warn(`Unable to set audio output devices. ${l}`)})})}),this._removeLostInput=a=>{if(!this.inputDevice||this.inputDevice.deviceId!==a.deviceId)return!1;this._destroyLocalProcessedStream(),this._replaceStream(null),this._inputDevice=null,this._maybeStopPollingVolume();let c=this.availableInputDevices.get("default")||Array.from(this.availableInputDevices.values())[0];return c&&this.setInputDevice(c.deviceId),!0},this._removeLostOutput=a=>{let c=this.speakerDevices.delete(a),u=this.ringtoneDevices.delete(a);return c||u},r=Object.assign({AudioContext:typeof AudioContext<"u"&&AudioContext,setSinkId:typeof HTMLAudioElement<"u"&&HTMLAudioElement.prototype.setSinkId},r),this._beforeSetInputDevice=r.beforeSetInputDevice||(()=>Promise.resolve()),this._updateUserOptions(r),this._audioProcessorEventObserver=r.audioProcessorEventObserver,this._mediaDevices=r.mediaDevices||navigator.mediaDevices,this._onActiveInputChanged=n,this._enumerateDevices=typeof r.enumerateDevices=="function"?r.enumerateDevices:this._mediaDevices&&this._mediaDevices.enumerateDevices.bind(this._mediaDevices);let i=!!(r.AudioContext||r.audioContext),o=!!this._enumerateDevices;r.enabledSounds&&(this._enabledSounds=r.enabledSounds);let s=typeof r.setSinkId=="function";this.isOutputSelectionSupported=o&&s,this.isVolumeSupported=i,this.isVolumeSupported&&(this._audioContext=r.audioContext||r.AudioContext&&new r.AudioContext,this._audioContext&&(this._inputVolumeAnalyser=this._audioContext.createAnalyser(),this._inputVolumeAnalyser.fftSize=32,this._inputVolumeAnalyser.smoothingTimeConstant=.3)),this.ringtoneDevices=new Ba("ringtone",this.availableOutputDevices,e,this.isOutputSelectionSupported),this.speakerDevices=new Ba("speaker",this.availableOutputDevices,e,this.isOutputSelectionSupported),this.addListener("newListener",a=>{a==="inputVolume"&&this._maybeStartPollingVolume()}),this.addListener("removeListener",a=>{a==="inputVolume"&&this._maybeStopPollingVolume()}),this.once("newListener",()=>{this.isOutputSelectionSupported||this._log.warn("Warning: This browser does not support audio output selection."),this.isVolumeSupported||this._log.warn("Warning: This browser does not support Twilio's volume indicator feature.")}),o&&this._initializeEnumeration(),navigator&&navigator.permissions&&typeof navigator.permissions.query=="function"?navigator.permissions.query({name:"microphone"}).then(a=>{if(a.state!=="granted"){let c=()=>{this._updateAvailableDevices(),this._stopMicrophonePermissionListener()};a.addEventListener("change",c),this._microphonePermissionStatus=a,this._onMicrophonePermissionStatusChanged=c}}).catch(a=>this._log.warn(`Warning: unable to listen for microphone permission changes. ${a}`)):this._log.warn("Warning: current browser does not support permissions API.")}_destroy(){this._stopDefaultInputDeviceStream(),this._stopSelectedInputDeviceStream(),this._destroyLocalProcessedStream(),this._destroyRemoteProcessedStream(),this._maybeStopPollingVolume(),this.removeAllListeners(),this._stopMicrophonePermissionListener(),this._unbind()}_destroyRemoteProcessedStream(){if(this._remoteProcessor&&this._remoteProcessedStream){this._log.info("destroying remote processed stream");let e=this._remoteProcessedStream;this._remoteProcessedStream.getTracks().forEach(n=>n.stop()),this._remoteProcessedStream=null,this._remoteProcessor.destroyProcessedStream(e),this._audioProcessorEventObserver.emit("destroy",!0)}}_getInputDevicePromise(){return this._inputDevicePromise}_getAudioProcessorEventObserver(){return this._audioProcessorEventObserver}_maybeCreateRemoteProcessedStream(e){return this._remoteProcessor?(this._log.info("Creating remote processed stream"),this._remoteProcessor.createProcessedStream(e).then(n=>(this._remoteProcessedStream=n,this._audioProcessorEventObserver.emit("create",!0),this._remoteProcessedStream))):Promise.resolve(e)}_maybeStartPollingVolume(){if(!this.isVolumeSupported||!this.inputStream||(this._updateVolumeSource(),this._isPollingInputVolume||!this._inputVolumeAnalyser))return;let e=this._inputVolumeAnalyser.frequencyBinCount,n=new Uint8Array(e);this._isPollingInputVolume=!0;let r=()=>{if(this._isPollingInputVolume){if(this._inputVolumeAnalyser){this._inputVolumeAnalyser.getByteFrequencyData(n);let i=Ti(n);this.emit("inputVolume",i/255)}requestAnimationFrame(r)}};requestAnimationFrame(r)}_maybeStopPollingVolume(){this.isVolumeSupported&&(!this._isPollingInputVolume||this.inputStream&&this.listenerCount("inputVolume")||(this._inputVolumeSource&&(this._inputVolumeSource.disconnect(),delete this._inputVolumeSource),this._isPollingInputVolume=!1))}_openDefaultDeviceWithConstraints(e){return this._log.info("Opening default device with constraints",e),this._getUserMedia(e).then(n=>(this._log.info("Opened default device. Updating available devices."),this._updateAvailableDevices().catch(r=>{this._log.warn("Unable to updateAvailableDevices after gUM call",r)}),this._defaultInputDeviceStream=n,this._maybeCreateLocalProcessedStream(n)))}_stopDefaultInputDeviceStream(){this._defaultInputDeviceStream&&(this._log.info("stopping default device stream"),this._defaultInputDeviceStream.getTracks().forEach(e=>e.stop()),this._defaultInputDeviceStream=null,this._destroyLocalProcessedStream())}_unbind(){var e;!((e=this._mediaDevices)===null||e===void 0)&&e.removeEventListener&&this._mediaDevices.removeEventListener("devicechange",this._updateAvailableDevices)}_updateUserOptions(e){typeof e.enumerateDevices=="function"&&(this._enumerateDevices=e.enumerateDevices),typeof e.getUserMedia=="function"&&(this._getUserMedia=e.getUserMedia)}addProcessor(e,n=!1){if(this._log.debug(".addProcessor"),this._localProcessor&&!n)throw new te("Can only have one Local AudioProcessor at a time.");if(this._remoteProcessor&&n)throw new te("Can only have one Remote AudioProcessor at a time.");if(typeof e!="object"||e===null)throw new x("Missing AudioProcessor argument.");if(typeof e.createProcessedStream!="function")throw new x("Missing createProcessedStream() method.");if(typeof e.destroyProcessedStream!="function")throw new x("Missing destroyProcessedStream() method.");return n?(this._remoteProcessor=e,this._audioProcessorEventObserver.emit("add",!0),Promise.resolve()):(this._localProcessor=e,this._audioProcessorEventObserver.emit("add",!1),this._restartInputStreams())}disconnect(e){return this._log.debug(".disconnect",e),this._maybeEnableSound(be.SoundName.Disconnect,e)}incoming(e){return this._log.debug(".incoming",e),this._maybeEnableSound(be.SoundName.Incoming,e)}outgoing(e){return this._log.debug(".outgoing",e),this._maybeEnableSound(be.SoundName.Outgoing,e)}removeProcessor(e,n=!1){if(this._log.debug(".removeProcessor"),typeof e!="object"||e===null)throw new x("Missing AudioProcessor argument.");if(this._localProcessor!==e&&!n)throw new x("Cannot remove a Local AudioProcessor that has not been previously added.");if(this._remoteProcessor!==e&&n)throw new x("Cannot remove a Remote AudioProcessor that has not been previously added.");return n?(this._destroyRemoteProcessedStream(),this._remoteProcessor=null,this._audioProcessorEventObserver.emit("remove",!0),Promise.resolve()):(this._destroyLocalProcessedStream(),this._localProcessor=null,this._audioProcessorEventObserver.emit("remove",!1),this._restartInputStreams())}setAudioConstraints(e){return this._log.debug(".setAudioConstraints",e),this._audioConstraints=Object.assign({},e),delete this._audioConstraints.deviceId,this.inputDevice?this._setInputDevice(this.inputDevice.deviceId,!0):Promise.resolve()}setInputDevice(e){return this._log.debug(".setInputDevice",e),this._setInputDevice(e,!1)}unsetAudioConstraints(){return this._log.debug(".unsetAudioConstraints"),this._audioConstraints=null,this.inputDevice?this._setInputDevice(this.inputDevice.deviceId,!0):Promise.resolve()}unsetInputDevice(){return this._log.debug(".unsetInputDevice",this.inputDevice),this.inputDevice?(this._destroyLocalProcessedStream(),this._onActiveInputChanged(null).then(()=>{this._replaceStream(null),this._inputDevice=null,this._maybeStopPollingVolume()})):Promise.resolve()}_destroyLocalProcessedStream(){if(this._localProcessor&&this._localProcessedStream){this._log.info("destroying local processed stream");let e=this._localProcessedStream;this._localProcessedStream.getTracks().forEach(n=>n.stop()),this._localProcessedStream=null,this._localProcessor.destroyProcessedStream(e),this._audioProcessorEventObserver.emit("destroy",!1)}}_getUnknownDeviceIndex(e){let n=e.deviceId,r=e.kind,i=this._unknownDeviceIndexes[r][n];return i||(i=Object.keys(this._unknownDeviceIndexes[r]).length+1,this._unknownDeviceIndexes[r][n]=i),i}_initializeEnumeration(){if(!this._mediaDevices||!this._enumerateDevices)throw new te("Enumeration is not supported");this._mediaDevices.addEventListener&&this._mediaDevices.addEventListener("devicechange",this._updateAvailableDevices),this._updateAvailableDevices().then(()=>{this.isOutputSelectionSupported&&Promise.all([this.speakerDevices.set("default"),this.ringtoneDevices.set("default")]).catch(e=>{this._log.warn(`Warning: Unable to set audio output devices. ${e}`)})})}_maybeCreateLocalProcessedStream(e){return this._localProcessor?(this._log.info("Creating local processed stream"),this._localProcessor.createProcessedStream(e).then(n=>(this._localProcessedStream=n,this._audioProcessorEventObserver.emit("create",!1),this._localProcessedStream))):Promise.resolve(e)}_maybeEnableSound(e,n){return typeof n<"u"&&(this._enabledSounds[e]=n),this._enabledSounds[e]}_replaceStream(e){this._log.info("Replacing with new stream."),this._selectedInputDeviceStream&&(this._log.info("Old stream detected. Stopping tracks."),this._stopSelectedInputDeviceStream()),this._selectedInputDeviceStream=e}_restartInputStreams(){if(this.inputDevice&&this._selectedInputDeviceStream)return this._log.info("Restarting selected input device"),this._setInputDevice(this.inputDevice.deviceId,!0);if(this._defaultInputDeviceStream){let e=this.availableInputDevices.get("default")||Array.from(this.availableInputDevices.values())[0];return this._log.info("Restarting default input device, now becoming selected."),this._setInputDevice(e.deviceId,!0)}return Promise.resolve()}_setInputDevice(e,n){return le(this,void 0,void 0,function*(){let r=()=>le(this,void 0,void 0,function*(){if(yield this._beforeSetInputDevice(),typeof e!="string")return Promise.reject(new x("Must specify the device to set"));let i=this.availableInputDevices.get(e);if(!i)return Promise.reject(new x(`Device not found: ${e}`));if(this._log.info("Setting input device. ID: "+e),this._inputDevice&&this._inputDevice.deviceId===e&&this._selectedInputDeviceStream){if(!n)return Promise.resolve();this._log.info("Same track detected on setInputDevice, stopping old tracks."),this._stopSelectedInputDeviceStream()}this._stopDefaultInputDeviceStream();let o={audio:Object.assign({deviceId:{exact:e}},this.audioConstraints)};return this._log.info("setInputDevice: getting new tracks."),this._getUserMedia(o).then(s=>(this._destroyLocalProcessedStream(),this._maybeCreateLocalProcessedStream(s).then(a=>(this._log.info("setInputDevice: invoking _onActiveInputChanged."),this._onActiveInputChanged(a).then(()=>{this._replaceStream(s),this._inputDevice=i,this._maybeStartPollingVolume()})))))});return this._inputDevicePromise=r().finally(()=>{this._inputDevicePromise=null})})}_stopMicrophonePermissionListener(){var e;!((e=this._microphonePermissionStatus)===null||e===void 0)&&e.removeEventListener&&this._microphonePermissionStatus.removeEventListener("change",this._onMicrophonePermissionStatusChanged)}_stopSelectedInputDeviceStream(){this._selectedInputDeviceStream&&(this._log.info("Stopping selected device stream"),this._selectedInputDeviceStream.getTracks().forEach(e=>e.stop()))}_updateDevices(e,n,r){let i=e.map(u=>u.deviceId),o=Array.from(n.values()).map(u=>u.deviceId),s=[],a=Ha(o,i);a.forEach(u=>{let l=n.get(u);l&&(n.delete(u),r(l)&&s.push(l))});let c=!1;if(e.forEach(u=>{let l=n.get(u.deviceId),d=this._wrapMediaDeviceInfo(u);(!l||l.label!==d.label)&&(n.set(u.deviceId,d),c=!0)}),c||a.length){let u="default",l=this.inputDevice&&this.inputDevice.deviceId===u,d=this._defaultInputDeviceStream&&this.availableInputDevices.get(u);(l||d)&&(this._log.warn("Calling getUserMedia after device change to ensure that the           tracks of the active device (default) have not gone stale."),setTimeout(()=>{this._setInputDevice(u,!0)},0)),this._log.debug("#deviceChange",s),this.emit("deviceChange",s)}}_updateVolumeSource(){if(!(!this.inputStream||!this._audioContext||!this._inputVolumeAnalyser)){this._inputVolumeSource&&this._inputVolumeSource.disconnect();try{this._inputVolumeSource=this._audioContext.createMediaStreamSource(this.inputStream),this._inputVolumeSource.connect(this._inputVolumeAnalyser)}catch(e){this._log.warn("Unable to update volume source",e),delete this._inputVolumeSource}}}_wrapMediaDeviceInfo(e){let n={deviceId:e.deviceId,groupId:e.groupId,kind:e.kind,label:e.label};if(!n.label)if(n.deviceId==="default")n.label="Default";else{let r=this._getUnknownDeviceIndex(e);n.label=`Unknown ${Mj[n.kind]} Device ${r}`}return new xd(n)}};za||(za={});var $T=za;var WT=ot(St());var Ud=class extends WT.EventEmitter{constructor(){super(),this._log=new ae("AudioProcessorEventObserver"),this._log.info("Creating AudioProcessorEventObserver instance"),this.on("enabled",e=>this._reEmitEvent("enabled",e)),this.on("add",e=>this._reEmitEvent("add",e)),this.on("remove",e=>this._reEmitEvent("remove",e)),this.on("create",e=>this._reEmitEvent("create-processed-stream",e)),this.on("destroy",e=>this._reEmitEvent("destroy-processed-stream",e))}destroy(){this.removeAllListeners()}_reEmitEvent(e,n){this._log.info(`${n?"Remote":"Local"} AudioProcessor:${e}`),this.emit("event",{name:e,group:"audio-processor",isRemote:n})}};var Nj={dtmf0:[1360,960],dtmf1:[1230,720],dtmf2:[1360,720],dtmf3:[1480,720],dtmf4:[1230,790],dtmf5:[1360,790],dtmf6:[1480,790],dtmf7:[1230,870],dtmf8:[1360,870],dtmf9:[1480,870],dtmfh:[1480,960],dtmfs:[1230,960]},jd=class{constructor(e){this._context=e,this._gainNodes=[],this._gainNodes=[this._context.createGain(),this._context.createGain()],this._gainNodes.forEach(n=>{n.connect(this._context.destination),n.gain.value=.1,this._gainNodes.push(n)})}cleanup(){this._gainNodes.forEach(e=>{e.disconnect()})}play(e){let n=Nj[e];if(!n)throw new x("Invalid DTMF sound name");[this._context.createOscillator(),this._context.createOscillator()].forEach((i,o)=>{i.type="sine",i.frequency.value=n[o],i.connect(this._gainNodes[o]),i.start(),i.stop(this._context.currentTime+.1),i.addEventListener("ended",()=>i.disconnect())})}};var zT=ot(St());function kj(t,e,n){let r=JSON.stringify(e.body||{}),i=new Headers;e.headers=e.headers||[],Object.entries(e.headers).forEach(([o,s])=>i.append(o,s)),fetch(e.url,{body:r,headers:i,method:t}).then(o=>o.text(),n).then(o=>n(null,o),n)}var Bd=kj;Bd.get=function(e,n){return new this("GET",e,n)};Bd.post=function(e,n){return new this("POST",e,n)};var Xe=class t extends zT.EventEmitter{constructor(e,n,r){if(super(),!(this instanceof t))return new t(e,n,r);r=Object.assign({defaultPayload(){return{}}},r);let i=r.defaultPayload;typeof i!="function"&&(i=()=>Object.assign({},r.defaultPayload));let o=!0,s=Object.assign({app_name:void 0,app_version:void 0},r.metadata);Object.defineProperties(this,{_defaultPayload:{value:i},_host:{value:r.host,writable:!0},_isEnabled:{get(){return o},set(a){o=a}},_log:{value:new ae("EventPublisher")},_request:{value:r.request||Bd,writable:!0},_token:{value:n,writable:!0},isEnabled:{enumerable:!0,get(){return o}},metadata:{enumerable:!0,get(){return s}},productName:{enumerable:!0,value:e},token:{enumerable:!0,get(){return this._token}}})}};Xe.prototype._post=function(e,n,r,i,o,s,a){if(!this.isEnabled&&!a||!this._host)return this._log.debug("Publishing cancelled",JSON.stringify({isEnabled:this.isEnabled,force:a,host:this._host})),Promise.resolve();if(!s||(!s.parameters||!s.parameters.CallSid)&&!s.outboundConnectionId)return s?this._log.debug("Publishing cancelled. Missing connection info",JSON.stringify({outboundConnectionId:s.outboundConnectionId,parameters:s.parameters})):this._log.debug("Publishing cancelled. Missing connection object"),Promise.resolve();let c={group:r,level:n.toUpperCase(),name:i,payload:o&&o.forEach?o.slice(0):Object.assign(this._defaultPayload(s),o),payload_type:"application/json",private:!1,publisher:this.productName,timestamp:new Date().toISOString()};this.metadata&&(c.publisher_metadata=this.metadata),e==="EndpointEvents"&&this._log.debug("Publishing insights",JSON.stringify({endpointName:e,event:c,force:a,host:this._host}));let u={body:c,headers:{"Content-Type":"application/json","X-Twilio-Token":this.token},url:`https://${this._host}/v4/${e}`};return new Promise((l,d)=>{this._request.post(u,f=>{f?(this.emit("error",f),d(f)):l()})}).catch(l=>{this._log.error(`Unable to post ${r} ${i} event to Insights. Received error: ${l}`)})};Xe.prototype.post=function(e,n,r,i,o,s){return this._post("EndpointEvents",e,n,r,i,o,s)};Xe.prototype.debug=function(e,n,r,i){return this.post("debug",e,n,r,i)};Xe.prototype.info=function(e,n,r,i){return this.post("info",e,n,r,i)};Xe.prototype.warn=function(e,n,r,i){return this.post("warning",e,n,r,i)};Xe.prototype.error=function(e,n,r,i){return this.post("error",e,n,r,i)};Xe.prototype.postMetrics=function(e,n,r,i,o){return new Promise(s=>{let a=r.map(Pj).map(c=>Object.assign(c,i));s(this._post("EndpointMetrics","info",e,n,a,o))})};Xe.prototype.setHost=function(e){this._host=e};Xe.prototype.setToken=function(e){this._token=e};Xe.prototype.enable=function(){this._isEnabled=!0};Xe.prototype.disable=function(){this._isEnabled=!1};function Pj(t){return{audio_codec:t.codecName,audio_level_in:t.audioInputLevel,audio_level_out:t.audioOutputLevel,bytes_received:t.bytesReceived,bytes_sent:t.bytesSent,call_volume_input:t.inputVolume,call_volume_output:t.outputVolume,jitter:t.jitter,mos:t.mos&&Math.round(t.mos*100)/100,packets_lost:t.packetsLost,packets_lost_fraction:t.packetsLostFraction&&Math.round(t.packetsLostFraction*100)/100,packets_received:t.packetsReceived,rtt:t.rtt,timestamp:new Date(t.timestamp).toISOString(),total_bytes_received:t.totals.bytesReceived,total_bytes_sent:t.totals.bytesSent,total_packets_lost:t.totals.packetsLost,total_packets_received:t.totals.packetsReceived,total_packets_sent:t.totals.packetsSent}}var eS=ot(St());var GT=typeof window<"u"?window.RTCStatsReport:void 0;function At(t){if(!(this instanceof At))return new At(t);let e=this;Object.defineProperties(this,{_map:{value:t},size:{enumerable:!0,get(){return e._map.size}}}),this[Symbol.iterator]=t[Symbol.iterator]}GT&&(At.prototype=Object.create(GT.prototype),At.prototype.constructor=At);["entries","forEach","get","has","keys","values"].forEach(t=>{At.prototype[t]=function(...e){return this._map[t](...e)}});At.fromArray=function(e){return new At(e.reduce((n,r)=>(n.set(r.id,r),n),new Map))};At.fromRTCStatsResponse=function(e){let n,r=new Map,i=e.result().reduce((o,s)=>{let a=s.id;switch(s.type){case"googCertificate":o.set(a,Uj(s));break;case"datachannel":o.set(a,jj(s));break;case"googCandidatePair":JT(s,"googActiveConnection")&&(n=a),o.set(a,Vj(s));break;case"localcandidate":o.set(a,KT(s,!1));break;case"remotecandidate":o.set(a,KT(s,!0));break;case"ssrc":Si(s,"packetsReceived")?o.set(`rtp-${a}`,Lj(s)):o.set(`rtp-${a}`,Fj(s)),o.set(`track-${a}`,xj(s)),o.set(`codec-${a}`,Oj(s));break;case"googComponent":let c=qT(s);r.set(c.selectedCandidatePairId,a),o.set(a,qT(s));break}return o},new Map);if(n){let o=r.get(n);o&&(i.get(o).dtlsState="connected")}return new At(i)};function qT(t){return{bytesReceived:void 0,bytesSent:void 0,dtlsState:void 0,id:t.id,localCertificateId:t.stat("localCertificateId"),remoteCertificateId:t.stat("remoteCertificateId"),rtcpTransportStatsId:void 0,selectedCandidatePairId:t.stat("selectedCandidatePairId"),timestamp:Date.parse(t.timestamp),type:"transport"}}function Oj(t){return{channels:void 0,clockRate:void 0,id:t.id,implementation:void 0,mimeType:`${t.stat("mediaType")}/${t.stat("googCodecName")}`,payloadType:void 0,sdpFmtpLine:void 0,timestamp:Date.parse(t.timestamp),type:"codec"}}function xj(t){return{audioLevel:Si(t,"audioOutputLevel")?Z(t,"audioOutputLevel")/32767:(Z(t,"audioInputLevel")||0)/32767,detached:void 0,echoReturnLoss:Zv(t,"googEchoCancellationReturnLoss"),echoReturnLossEnhancement:Zv(t,"googEchoCancellationReturnLossEnhancement"),ended:void 0,frameHeight:Si(t,"googFrameHeightReceived")?Z(t,"googFrameHeightReceived"):Z(t,"googFrameHeightSent"),frameWidth:Si(t,"googFrameWidthReceived")?Z(t,"googFrameWidthReceived"):Z(t,"googFrameWidthSent"),framesCorrupted:void 0,framesDecoded:Z(t,"framesDecoded"),framesDropped:void 0,framesPerSecond:void 0,framesReceived:void 0,framesSent:Z(t,"framesEncoded"),fullFramesLost:void 0,id:t.id,kind:t.stat("mediaType"),partialFramesLost:void 0,remoteSource:void 0,ssrcIds:void 0,timestamp:Date.parse(t.timestamp),trackIdentifier:t.stat("googTrackId"),type:"track"}}function YT(t,e){return{associateStatsId:void 0,codecId:`codec-${t.id}`,firCount:e?Z(t,"googFirsSent"):void 0,id:t.id,isRemote:void 0,mediaType:t.stat("mediaType"),nackCount:e?Z(t,"googNacksSent"):Z(t,"googNacksReceived"),pliCount:e?Z(t,"googPlisSent"):Z(t,"googPlisReceived"),qpSum:Z(t,"qpSum"),sliCount:void 0,ssrc:t.stat("ssrc"),timestamp:Date.parse(t.timestamp),trackId:`track-${t.id}`,transportId:t.stat("transportId")}}function Lj(t){let e=YT(t,!0);return Object.assign(e,{burstDiscardCount:void 0,burstDiscardRate:void 0,burstLossCount:void 0,burstLossRate:void 0,burstPacketsDiscarded:void 0,burstPacketsLost:void 0,bytesReceived:Z(t,"bytesReceived"),fractionLost:void 0,framesDecoded:Z(t,"framesDecoded"),gapDiscardRate:void 0,gapLossRate:void 0,jitter:Jv(t.stat("googJitterReceived")),packetsDiscarded:void 0,packetsLost:Z(t,"packetsLost"),packetsReceived:Z(t,"packetsReceived"),packetsRepaired:void 0,roundTripTime:Jv(t.stat("googRtt")),type:"inbound-rtp"}),e}function Fj(t){let e=YT(t,!1);return Object.assign(e,{bytesSent:Z(t,"bytesSent"),framesEncoded:Z(t,"framesEncoded"),packetsSent:Z(t,"packetsSent"),remoteTimestamp:void 0,targetBitrate:void 0,type:"outbound-rtp"}),e}function KT(t,e){return{candidateType:Bj(t.stat("candidateType")),deleted:void 0,id:t.id,ip:t.stat("ipAddress"),isRemote:e,port:Z(t,"portNumber"),priority:Zv(t,"priority"),protocol:t.stat("transport"),relayProtocol:void 0,timestamp:Date.parse(t.timestamp),transportId:void 0,type:e?"remote-candidate":"local-candidate",url:void 0}}function Vj(t){return{availableIncomingBitrate:void 0,availableOutgoingBitrate:void 0,bytesReceived:Z(t,"bytesReceived"),bytesSent:Z(t,"bytesSent"),consentRequestsSent:Z(t,"consentRequestsSent"),currentRoundTripTime:Jv(t.stat("googRtt")),id:t.id,lastPacketReceivedTimestamp:void 0,lastPacketSentTimestamp:void 0,localCandidateId:t.stat("localCandidateId"),nominated:void 0,priority:void 0,readable:void 0,remoteCandidateId:t.stat("remoteCandidateId"),requestsReceived:Z(t,"requestsReceived"),requestsSent:Z(t,"requestsSent"),responsesReceived:Z(t,"responsesReceived"),responsesSent:Z(t,"responsesSent"),retransmissionsReceived:void 0,retransmissionsSent:void 0,state:void 0,timestamp:Date.parse(t.timestamp),totalRoundTripTime:void 0,transportId:t.stat("googChannelId"),type:"candidate-pair",writable:JT(t,"googWritable")}}function Uj(t){return{base64Certificate:t.stat("googDerBase64"),fingerprint:t.stat("googFingerprint"),fingerprintAlgorithm:t.stat("googFingerprintAlgorithm"),id:t.id,issuerCertificateId:t.stat("googIssuerId"),timestamp:Date.parse(t.timestamp),type:"certificate"}}function jj(t){return{bytesReceived:void 0,bytesSent:void 0,datachannelid:t.stat("datachannelid"),id:t.id,label:t.stat("label"),messagesReceived:void 0,messagesSent:void 0,protocol:t.stat("protocol"),state:t.stat("state"),timestamp:Date.parse(t.timestamp),transportId:t.stat("transportId"),type:"data-channel"}}function Jv(t){return isNaN(t)||t===""?void 0:parseInt(t,10)/1e3}function Bj(t){switch(t){case"peerreflexive":return"prflx";case"serverreflexive":return"srflx";case"host":case"relay":default:return t}}function Z(t,e){let n=t.stat(e);return Si(t,e)?parseInt(n,10):void 0}function Zv(t,e){let n=t.stat(e);return Si(t,e)?parseFloat(n):void 0}function JT(t,e){let n=t.stat(e);return Si(t,e)?n==="true"||n===!0:void 0}function Si(t,e){let n=t.stat(e);return typeof n<"u"&&n!==""}var Hj="PeerConnection is null",$j="WebRTC statistics are unsupported";function Wo(t,e){return typeof t.get=="function"?t.get(e):t.find(n=>n.id===e)}function ZT(t){if(!t)return Promise.reject(new x(Hj));if(typeof t.getStats!="function")return Promise.reject(new te($j));let e;try{e=t.getStats()}catch{e=new Promise(r=>t.getStats(r)).then(At.fromRTCStatsResponse)}return e}function QT(t,e){return e=Object.assign({createRTCSample:zj},e),ZT(t).then(e.createRTCSample)}function XT(t){return ZT(t).then(e=>{let{candidatePairs:n,localCandidates:r,remoteCandidates:i,transport:o}=Array.from(e.values()).reduce((c,u)=>{switch(["candidatePairs","localCandidates","remoteCandidates"].forEach(l=>{c[l]||(c[l]=[])}),u.type){case"candidate-pair":c.candidatePairs.push(u);break;case"local-candidate":c.localCandidates.push(u);break;case"remote-candidate":c.remoteCandidates.push(u);break;case"transport":u.selectedCandidatePairId&&(c.transport=u);break}return c},{}),s=n.find(c=>c.selected||o&&c.id===o.selectedCandidatePairId),a;return s&&(a={localCandidate:r.find(c=>c.id===s.localCandidateId),remoteCandidate:i.find(c=>c.id===s.remoteCandidateId)}),{iceCandidateStats:[...r,...i],selectedIceCandidatePairStats:a}})}function Wj(){}function zj(t){let e=null,n=new Wj,r;Array.from(t.values()).forEach(c=>{if(c.isRemote)return;let u=c.type.replace("-","");if(r=r||c.timestamp,c.remoteId){let l=Wo(t,c.remoteId);l&&l.roundTripTime&&(n.rtt=l.roundTripTime*1e3)}switch(u){case"inboundrtp":n.timestamp=n.timestamp||c.timestamp,n.jitter=c.jitter*1e3,n.packetsLost=c.packetsLost,n.packetsReceived=c.packetsReceived,n.bytesReceived=c.bytesReceived;break;case"outboundrtp":if(n.timestamp=c.timestamp,n.packetsSent=c.packetsSent,n.bytesSent=c.bytesSent,c.codecId){let l=Wo(t,c.codecId);n.codecName=l?l.mimeType&&l.mimeType.match(/(.*\/)?(.*)/)[2]:c.codecId}break;case"transport":e=c.id;break}}),n.timestamp||(n.timestamp=r);let i=Wo(t,e);if(!i)return n;let o=Wo(t,i.selectedCandidatePairId);if(!o)return n;let s=Wo(t,o.localCandidateId),a=Wo(t,o.remoteCandidateId);return n.rtt||(n.rtt=o&&o.currentRoundTripTime*1e3),Object.assign(n,{localAddress:s&&(s.address||s.ip),remoteAddress:a&&(a.address||a.ip)}),n}var Ai=class t extends eS.EventEmitter{constructor(e,n){super(),this._hasInsightsErrored=!1,this._log=new ae("PreflightTest"),this._networkTiming={},this._options={codecPreferences:[it.Codec.PCMU,it.Codec.Opus],edge:"roaming",fakeMicInput:!1,logLevel:"error",signalingTimeoutMs:1e4},this._status=t.Status.Connecting,Object.assign(this._options,n),this._samples=[],this._warnings=[],this._startTime=Date.now(),this._initDevice(e,Object.assign(Object.assign({},this._options),{fileInputStream:this._options.fakeMicInput?this._getStreamFromFile():void 0}));let r=["codecPreferences","edge","fakeMicInput","logLevel","signalingTimeoutMs"],i=["audioContext","deviceFactory","fileInputStream","getRTCIceCandidateStatsReport","iceServers","rtcConfiguration"];if(typeof n=="object"){let o=Object.assign({},n);Object.keys(o).forEach(s=>{!r.includes(s)&&!i.includes(s)&&delete o[s],i.includes(s)&&(o[s]=!0)}),this._log.debug(".constructor",JSON.stringify(o))}}stop(){this._log.debug(".stop");let e=new Ee.CallCancelledError;this._device?(this._device.once(be.EventName.Unregistered,()=>this._onFailed(e)),this._device.destroy()):this._onFailed(e)}_emitWarning(e,n,r){let i={name:e,description:n};r&&(i.rtcWarning=r),this._warnings.push(i),this._log.debug(`#${t.Events.Warning}`,JSON.stringify(i)),this.emit(t.Events.Warning,i)}_getCallQuality(e){return e>4.2?t.CallQuality.Excellent:e>=4.1&&e<=4.2?t.CallQuality.Great:e>=3.7&&e<=4?t.CallQuality.Good:e>=3.1&&e<=3.6?t.CallQuality.Fair:t.CallQuality.Degraded}_getReport(){var e,n,r;let i=this._getRTCStats(),o={start:this._startTime};this._endTime&&(o.end=this._endTime,o.duration=this._endTime-this._startTime);let s={callSid:this._callSid,edge:this._edge,iceCandidateStats:(n=(e=this._rtcIceCandidateStatsReport)===null||e===void 0?void 0:e.iceCandidateStats)!==null&&n!==void 0?n:[],networkTiming:this._networkTiming,samples:this._samples,selectedEdge:this._options.edge,stats:i,testTiming:o,totals:this._getRTCSampleTotals(),warnings:this._warnings},a=(r=this._rtcIceCandidateStatsReport)===null||r===void 0?void 0:r.selectedIceCandidatePairStats;return a&&(s.selectedIceCandidatePairStats=a,s.isTurnRequired=a.localCandidate.candidateType==="relay"||a.remoteCandidate.candidateType==="relay"),i&&(s.callQuality=this._getCallQuality(i.mos.average)),s}_getRTCSampleTotals(){if(this._latestSample)return Object.assign({},this._latestSample.totals)}_getRTCStats(){let e=this._samples.findIndex(r=>typeof r.mos=="number"&&r.mos>0),n=e>=0?this._samples.slice(e):[];if(!(!n||!n.length))return["jitter","mos","rtt"].reduce((r,i)=>{let o=n.map(s=>s[i]);return Object.assign(Object.assign({},r),{[i]:{average:Number((o.reduce((s,a)=>s+a)/o.length).toPrecision(5)),max:Math.max(...o),min:Math.min(...o)}})},{})}_getStreamFromFile(){let e=this._options.audioContext;if(!e)throw new te("Cannot fake input audio stream: AudioContext is not supported by this browser.");let n=new Audio(UT);n.addEventListener("canplaythrough",()=>n.play()),typeof n.setAttribute=="function"&&n.setAttribute("crossorigin","anonymous");let r=e.createMediaElementSource(n),i=e.createMediaStreamDestination();return r.connect(i),i.stream}_initDevice(e,n){try{this._device=new(n.deviceFactory||be)(e,{chunderw:n.chunderw,codecPreferences:n.codecPreferences,edge:n.edge,eventgw:n.eventgw,fileInputStream:n.fileInputStream,logLevel:n.logLevel,preflight:!0}),this._device.once(be.EventName.Registered,()=>{this._onDeviceRegistered()}),this._device.once(be.EventName.Error,r=>{this._onDeviceError(r)}),this._device.register()}catch(r){setTimeout(()=>{this._onFailed(r)});return}this._signalingTimeoutTimer=setTimeout(()=>{this._onDeviceError(new Oe.ConnectionError("WebSocket Connection Timeout"))},n.signalingTimeoutMs)}_onDeviceError(e){this._device.destroy(),this._onFailed(e)}_onDeviceRegistered(){return le(this,void 0,void 0,function*(){if(clearTimeout(this._echoTimer),clearTimeout(this._signalingTimeoutTimer),this._call=yield this._device.connect({rtcConfiguration:this._options.rtcConfiguration}),this._networkTiming.signaling={start:Date.now()},this._setupCallHandlers(this._call),this._edge=this._device.edge||void 0,this._options.fakeMicInput){this._echoTimer=setTimeout(()=>this._device.disconnectAll(),jT);let n=this._device.audio;n&&(n.disconnect(!1),n.outgoing(!1))}this._call.once("disconnect",()=>{this._device.once(be.EventName.Unregistered,()=>this._onUnregistered()),this._device.destroy()}),this._call._publisher.on("error",()=>{this._hasInsightsErrored||this._emitWarning("insights-connection-error","Received an error when attempting to connect to Insights gateway"),this._hasInsightsErrored=!0})})}_onFailed(e){clearTimeout(this._echoTimer),clearTimeout(this._signalingTimeoutTimer),this._releaseHandlers(),this._endTime=Date.now(),this._status=t.Status.Failed,this._log.debug(`#${t.Events.Failed}`,e),this.emit(t.Events.Failed,e)}_onUnregistered(){setTimeout(()=>{this._status!==t.Status.Failed&&(clearTimeout(this._echoTimer),clearTimeout(this._signalingTimeoutTimer),this._releaseHandlers(),this._endTime=Date.now(),this._status=t.Status.Completed,this._report=this._getReport(),this._log.debug(`#${t.Events.Completed}`,JSON.stringify(this._report)),this.emit(t.Events.Completed,this._report))},10)}_releaseHandlers(){[this._device,this._call].forEach(e=>{e&&e.eventNames().forEach(n=>e.removeAllListeners(n))})}_setupCallHandlers(e){this._options.fakeMicInput&&e.once("volume",()=>{e._mediaHandler.outputs.forEach(n=>n.audio.muted=!0)}),e.on("warning",(n,r)=>{this._emitWarning(n,"Received an RTCWarning. See .rtcWarning for the RTCWarning",r)}),e.once("accept",()=>{this._callSid=e._mediaHandler.callSid,this._status=t.Status.Connected,this._log.debug(`#${t.Events.Connected}`),this.emit(t.Events.Connected)}),e.on("sample",n=>le(this,void 0,void 0,function*(){this._latestSample||(this._rtcIceCandidateStatsReport=yield(this._options.getRTCIceCandidateStatsReport||XT)(e._mediaHandler.version.pc)),this._latestSample=n,this._samples.push(n),this._log.debug(`#${t.Events.Sample}`,JSON.stringify(n)),this.emit(t.Events.Sample,n)})),[{reportLabel:"peerConnection",type:"pcconnection"},{reportLabel:"ice",type:"iceconnection"},{reportLabel:"dtls",type:"dtlstransport"},{reportLabel:"signaling",type:"signaling"}].forEach(({type:n,reportLabel:r})=>{let i=`on${n}statechange`,o=e._mediaHandler[i];e._mediaHandler[i]=s=>{let a=this._networkTiming[r]=this._networkTiming[r]||{start:0};s==="connecting"||s==="checking"?a.start=Date.now():(s==="connected"||s==="stable")&&!a.duration&&(a.end=Date.now(),a.duration=a.end-a.start),o(s)}})}get callSid(){return this._callSid}get endTime(){return this._endTime}get latestSample(){return this._latestSample}get report(){return this._report}get startTime(){return this._startTime}get status(){return this._status}};(function(t){(function(e){e.Excellent="excellent",e.Great="great",e.Good="good",e.Fair="fair",e.Degraded="degraded"})(t.CallQuality||(t.CallQuality={})),(function(e){e.Completed="completed",e.Connected="connected",e.Failed="failed",e.Sample="sample",e.Warning="warning"})(t.Events||(t.Events={})),(function(e){e.Connecting="connecting",e.Connected="connected",e.Completed="completed",e.Failed="failed"})(t.Status||(t.Status={}))})(Ai||(Ai={}));var iS=ot(St());var nS=ot(St());var zo=globalThis.WebSocket,Gj=1e4,qj=5e3,tS=15e3,Kj=15e3,Yj=1/0,Jj=75e3,Zj=1e3,Qj=2e4,Xj=6e4,Rt=(function(t){return t.Connecting="connecting",t.Closed="closed",t.Open="open",t})(Rt||{}),rS=(()=>{class t extends nS.EventEmitter{constructor(n,r={}){super(),this.state=Rt.Closed,this._backoffStartTime={preferred:null,primary:null},this._connectedUri=null,this._log=new ae("WSTransport"),this._retryAfter=null,this._shouldFallback=!1,this._uriIndex=0,this._moveUriIndex=()=>{this._uriIndex++,this._uriIndex>=this._uris.length&&(this._uriIndex=0)},this._onSocketClose=i=>{if(this._log.error(`Received websocket close event code: ${i.code}. Reason: ${i.reason}`),i.code===1006||i.code===1015){this.emit("error",{code:31005,message:i.reason||"Websocket connection to Twilio's signaling servers were unexpectedly ended. If this is happening consistently, there may be an issue resolving the hostname provided. If a region or an edge is being specified in Device setup, ensure it is valid.",twilioError:new Oe.ConnectionError});let o=this.state===Rt.Open||this._previousState===Rt.Open;(this._shouldFallback||!o)&&this._moveUriIndex(),this._shouldFallback=!0}this._closeSocket()},this._onSocketError=i=>{this._log.error(`WebSocket received error: ${i.message}`),this.emit("error",{code:31e3,message:i.message||"WSTransport socket error",twilioError:new Oe.ConnectionDisconnected})},this._onSocketMessage=i=>{if(this._setHeartbeatTimeout(),this._socket&&i.data===`
`){this._socket.send(`
`),this._log.debug("heartbeat");return}if(i&&typeof i.data=="string"){this._log.debug(`Received: ${i.data}`);let{type:o,payload:s={}}=JSON.parse(i.data);o==="error"&&s.error&&s.error.retryAfter&&(this._retryAfter=s.error.retryAfter*1e3)}this.emit("message",i)},this._onSocketOpen=()=>{this._log.info("WebSocket opened successfully."),this._timeOpened=Date.now(),this._shouldFallback=!1,this._setState(Rt.Open),clearTimeout(this._connectTimeout),this._backoff&&this._resetBackoffs(),this._setHeartbeatTimeout(),this.emit("open")},this._options=Object.assign(Object.assign({},t.defaultConstructorOptions),r),this._uris=n,this._backoff=null}close(){this._log.info("WSTransport.close() called..."),this._close()}open(){if(this._log.info("WSTransport.open() called..."),this._socket&&(this._socket.readyState===zo.CONNECTING||this._socket.readyState===zo.OPEN)){this._log.info("WebSocket already open.");return}this._preferredUri?this._connect(this._preferredUri):this._connect(this._uris[this._uriIndex])}send(n){if(this._log.debug(`Sending: ${n}`),!this._socket||this._socket.readyState!==zo.OPEN)return this._log.debug("Cannot send message. WebSocket is not open."),!1;try{this._socket.send(n)}catch(r){return this._log.error("Error while sending message:",r.message),this._closeSocket(),!1}return!0}updatePreferredURI(n){this._preferredUri=n}updateURIs(n){typeof n=="string"&&(n=[n]),this._uris=n,this._uriIndex=0}_close(){this._setState(Rt.Closed),this._closeSocket()}_closeSocket(){if(clearTimeout(this._connectTimeout),clearTimeout(this._heartbeatTimeout),this._log.info("Closing and cleaning up WebSocket..."),!this._socket){this._log.info("No WebSocket to clean up.");return}this._socket.removeEventListener("close",this._onSocketClose),this._socket.removeEventListener("error",this._onSocketError),this._socket.removeEventListener("message",this._onSocketMessage),this._socket.removeEventListener("open",this._onSocketOpen),(this._socket.readyState===zo.CONNECTING||this._socket.readyState===zo.OPEN)&&this._socket.close(),this._backoff&&this._timeOpened&&Date.now()-this._timeOpened>Gj&&this._resetBackoffs(),this.state!==Rt.Closed&&(this._backoff||(this._backoff=this._setupBackoffs()),this._performBackoff()),delete this._socket,this.emit("close")}_connect(n,r){this._log.info(typeof r=="number"?`Attempting to reconnect (retry #${r})...`:"Attempting to connect..."),this._closeSocket(),this._setState(Rt.Connecting),this._connectedUri=n;try{this._socket=new this._options.WebSocket(this._connectedUri)}catch(i){this._log.error("Could not connect to endpoint:",i.message),this._close(),this.emit("error",{code:31e3,message:i.message||`Could not connect to ${this._connectedUri}`,twilioError:new Oe.ConnectionDisconnected});return}this._socket.addEventListener("close",this._onSocketClose),this._socket.addEventListener("error",this._onSocketError),this._socket.addEventListener("message",this._onSocketMessage),this._socket.addEventListener("open",this._onSocketOpen),delete this._timeOpened,this._connectTimeout=setTimeout(()=>{this._log.info("WebSocket connection attempt timed out."),this._moveUriIndex(),this._closeSocket()},this._options.connectTimeoutMs)}_performBackoff(){if(!this._backoff){this._log.info("No backoff instance to perform backoff.");return}this._preferredUri?(this._log.info("Preferred URI set; backing off."),this._backoff.preferred.backoff()):(this._log.info("Preferred URI not set; backing off."),this._backoff.primary.backoff())}_resetBackoffs(){if(!this._backoff){this._log.info("No backoff instance to reset.");return}this._backoff.preferred.removeAllListeners("backoff"),this._backoff.preferred.removeAllListeners("ready"),this._backoff.primary.removeAllListeners("backoff"),this._backoff.primary.removeAllListeners("ready"),this._backoff=null,this._retryAfter=null,this._backoffStartTime.preferred=null,this._backoffStartTime.primary=null}_setHeartbeatTimeout(){clearTimeout(this._heartbeatTimeout),this._heartbeatTimeout=setTimeout(()=>{this._log.info(`No messages received in ${tS/1e3} seconds. Reconnecting...`),this._shouldFallback=!0,this._closeSocket()},tS)}_setState(n){this._previousState=this.state,this.state=n}_setupBackoffs(){let n=this._retryAfter!==null&&this._preferredUri?this._retryAfter:null;n&&this._log.info(`Setting initial preferred backoff value to retryAfter: ${n}ms`);let r=n?this._options.maxRetryAfterDurationMs:this._options.maxPreferredDurationMs,i={factor:2,jitter:.4,max:n?this._options.maxRetryAfterDelayMs:this._options.maxPreferredDelayMs,min:n||100,useInitialValue:!!n};this._log.info("Initializing preferred transport backoff using config: ",i);let o=new Di(i);o.on("backoff",(c,u)=>{if(this.state===Rt.Closed){this._log.info("Preferred backoff initiated but transport state is closed; not attempting a connection.");return}this._log.info(`Will attempt to reconnect Websocket to preferred URI in ${u}ms`),c===0&&(this._backoffStartTime.preferred=Date.now(),this._log.info(`Preferred backoff start; ${this._backoffStartTime.preferred}`))}),o.on("ready",(c,u)=>{if(this.state===Rt.Closed){this._log.info("Preferred backoff ready but transport state is closed; not attempting a connection.");return}if(this._backoffStartTime.preferred===null){this._log.info("Preferred backoff start time invalid; not attempting a connection.");return}if(!this._backoff){this._log.info("Preferred backoff instance invalid; not attempting a connection.");return}if(Date.now()-this._backoffStartTime.preferred>r){this._log.info("Max preferred backoff attempt time exceeded; falling back to primary backoff."),this._preferredUri=null,this._backoff.primary.backoff();return}if(typeof this._preferredUri!="string"){this._log.info("Preferred URI cleared; falling back to primary backoff."),this._preferredUri=null,this._backoff.primary.backoff();return}this._connect(this._preferredUri,c+1)});let s={factor:2,jitter:.4,max:this._options.maxPrimaryDelayMs,min:this._uris&&this._uris.length>1?Math.floor(Math.random()*4001)+1e3:100};this._log.info("Initializing primary transport backoff using config: ",s);let a=new Di(s);return a.on("backoff",(c,u)=>{if(this.state===Rt.Closed){this._log.info("Primary backoff initiated but transport state is closed; not attempting a connection.");return}this._log.info(`Will attempt to reconnect WebSocket in ${u}ms`),c===0&&(this._backoffStartTime.primary=Date.now(),this._log.info(`Primary backoff start; ${this._backoffStartTime.primary}`))}),a.on("ready",(c,u)=>{if(this.state===Rt.Closed){this._log.info("Primary backoff ready but transport state is closed; not attempting a connection.");return}if(this._backoffStartTime.primary===null){this._log.info("Primary backoff start time invalid; not attempting a connection.");return}if(Date.now()-this._backoffStartTime.primary>this._options.maxPrimaryDurationMs){this._log.info("Max primary backoff attempt time exceeded; not attempting a connection.");return}this._connect(this._uris[this._uriIndex],c+1)}),{preferred:o,primary:a}}get uri(){return this._connectedUri}}return t.defaultConstructorOptions={WebSocket:zo,connectTimeoutMs:qj,maxPreferredDelayMs:Zj,maxPreferredDurationMs:Kj,maxPrimaryDelayMs:Qj,maxPrimaryDurationMs:Yj,maxRetryAfterDelayMs:Xj,maxRetryAfterDurationMs:Jj},t})();var eB="1.6",tB=30,ce=class t extends iS.EventEmitter{constructor(e,n,r){if(super(),!(this instanceof t))return new t(e,n,r);let i={TransportFactory:rS};r=r||{};for(let s in i)s in r||(r[s]=i[s]);this.options=r,this.token=e||"",this.status="disconnected",this.gateway=null,this.region=null,this._messageQueue=[],this._preferredUri=null,this._uris=n,this._handleTransportClose=this._handleTransportClose.bind(this),this._handleTransportError=this._handleTransportError.bind(this),this._handleTransportMessage=this._handleTransportMessage.bind(this),this._handleTransportOpen=this._handleTransportOpen.bind(this),this._log=new ae("PStream"),this.on("error",()=>{this._log.warn("Unexpected error handled in pstream")});let o=this;return this.addListener("ready",()=>{o.status="ready"}),this.addListener("offline",()=>{o.status="offline"}),this.addListener("close",()=>{o._log.info('Received "close" from server. Destroying PStream...'),o._destroy()}),this.transport=new this.options.TransportFactory(this._uris,{backoffMaxMs:this.options.backoffMaxMs,maxPreferredDurationMs:this.options.maxPreferredDurationMs}),Object.defineProperties(this,{uri:{enumerable:!0,get(){return this.transport.uri}}}),this.transport.on("close",this._handleTransportClose),this.transport.on("error",this._handleTransportError),this.transport.on("message",this._handleTransportMessage),this.transport.on("open",this._handleTransportOpen),this.transport.open(),this}};ce.prototype._handleTransportClose=function(){this.emit("transportClose"),this.status!=="disconnected"&&(this.status!=="offline"&&this.emit("offline",this),this.status="disconnected")};ce.prototype._handleTransportError=function(t){if(!t){this.emit("error",{error:{code:31e3,message:"Websocket closed without a provided reason",twilioError:new Oe.ConnectionDisconnected}});return}this.emit("error",typeof t.code<"u"?{error:t}:t)};ce.prototype._handleTransportMessage=function(t){if(!t||!t.data||typeof t.data!="string")return;let{type:e,payload:n={}}=JSON.parse(t.data);this.gateway=n.gateway||this.gateway,this.region=n.region||this.region,e==="error"&&n.error&&(n.error.twilioError=new Oe.ConnectionError),this.emit(e,n)};ce.prototype._handleTransportOpen=function(){this.status="connected",this.setToken(this.token),this.emit("transportOpen"),this._messageQueue.splice(0,this._messageQueue.length).forEach(e=>this._publish(...e))};ce.toString=()=>"[Twilio.PStream class]";ce.prototype.toString=()=>"[Twilio.PStream instance]";ce.prototype.setToken=function(t){this._log.info("Setting token and publishing listen"),this.token=t;let e=0,n=this.options.maxPreferredDurationMs;this._log.info(`maxPreferredDurationMs:${n}`),typeof n=="number"&&n>=0&&(e=Math.min(Math.ceil(n/1e3),tB)),this._log.info(`reconnectTimeout:${e}`);let r={browserinfo:nB(),reconnectTimeout:e,token:t};this._publish("listen",r)};ce.prototype.sendMessage=function(t,e,n="application/json",r,i){let o={callsid:t,content:e,contenttype:n,messagetype:r,voiceeventsid:i};this._publish("message",o,!0)};ce.prototype.register=function(t){let e={media:t};this._publish("register",e,!0)};ce.prototype.invite=function(t,e,n){let r={callsid:e,sdp:t,twilio:n?{params:n}:{}};this._publish("invite",r,!0)};ce.prototype.reconnect=function(t,e,n){let r={callsid:e,reconnect:n,sdp:t,twilio:{}};this._publish("invite",r,!0)};ce.prototype.answer=function(t,e){this._publish("answer",{sdp:t,callsid:e},!0)};ce.prototype.dtmf=function(t,e){this._publish("dtmf",{callsid:t,dtmf:e},!0)};ce.prototype.hangup=function(t,e){let n=e?{callsid:t,message:e}:{callsid:t};this._publish("hangup",n,!0)};ce.prototype.reject=function(t){this._publish("reject",{callsid:t},!0)};ce.prototype.reinvite=function(t,e){this._publish("reinvite",{sdp:t,callsid:e},!1)};ce.prototype._destroy=function(){this.transport.removeListener("close",this._handleTransportClose),this.transport.removeListener("error",this._handleTransportError),this.transport.removeListener("message",this._handleTransportMessage),this.transport.removeListener("open",this._handleTransportOpen),this.transport.close(),this.emit("offline",this)};ce.prototype.destroy=function(){return this._log.info("PStream.destroy() called..."),this._destroy(),this};ce.prototype.updatePreferredURI=function(t){this._preferredUri=t,this.transport.updatePreferredURI(t)};ce.prototype.updateURIs=function(t){this._uris=t,this.transport.updateURIs(this._uris)};ce.prototype.publish=function(t,e){return this._publish(t,e,!0)};ce.prototype._publish=function(t,e,n){let r=JSON.stringify({payload:e,type:t,version:eB});!!this.transport.send(r)||(this.emit("error",{error:{code:31009,message:"No transport available to send or receive messages",twilioError:new Ee.TransportError}}),n&&this._messageQueue.push([t,e,!0]))};function nB(){let t=typeof navigator<"u"?navigator:{};return{browser:{platform:t.platform||"unknown",userAgent:t.userAgent||"unknown"},p:"browser",plugin:"rtc",v:Fn}}var pe=(function(t){return t.Sydney="sydney",t.SaoPaulo="sao-paulo",t.Dublin="dublin",t.Frankfurt="frankfurt",t.Tokyo="tokyo",t.Singapore="singapore",t.Ashburn="ashburn",t.Umatilla="umatilla",t.Roaming="roaming",t.AshburnIx="ashburn-ix",t.SanJoseIx="san-jose-ix",t.LondonIx="london-ix",t.FrankfurtIx="frankfurt-ix",t.SingaporeIx="singapore-ix",t.SydneyIx="sydney-ix",t.TokyoIx="tokyo-ix",t})(pe||{}),Q=(function(t){return t.Au1="au1",t.Au1Ix="au1-ix",t.Br1="br1",t.De1="de1",t.De1Ix="de1-ix",t.Gll="gll",t.Ie1="ie1",t.Ie1Ix="ie1-ix",t.Ie1Tnx="ie1-tnx",t.Jp1="jp1",t.Jp1Ix="jp1-ix",t.Sg1="sg1",t.Sg1Ix="sg1-ix",t.Sg1Tnx="sg1-tnx",t.Us1="us1",t.Us1Ix="us1-ix",t.Us1Tnx="us1-tnx",t.Us2="us2",t.Us2Ix="us2-ix",t.Us2Tnx="us2-tnx",t})(Q||{}),rB={ASIAPAC_SINGAPORE:Q.Sg1,ASIAPAC_SYDNEY:Q.Au1,ASIAPAC_TOKYO:Q.Jp1,EU_FRANKFURT:Q.De1,EU_IRELAND:Q.Ie1,SOUTH_AMERICA_SAO_PAULO:Q.Br1,US_EAST_VIRGINIA:Q.Us1,US_WEST_OREGON:Q.Us2},sS={[Q.Au1]:pe.Sydney,[Q.Br1]:pe.SaoPaulo,[Q.Ie1]:pe.Dublin,[Q.De1]:pe.Frankfurt,[Q.Jp1]:pe.Tokyo,[Q.Sg1]:pe.Singapore,[Q.Us1]:pe.Ashburn,[Q.Us2]:pe.Umatilla,[Q.Gll]:pe.Roaming,[Q.Us1Ix]:pe.AshburnIx,[Q.Us2Ix]:pe.SanJoseIx,[Q.Ie1Ix]:pe.LondonIx,[Q.De1Ix]:pe.FrankfurtIx,[Q.Sg1Ix]:pe.SingaporeIx,[Q.Au1Ix]:pe.SydneyIx,[Q.Jp1Ix]:pe.TokyoIx,[Q.Us1Tnx]:pe.AshburnIx,[Q.Us2Tnx]:pe.AshburnIx,[Q.Ie1Tnx]:pe.LondonIx,[Q.Sg1Tnx]:pe.SingaporeIx},iB=pe.Roaming,oB="eventgw.twilio.com";function oS(t){return`voice-js.${t}.twilio.com`}function Qv(t){return t?`eventgw.${t}.twilio.com`:oB}function Xv(t){return`wss://${t}/signal`}function ey(t){if(t&&typeof t!="string"&&!Array.isArray(t))throw new x("If `edge` is provided, it must be of type `string` or an array of strings.");let e;return t?e=(Array.isArray(t)?t:[t]).map(r=>oS(r)):e=[oS(iB)],e}function aS(t){return rB[t]||null}var cS={0:"PCMU",8:"PCMA"},sB=111,aB=51e4,cB=6e3;function uS(t){let[,e,n]=/a=rtpmap:(\d+) (\S+)/m.exec(t)||[null,"",""],r=new RegExp(`a=fmtp:${e} (\\S+)`,"m"),[,i]=r.exec(t)||[null,""];return{codecName:n,codecParams:i}}function lS(t){return $a(window,window.navigator)?t.split(`
`).filter(e=>e.indexOf("a=ice-lite")===-1).join(`
`):t}function ty(t,e){if(typeof e!="number"||e<cB||e>aB)return t;let n=/a=rtpmap:(\d+) opus/m.exec(t),r=n&&n.length?n[1]:sB,i=new RegExp(`a=fmtp:${r}`);return t.split(`
`).map(s=>i.test(s)?s+`;maxaveragebitrate=${e}`:s).join(`
`)}function ny(t,e){let n=uB(t);return[t.split(`\r
m=`)[0]].concat(n.map(i=>{if(!/^m=(audio|video)/.test(i))return i;let o=i.match(/^m=(audio|video)/)[1],s=lB(i),a=dB(s,e),c=fB(a,i),u=s.get("pcma")||[],l=s.get("pcmu")||[];return(o==="audio"?new Set(u.concat(l)):new Set).has(a[0])?c.replace(/\r\nb=(AS|TIAS):([0-9]+)/g,""):c})).join(`\r
`)}function uB(t,e,n){return t.replace(/\r\n\r\n$/,`\r
`).split(`\r
m=`).slice(1).map(r=>`m=${r}`).filter(r=>{let i=new RegExp("m=.*","gm"),o=new RegExp("a=.*","gm");return i.test(r)&&o.test(r)})}function lB(t){return Array.from(hB(t)).reduce((e,n)=>{let r=n[0],i=n[1],o=e.get(i)||[];return e.set(i,o.concat(r))},new Map)}function dB(t,e){e=e.map(o=>o.toLowerCase());let n=Fd(e,o=>t.get(o)||[]),r=Ha(Array.from(t.keys()),e),i=Fd(r,o=>t.get(o));return n.concat(i)}function fB(t,e){let n=e.split(`\r
`),r=n[0],i=n.slice(1);return r=r.replace(/([0-9]+\s?)+$/,t.join(" ")),[r].concat(i).join(`\r
`)}function hB(t){return pB(t).reduce((e,n)=>{let r=new RegExp(`a=rtpmap:${n} ([^/]+)`),i=t.match(r),o=i?i[1].toLowerCase():cS[n]?cS[n].toLowerCase():"";return e.set(n,o)},new Map)}function pB(t){let n=t.split(`\r
`)[0].match(/([0-9]+)/g);return n?n.slice(1).map(r=>parseInt(r,10)):[]}function et(t){if(this.log=new ae("RTCPC"),typeof window>"u"){this.log.info("No RTCPeerConnection implementation available. The window object was not found.");return}t&&t.RTCPeerConnection?this.RTCPeerConnection=t.RTCPeerConnection:typeof window.RTCPeerConnection=="function"?this.RTCPeerConnection=window.RTCPeerConnection:typeof window.webkitRTCPeerConnection=="function"?this.RTCPeerConnection=webkitRTCPeerConnection:typeof window.mozRTCPeerConnection=="function"?(this.RTCPeerConnection=mozRTCPeerConnection,window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate):this.log.info("No RTCPeerConnection implementation available")}et.prototype.create=function(t){this.pc=new this.RTCPeerConnection(t)};et.prototype.createModernConstraints=t=>{if(typeof t>"u")return null;let e=Object.assign({},t);return typeof webkitRTCPeerConnection<"u"&&!$o()?(e.mandatory={},typeof t.audio<"u"&&(e.mandatory.OfferToReceiveAudio=t.audio),typeof t.video<"u"&&(e.mandatory.OfferToReceiveVideo=t.video)):(typeof t.audio<"u"&&(e.offerToReceiveAudio=t.audio),typeof t.video<"u"&&(e.offerToReceiveVideo=t.video)),delete e.audio,delete e.video,e};et.prototype.createOffer=function(t,e,n,r){return e=this.createModernConstraints(e),fS(this.pc.createOffer,this.pc)(e).then(i=>{if(!this.pc)return Promise.resolve();let o=ty(i.sdp,t);return Hd(this.pc.setLocalDescription,this.pc)(new RTCSessionDescription({sdp:o,type:"offer"}))}).then(n,r)};et.prototype.createAnswer=function(t,e,n,r){return e=this.createModernConstraints(e),fS(this.pc.createAnswer,this.pc)(e).then(i=>{if(!this.pc)return Promise.resolve();let o=ty(i.sdp,t);return Hd(this.pc.setLocalDescription,this.pc)(new RTCSessionDescription({sdp:o,type:"answer"}))}).then(n,r)};et.prototype.processSDP=function(t,e,n,r,i,o){n=ny(n,e);let s=new RTCSessionDescription({sdp:n,type:"offer"});return Hd(this.pc.setRemoteDescription,this.pc)(s).then(()=>{this.createAnswer(t,r,i,o)})};et.prototype.getSDP=function(){return this.pc.localDescription.sdp};et.prototype.processAnswer=function(t,e,n,r){return this.pc?(e=ny(e,t),Hd(this.pc.setRemoteDescription,this.pc)(new RTCSessionDescription({sdp:e,type:"answer"})).then(n,r)):Promise.resolve()};et.test=()=>{if(typeof navigator=="object"){let t=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.getUserMedia;if($o(navigator))return!1;if(t&&typeof window.RTCPeerConnection=="function")return!0;if(t&&typeof window.webkitRTCPeerConnection=="function")return!0;if(t&&typeof window.mozRTCPeerConnection=="function"){try{if(typeof new window.mozRTCPeerConnection().getLocalStreams!="function")return!1}catch{return!1}return!0}else if(typeof RTCIceGatherer<"u")return!0}return!1};function dS(t,e,n,r){return function(){let i=Array.prototype.slice.call(arguments);return new Promise(o=>{let s=t.apply(e,i);if(!r){o(s);return}if(typeof s=="object"&&typeof s.then=="function")o(s);else throw new Error}).catch(()=>new Promise((o,s)=>{t.apply(e,n?[o,s].concat(i):i.concat([o,s]))}))}}function fS(t,e){return dS(t,e,!0,!0)}function Hd(t,e){return dS(t,e,!1,!1)}var gB=15e3,mB="none",vB="timeout",yB="new",hS=50;function b(t,e,n){if(!t||!e)throw new x("Audiohelper, and pstream are required arguments");if(!(this instanceof b))return new b(t,e,n);this._log=new ae("PeerConnection");function r(){this._log.warn("Unexpected noop call in peerconnection")}this.onaudio=r,this.onopen=r,this.onerror=r,this.onclose=r,this.ondisconnected=r,this.onfailed=r,this.onconnected=r,this.onreconnected=r,this.onsignalingstatechange=r,this.ondtlstransportstatechange=r,this.onicegatheringfailure=r,this.onicegatheringstatechange=r,this.oniceconnectionstatechange=r,this.onpcconnectionstatechange=r,this.onicecandidate=r,this.onselectedcandidatepairchange=r,this.onvolume=r,this.version=null,this.pstream=e,this.stream=null,this.sinkIds=new Set(["default"]),this.outputs=new Map,this.status="connecting",this.callSid=null,this.isMuted=!1;let i=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);return this._isSinkSupported=!!i&&typeof HTMLAudioElement<"u"&&HTMLAudioElement.prototype.setSinkId,this._audioContext=i&&t._audioContext,this._audioHelper=t,this._audioProcessorEventObserver=t._getAudioProcessorEventObserver(),this._hasIceCandidates=!1,this._hasIceGatheringFailures=!1,this._iceGatheringTimeoutId=null,this._masterAudio=null,this._masterAudioDeviceId=null,this._mediaStreamSource=null,this._dtmfSender=null,this._dtmfSenderUnsupported=!1,this._callEvents=[],this._nextTimeToPublish=Date.now(),this._onAnswerOrRinging=r,this._onHangup=r,this._remoteStream=null,this._shouldManageStream=!0,this._iceState=yB,this.options=n=n||{},this.navigator=n.navigator||(typeof navigator<"u"?navigator:null),this.util=n.util||Wa,this.codecPreferences=n.codecPreferences,this._onAudioProcessorAdded=o=>{this._handleAudioProcessorEvent(o,!0)},this._onAudioProcessorRemoved=o=>{this._handleAudioProcessorEvent(o,!1)},this._audioProcessorEventObserver.on("add",this._onAudioProcessorAdded),this._audioProcessorEventObserver.on("remove",this._onAudioProcessorRemoved),this}b.prototype.uri=function(){return this._uri};b.prototype.openDefaultDeviceWithConstraints=function(t){return this._audioHelper._openDefaultDeviceWithConstraints(t).then(this._setInputTracksFromStream.bind(this,!1))};b.prototype.setInputTracksFromStream=function(t){let e=this;return this._setInputTracksFromStream(!0,t).then(()=>{e._shouldManageStream=!1})};b.prototype._createAnalyser=(t,e)=>{e=Object.assign({fftSize:32,smoothingTimeConstant:.3},e);let n=t.createAnalyser();for(let r in e)n[r]=e[r];return n};b.prototype._setVolumeHandler=function(t){this.onvolume=t};b.prototype._startPollingVolume=function(){if(!this._audioContext||!this.stream||!this._remoteStream)return;let t=this._audioContext,n=(this._inputAnalyser=this._createAnalyser(t)).frequencyBinCount,r=new Uint8Array(n);this._inputAnalyser2=this._createAnalyser(t,{maxDecibels:0,minDecibels:-127,smoothingTimeConstant:0});let o=(this._outputAnalyser=this._createAnalyser(t)).frequencyBinCount,s=new Uint8Array(o);this._outputAnalyser2=this._createAnalyser(t,{maxDecibels:0,minDecibels:-127,smoothingTimeConstant:0}),this._updateInputStreamSource(this.stream),this._updateOutputStreamSource(this._remoteStream);let a=this;setTimeout(function c(){if(a._audioContext){if(a.status==="closed"){a._inputAnalyser.disconnect(),a._outputAnalyser.disconnect(),a._inputAnalyser2.disconnect(),a._outputAnalyser2.disconnect();return}}else return;a._inputAnalyser.getByteFrequencyData(r);let u=a.util.average(r);a._inputAnalyser2.getByteFrequencyData(r);let l=a.util.average(r);a._outputAnalyser.getByteFrequencyData(s);let d=a.util.average(s);a._outputAnalyser2.getByteFrequencyData(s);let f=a.util.average(s);a.onvolume(u/255,d/255,l,f),setTimeout(c,hS)},hS)};b.prototype._stopStream=function(){this._shouldManageStream&&this._audioHelper._stopDefaultInputDeviceStream()};b.prototype._updateInputStreamSource=function(t){this._inputStreamSource&&this._inputStreamSource.disconnect();try{this._inputStreamSource=this._audioContext.createMediaStreamSource(t),this._inputStreamSource.connect(this._inputAnalyser),this._inputStreamSource.connect(this._inputAnalyser2)}catch(e){this._log.warn("Unable to update input MediaStreamSource",e),this._inputStreamSource=null}};b.prototype._updateOutputStreamSource=function(t){this._outputStreamSource&&this._outputStreamSource.disconnect();try{this._outputStreamSource=this._audioContext.createMediaStreamSource(t),this._outputStreamSource.connect(this._outputAnalyser),this._outputStreamSource.connect(this._outputAnalyser2)}catch(e){this._log.warn("Unable to update output MediaStreamSource",e),this._outputStreamSource=null}};b.prototype._setInputTracksFromStream=function(t,e){if(!e)return Promise.reject(new x("Can not set input stream to null while in a call"));if(!e.getAudioTracks().length)return Promise.reject(new x("Supplied input stream has no audio tracks"));let n=this.stream,r=()=>(this.mute(this.isMuted),Promise.resolve(this.stream));if(!n)this.stream=t?pS(e,this.options.MediaStream):e;else return this._shouldManageStream&&this._stopStream(),this._sender||(this._sender=this.version.pc.getSenders()[0]),this._sender.replaceTrack(e.getAudioTracks()[0]).then(()=>(this._updateInputStreamSource(e),this.stream=t?pS(e,this.options.MediaStream):e,r()));return r()};b.prototype._onInputDevicesChanged=function(){if(!this.stream)return;this.stream.getAudioTracks().every(e=>e.readyState==="ended")&&this._shouldManageStream&&this.openDefaultDeviceWithConstraints({audio:!0})};b.prototype._onIceGatheringFailure=function(t){this._hasIceGatheringFailures=!0,this.onicegatheringfailure(t)};b.prototype._onMediaConnectionStateChange=function(t){let e=this._iceState;if(e===t||t!=="connected"&&t!=="disconnected"&&t!=="failed")return;this._iceState=t;let n;switch(t){case"connected":e==="disconnected"||e==="failed"?(n="ICE liveliness check succeeded. Connection with Twilio restored",this._log.info(n),this.onreconnected(n)):(n="Media connection established.",this._log.info(n),this.onconnected(n)),this._stopIceGatheringTimeout(),this._hasIceGatheringFailures=!1;break;case"disconnected":n="ICE liveliness check failed. May be having trouble connecting to Twilio",this._log.warn(n),this.ondisconnected(n);break;case"failed":n="Connection with Twilio was interrupted.",this._log.warn(n),this.onfailed(n);break}};b.prototype._setSinkIds=function(t){return this._isSinkSupported?(this.sinkIds=new Set(t.forEach?t:[t]),this.version?this._updateAudioOutputs():Promise.resolve()):Promise.reject(new te("Audio output selection is not supported by this browser"))};b.prototype._startIceGatheringTimeout=function(){this._stopIceGatheringTimeout(),this._iceGatheringTimeoutId=setTimeout(()=>{this._onIceGatheringFailure(vB)},gB)};b.prototype._stopIceGatheringTimeout=function(){clearInterval(this._iceGatheringTimeoutId)};b.prototype._updateAudioOutputs=function(){let e=Array.from(this.sinkIds).filter(function(o){return!this.outputs.has(o)},this),n=Array.from(this.outputs.keys()).filter(function(o){return!this.sinkIds.has(o)},this),r=this,i=e.map(this._createAudioOutput,this);return Promise.all(i).then(()=>Promise.all(n.map(r._removeAudioOutput,r)))};b.prototype._createAudio=function(e){let n=new Audio(e);return this.onaudio(n),n};b.prototype._createAudioOutput=function(e){let n=null;this._mediaStreamSource&&(n=this._audioContext.createMediaStreamDestination(),this._mediaStreamSource.connect(n));let r=this._createAudio();$d(r,n&&n.stream?n.stream:this.pcStream,this._audioHelper).catch(()=>this._log.error("Error attaching stream to element (_createAudioOutput)."));let i=this;return r.setSinkId(e).then(()=>r.play()).then(()=>{i.outputs.set(e,{audio:r,dest:n})})};b.prototype._removeAudioOutputs=function(){return this._masterAudio&&typeof this._masterAudioDeviceId<"u"&&(this._disableOutput(this,this._masterAudioDeviceId),this.outputs.delete(this._masterAudioDeviceId),this._masterAudioDeviceId=null,this._masterAudio.paused||this._masterAudio.pause(),typeof this._masterAudio.srcObject<"u"?this._masterAudio.srcObject=null:this._masterAudio.src="",this._masterAudio=null),Array.from(this.outputs.keys()).map(this._removeAudioOutput,this)};b.prototype._disableOutput=function(e,n){let r=e.outputs.get(n);r&&(r.audio&&(r.audio.pause(),r.audio.src=""),r.dest&&r.dest.disconnect())};b.prototype._reassignMasterOutput=function(e,n){let r=e.outputs.get(n);e.outputs.delete(n);let i=this,o=Array.from(e.outputs.keys())[0],s=typeof o=="string"?o:"default";return r.audio.setSinkId(s).then(()=>{i._disableOutput(e,s),e.outputs.set(s,r),e._masterAudioDeviceId=s}).catch(function(){e.outputs.set(n,r),i._log.info("Could not reassign master output. Attempted to roll back.")})};b.prototype._removeAudioOutput=function(e){return this._masterAudioDeviceId===e?this._reassignMasterOutput(this,e):(this._disableOutput(this,e),this.outputs.delete(e),Promise.resolve())};b.prototype._onAddTrack=function(e,n){let r=e._masterAudio=this._createAudio();$d(r,n,this._audioHelper).then(()=>r.play()).catch(()=>e._log.error("Error attaching stream to element (_onAddTrack)."));let i=Array.from(e.outputs.keys())[0],o=typeof i=="string"?i:"default";e._masterAudioDeviceId=o,e.outputs.set(o,{audio:r});try{e._mediaStreamSource=e._audioContext.createMediaStreamSource(n)}catch(s){this._log.warn("Unable to create a MediaStreamSource from onAddTrack",s),this._mediaStreamSource=null}e.pcStream=n,e._updateAudioOutputs()};b.prototype._fallbackOnAddTrack=function(e,n){let r=document&&document.createElement("audio");$d(r,n,this._audioHelper).then(()=>r.play()).catch(()=>e._log.error("Error attaching stream to element (_fallbackOnAddTrack).")),e.outputs.set("default",{audio:r})};b.prototype._setEncodingParameters=function(t){if(!t||!this._sender||typeof this._sender.getParameters!="function"||typeof this._sender.setParameters!="function")return;let e=this._sender.getParameters();!e.priority&&!(e.encodings&&e.encodings.length)||(e.priority="high",e.encodings&&e.encodings.length&&e.encodings.forEach(n=>{n.priority="high",n.networkPriority="high"}),this._sender.setParameters(e))};b.prototype._setupPeerConnection=function(t){let e=this,n=new(this.options.rtcpcFactory||et)({RTCPeerConnection:this.options.RTCPeerConnection});n.create(t),_B(n.pc,this.stream);let r=RTCRtpReceiver.getCapabilities("audio").codecs;this._log.debug("sorting codecs",r,this.codecPreferences);let i=Yv(r,this.codecPreferences),[o]=n.pc.getTransceivers();this._log.debug("setting sorted codecs",i),o.setCodecPreferences(i);let s="ontrack"in n.pc?"ontrack":"onaddstream";return n.pc[s]=a=>{let c=e._remoteStream=a.stream||a.streams[0];typeof n.pc.getSenders=="function"&&(this._sender=n.pc.getSenders()[0]),e._isSinkSupported?e._onAddTrack(e,c):e._fallbackOnAddTrack(e,c),e._startPollingVolume()},n};b.prototype._maybeSetIceAggressiveNomination=function(t){return this.options.forceAggressiveIceNomination?lS(t):t};b.prototype._setupChannel=function(){let t=this.version.pc;this.version.pc.onopen=()=>{this.status="open",this.onopen()},this.version.pc.onstatechange=()=>{this.version.pc&&this.version.pc.readyState==="stable"&&(this.status="open",this.onopen())},this.version.pc.onsignalingstatechange=()=>{let e=t.signalingState;this._log.info(`signalingState is "${e}"`),this.version.pc&&this.version.pc.signalingState==="stable"&&(this.status="open",this.onopen()),this.onsignalingstatechange(t.signalingState)},t.onconnectionstatechange=e=>{let n=t.connectionState;if(!n&&e&&e.target){let r=e.target;n=r.connectionState||r.connectionState_,this._log.info(`pc.connectionState not detected. Using target PC. State=${n}`)}n?this._log.info(`pc.connectionState is "${n}"`):this._log.warn(`onconnectionstatechange detected but state is "${n}"`),this.onpcconnectionstatechange(n),this._onMediaConnectionStateChange(n)},t.onicecandidate=e=>{let{candidate:n}=e;n&&(this._hasIceCandidates=!0,this.onicecandidate(n),this._setupRTCIceTransportListener()),this._log.info(`ICE Candidate: ${JSON.stringify(n)}`)},t.onicegatheringstatechange=()=>{let e=t.iceGatheringState;e==="gathering"?this._startIceGatheringTimeout():e==="complete"&&(this._stopIceGatheringTimeout(),this._hasIceCandidates||this._onIceGatheringFailure(mB),this._hasIceCandidates&&this._hasIceGatheringFailures&&this._startIceGatheringTimeout()),this._log.info(`pc.iceGatheringState is "${t.iceGatheringState}"`),this.onicegatheringstatechange(e)},t.oniceconnectionstatechange=()=>{this._log.info(`pc.iceConnectionState is "${t.iceConnectionState}"`),this.oniceconnectionstatechange(t.iceConnectionState),this._onMediaConnectionStateChange(t.iceConnectionState)}};b.prototype._initializeMediaStream=function(t){return this.status==="open"?!1:this.pstream.status==="disconnected"?(this.onerror({info:{code:31e3,message:"Cannot establish connection. Client is disconnected",twilioError:new Oe.ConnectionDisconnected}}),this.close(),!1):(this.version=this._setupPeerConnection(t),this._setupChannel(),!0)};b.prototype._removeReconnectionListeners=function(){this.pstream&&(this.pstream.removeListener("answer",this._onAnswerOrRinging),this.pstream.removeListener("hangup",this._onHangup))};b.prototype._setupRTCDtlsTransportListener=function(){let t=this.getRTCDtlsTransport();if(!t||t.onstatechange)return;let e=()=>{this._log.info(`dtlsTransportState is "${t.state}"`),this.ondtlstransportstatechange(t.state)};e(),t.onstatechange=e};b.prototype._setupRTCIceTransportListener=function(){let t=this._getRTCIceTransport();!t||t.onselectedcandidatepairchange||(t.onselectedcandidatepairchange=()=>this.onselectedcandidatepairchange(t.getSelectedCandidatePair()))};b.prototype.iceRestart=function(){this._log.info("Attempting to restart ICE..."),this._hasIceCandidates=!1,this.version.createOffer(this.options.maxAverageBitrate,{iceRestart:!0}).then(()=>{this._removeReconnectionListeners(),this._onAnswerOrRinging=t=>{if(this._removeReconnectionListeners(),!t.sdp||this.version.pc.signalingState!=="have-local-offer"){let n=`Invalid state or param during ICE Restart:hasSdp:${!!t.sdp}, signalingState:${this.version.pc.signalingState}`;this._log.warn(n);return}let e=this._maybeSetIceAggressiveNomination(t.sdp);this._answerSdp=e,this.status!=="closed"&&this.version.processAnswer(this.codecPreferences,e,null,n=>{let r=n&&n.message?n.message:n;this._log.error(`Failed to process answer during ICE Restart. Error: ${r}`)})},this._onHangup=()=>{this._log.info("Received hangup during ICE Restart"),this._removeReconnectionListeners()},this.pstream.on("answer",this._onAnswerOrRinging),this.pstream.on("hangup",this._onHangup),this.pstream.reinvite(this.version.getSDP(),this.callSid)}).catch(t=>{let e=t&&t.message?t.message:t;this._log.error(`Failed to createOffer during ICE Restart. Error: ${e}`),this.onfailed(e)})};b.prototype.makeOutgoingCall=function(t,e,n,r,i){if(!this._initializeMediaStream(r))return;let o=this;this.callSid=n;function s(){o.options&&o._setEncodingParameters(o.options.dscp),i(o.version.pc)}function a(l){let d=l.message||l;o.onerror({info:{code:31e3,message:`Error processing answer: ${d}`,twilioError:new vt.ClientRemoteDescFailed}})}this._onAnswerOrRinging=l=>{if(!l.sdp)return;let d=this._maybeSetIceAggressiveNomination(l.sdp);o._answerSdp=d,o.status!=="closed"&&o.version.processAnswer(this.codecPreferences,d,s,a),o.pstream.removeListener("answer",o._onAnswerOrRinging),o.pstream.removeListener("ringing",o._onAnswerOrRinging)},this.pstream.on("answer",this._onAnswerOrRinging),this.pstream.on("ringing",this._onAnswerOrRinging);function c(){o.status!=="closed"&&(e?o.pstream.reconnect(o.version.getSDP(),o.callSid,e):o.pstream.invite(o.version.getSDP(),o.callSid,t),o._setupRTCDtlsTransportListener())}function u(l){let d=l.message||l;o.onerror({info:{code:31e3,message:`Error creating the offer: ${d}`,twilioError:new vt.ClientLocalDescFailed}})}this.version.createOffer(this.options.maxAverageBitrate,{audio:!0},c,u)};b.prototype.answerIncomingCall=function(t,e,n,r){if(!this._initializeMediaStream(n))return;e=this._maybeSetIceAggressiveNomination(e),this._answerSdp=e.replace(/^a=setup:actpass$/gm,"a=setup:passive"),this.callSid=t;let i=this;function o(){i.status!=="closed"&&(i.pstream.answer(i.version.getSDP(),t),i.options&&i._setEncodingParameters(i.options.dscp),r(i.version.pc),i._setupRTCDtlsTransportListener())}function s(a){let c=a.message||a;i.onerror({info:{code:31e3,message:`Error creating the answer: ${c}`,twilioError:new vt.ClientRemoteDescFailed}})}this.version.processSDP(this.options.maxAverageBitrate,this.codecPreferences,e,{audio:!0},o,s)};b.prototype.close=function(){this.version&&this.version.pc&&(this.version.pc.signalingState!=="closed"&&this.version.pc.close(),this.version.pc=null),this.stream&&(this.mute(!1),this._stopStream()),this.stream=null,this._removeReconnectionListeners(),this._stopIceGatheringTimeout(),this._audioHelper._destroyRemoteProcessedStream(),this._audioProcessorEventObserver.removeListener("add",this._onAudioProcessorAdded),this._audioProcessorEventObserver.removeListener("remove",this._onAudioProcessorRemoved),Promise.all(this._removeAudioOutputs()).catch(()=>{}),this._mediaStreamSource&&this._mediaStreamSource.disconnect(),this._inputAnalyser&&this._inputAnalyser.disconnect(),this._outputAnalyser&&this._outputAnalyser.disconnect(),this._inputAnalyser2&&this._inputAnalyser2.disconnect(),this._outputAnalyser2&&this._outputAnalyser2.disconnect(),this.status="closed",this.onclose()};b.prototype.reject=function(t){this.callSid=t};b.prototype.ignore=function(t){this.callSid=t};b.prototype.mute=function(t){this.isMuted=t,this.stream&&(this._sender&&this._sender.track?this._sender.track.enabled=!t:(typeof this.stream.getAudioTracks=="function"?this.stream.getAudioTracks():this.stream.audioTracks).forEach(n=>{n.enabled=!t}))};b.prototype.getOrCreateDTMFSender=function(){if(this._dtmfSender||this._dtmfSenderUnsupported)return this._dtmfSender||null;let e=this,n=this.version.pc;if(!n)return this._log.warn("No RTCPeerConnection available to call createDTMFSender on"),null;if(typeof n.getSenders=="function"&&(typeof RTCDTMFSender=="function"||typeof RTCDtmfSender=="function")){let r=n.getSenders().find(i=>i.dtmf);if(r)return this._log.info("Using RTCRtpSender#dtmf"),this._dtmfSender=r.dtmf,this._dtmfSender}if(typeof n.createDTMFSender=="function"&&typeof n.getLocalStreams=="function"){let r=n.getLocalStreams().map(i=>{let o=e._getAudioTracks(i);return o&&o[0]})[0];return r?(this._log.info("Creating RTCDTMFSender"),this._dtmfSender=n.createDTMFSender(r),this._dtmfSender):(this._log.warn("No local audio MediaStreamTrack available on the RTCPeerConnection to pass to createDTMFSender"),null)}return this._log.info("RTCPeerConnection does not support RTCDTMFSender"),this._dtmfSenderUnsupported=!0,null};b.prototype.getRTCDtlsTransport=function(){let e=this.version&&this.version.pc&&typeof this.version.pc.getSenders=="function"&&this.version.pc.getSenders()[0];return e&&e.transport||null};b.prototype._canStopMediaStreamTrack=()=>typeof MediaStreamTrack.prototype.stop=="function";b.prototype._getAudioTracks=t=>typeof t.getAudioTracks=="function"?t.getAudioTracks():t.audioTracks;b.prototype._getRTCIceTransport=function(){let e=this.getRTCDtlsTransport();return e&&e.iceTransport||null};b.protocol=et.test()?new et:null;b.prototype._handleAudioProcessorEvent=function(t,e){if(!t||!this._remoteStream)return;let n=null;this._masterAudio?(this._log.info("Setting audio source for master audio."),n=this._masterAudio):(this._log.info("No master audio. Setting audio source for default audio output."),n=this.outputs.get("default").audio),$d(n,this._remoteStream,this._audioHelper).then(()=>{let r=e?"Successfully updated audio source with processed stream":"Successfully reverted audio source to original stream";this._log.info(r),n.paused&&(this._log.info("Resuming audio playback"),n.play())}).catch(()=>{let r=e?"Failed to update audio source":"Failed to revert audio source";this._log.error(r)})};function _B(t,e){typeof t.addTrack=="function"?e.getAudioTracks().forEach(n=>{t.addTrack(n,e)}):t.addStream(e)}function pS(t,e){let n;return e?n=new e:typeof MediaStream<"u"?n=new MediaStream:n=new webkitMediaStream,t.getAudioTracks().forEach(n.addTrack,n),n}function $d(t,e,n){return n._maybeCreateRemoteProcessedStream(e).then(r=>{if(typeof t.srcObject<"u")t.srcObject=r;else if(typeof t.mozSrcObject<"u")t.mozSrcObject=r;else if(typeof t.src<"u"){let i=t.options.window||window;t.src=(i.URL||i.webkitURL).createObjectURL(r)}else return Promise.reject();return Promise.resolve()})}b.enabled=et.test();function gS(){return et.test()}function mS(){return typeof RTCIceGatherer<"u"?"ORTC":"WebRTC"}function vS(t,e){return e=e||{},e.util=e.util||Wa,e.navigator=e.navigator||(typeof navigator<"u"?navigator:null),new Promise((n,r)=>{if(!e.navigator)throw new te("getUserMedia is not supported");switch("function"){case typeof(e.navigator.mediaDevices&&e.navigator.mediaDevices.getUserMedia):return n(e.navigator.mediaDevices.getUserMedia(t));case typeof e.navigator.webkitGetUserMedia:return e.navigator.webkitGetUserMedia(t,n,r);case typeof e.navigator.mozGetUserMedia:return e.navigator.mozGetUserMedia(t,n,r);case typeof e.navigator.getUserMedia:return e.navigator.getUserMedia(t,n,r);default:throw new te("getUserMedia is not supported")}}).catch(n=>{throw e.util.isFirefox()&&n.name==="NotReadableError"?new te(`Firefox does not currently support opening multiple audio input trackssimultaneously, even across different tabs.
Related Bugzilla thread: https://bugzilla.mozilla.org/show_bug.cgi?id=1299324`):n})}function EB(){if(typeof window!="object")throw new te("This platform is not supported.");let{crypto:t}=window;if(typeof t!="object")throw new te("The `crypto` module is not available on this platform.");if(typeof t.getRandomValues!="function")throw new te("The function `crypto.getRandomValues` is not available on this platform.");if(typeof window.Uint8Array!="function")throw new te("The `Uint8Array` module is not available on this platform.");return t.getRandomValues(new window.Uint8Array(16)).reduce((e,n)=>`${e}${n.toString(16).padStart(2,"0")}`,"")}function Ga(){return`KX${EB()}`}var Wd=class{constructor(){this._promise=new Promise((e,n)=>{this._resolve=e,this._reject=n})}get promise(){return this._promise}reject(e){this._reject(e)}resolve(e){this._resolve(e)}};var zd=class{constructor(){this._operations=[]}enqueue(e){let n=!!this._operations.length,r=new Wd;return this._operations.push({deferred:r,callback:e}),n||this._processQueue(),r.promise}_processQueue(){return le(this,void 0,void 0,function*(){for(;this._operations.length;){let{deferred:e,callback:n}=this._operations[0],r,i,o;try{r=yield n(),o=!0}catch(s){i=s}this._operations.shift(),o?e.resolve(r):e.reject(i)}})}};var Gd=class{get reject(){return this._reject}get resolve(){return this._resolve}constructor(){this.promise=new Promise((e,n)=>{this._resolve=e,this._reject=n})}};var yS=ot(St()),qd=class{constructor(){this._eventEmitter=new yS.EventEmitter}addEventListener(e,n){return this._eventEmitter.addListener(e,n)}dispatchEvent(e,...n){return this._eventEmitter.emit(e,...n)}removeEventListener(e,n){return this._eventEmitter.removeListener(e,n)}};var qa=class extends qd{get destination(){return this._destination}get loop(){return this._loop}set loop(e){let n=this;function r(){n._audioNode.removeEventListener("ended",r),n.pause()}!e&&this.loop&&!this.paused&&this._audioNode.addEventListener("ended",r),this._loop=e}get muted(){return this._gainNode.gain.value===0}set muted(e){this._gainNode.gain.value=e?0:1}get paused(){return this._audioNode===null}get src(){return this._src}set src(e){this._load(e)}get srcObject(){return this._audioElement.srcObject}set srcObject(e){this._audioElement.srcObject=e}get sinkId(){return this._sinkId}constructor(e,n={},r={}){super(),this._audioNode=null,this._loop=!1,this._pendingPlayDeferreds=[],this._sinkId="default",this._src="",typeof n!="string"&&(r=n),this._audioContext=e,this._audioElement=new(r.AudioFactory||Audio),this._bufferPromise=this._createPlayDeferred().promise,this._destination=this._audioContext.destination,this._gainNode=this._audioContext.createGain(),this._gainNode.connect(this._destination),this._XMLHttpRequest=r.XMLHttpRequestFactory||XMLHttpRequest,this.addEventListener("canplaythrough",()=>{this._resolvePlayDeferreds()}),typeof n=="string"&&(this.src=n)}load(){this._load(this._src)}pause(){this.paused||(this._audioElement.pause(),this._audioNode.stop(),this._audioNode.disconnect(this._gainNode),this._audioNode=null,this._rejectPlayDeferreds(new Error("The play() request was interrupted by a call to pause().")))}play(){return le(this,void 0,void 0,function*(){if(!this.paused){if(yield this._bufferPromise,!this.paused)return;throw new Error("The play() request was interrupted by a call to pause().")}this._audioNode=this._audioContext.createBufferSource(),this._audioNode.loop=this.loop,this._audioNode.addEventListener("ended",()=>{this._audioNode&&this._audioNode.loop||this.dispatchEvent("ended")});let e=yield this._bufferPromise;if(this.paused)throw new Error("The play() request was interrupted by a call to pause().");if(this._audioNode.buffer=e,this._audioNode.connect(this._gainNode),this._audioNode.start(),this._audioElement.srcObject)return this._audioElement.play()})}setSinkId(e){return le(this,void 0,void 0,function*(){if(typeof this._audioElement.setSinkId!="function")throw new Error("This browser does not support setSinkId.");if(e!==this.sinkId){if(e==="default"){this.paused||this._gainNode.disconnect(this._destination),this._audioElement.srcObject=null,this._destination=this._audioContext.destination,this._gainNode.connect(this._destination),this._sinkId=e;return}yield this._audioElement.setSinkId(e),!this._audioElement.srcObject&&(this._gainNode.disconnect(this._audioContext.destination),this._destination=this._audioContext.createMediaStreamDestination(),this._audioElement.srcObject=this._destination.stream,this._sinkId=e,this._gainNode.connect(this._destination))}})}_createPlayDeferred(){let e=new Gd;return this._pendingPlayDeferreds.push(e),e}_load(e){this._src&&this._src!==e&&this.pause(),this._src=e,this._bufferPromise=new Promise((n,r)=>le(this,void 0,void 0,function*(){if(!e)return this._createPlayDeferred().promise;let i=yield IB(this._audioContext,this._XMLHttpRequest,e);this.dispatchEvent("canplaythrough"),n(i)}))}_rejectPlayDeferreds(e){let n=this._pendingPlayDeferreds;n.splice(0,n.length).forEach(({reject:r})=>r(e))}_resolvePlayDeferreds(e){let n=this._pendingPlayDeferreds;n.splice(0,n.length).forEach(({resolve:r})=>r(e))}};function IB(t,e,n){return le(this,void 0,void 0,function*(){let r=new e;r.open("GET",n,!0),r.responseType="arraybuffer";let i=yield new Promise(o=>{r.addEventListener("load",o),r.send()});try{return t.decodeAudioData(i.target.response)}catch{return new Promise(s=>{t.decodeAudioData(i.target.response,s)})}})}function pn(t,e,n){if(!(this instanceof pn))return new pn(t,e,n);if(!t||!e)throw new x("name and url are required arguments");n=Object.assign({AudioFactory:typeof Audio<"u"?Audio:null,maxDuration:0,shouldLoop:!1},n),n.AudioPlayer=n.audioContext?qa.bind(qa,n.audioContext):n.AudioFactory,Object.defineProperties(this,{_Audio:{value:n.AudioPlayer},_activeEls:{value:new Map},_isSinkSupported:{value:n.AudioFactory!==null&&typeof n.AudioFactory.prototype.setSinkId=="function"},_maxDuration:{value:n.maxDuration},_maxDurationTimeout:{value:null,writable:!0},_operations:{value:new zd},_playPromise:{value:null,writable:!0},_shouldLoop:{value:n.shouldLoop},_sinkIds:{value:["default"]},isPlaying:{enumerable:!0,get(){return!!this._playPromise}},name:{enumerable:!0,value:t},url:{enumerable:!0,value:e}}),this._Audio&&this._play(!0,!1)}function _S(t){t&&(t.pause(),t.src="",t.srcObject=null,t.load())}pn.prototype._playAudioElement=function(e,n,r){let i=this._activeEls.get(e);if(!i)throw new x(`sinkId: "${e}" doesn't have an audio element`);return i.muted=!!n,i.loop=!!r,i.play().then(()=>i).catch(o=>{throw _S(i),this._activeEls.delete(e),o})};pn.prototype._play=function(e,n){this.isPlaying&&this._stop(),this._maxDuration>0&&(this._maxDurationTimeout=setTimeout(this._stop.bind(this),this._maxDuration)),n=typeof n=="boolean"?n:this._shouldLoop;let r=this;return this._playPromise=Promise.all(this._sinkIds.map(function(s){if(!r._Audio)return Promise.resolve();let a=r._activeEls.get(s);return a?r._playAudioElement(s,e,n):(a=new r._Audio(r.url),typeof a.setAttribute=="function"&&a.setAttribute("crossorigin","anonymous"),new Promise(c=>{a.addEventListener("canplaythrough",c)}).then(()=>(r._isSinkSupported?a.setSinkId(s):Promise.resolve()).then(function(){return r._activeEls.set(s,a),r._playPromise?r._playAudioElement(s,e,n):Promise.resolve()})))}))};pn.prototype._stop=function(){this._activeEls.forEach((e,n)=>{this._sinkIds.includes(n)?(e.pause(),e.currentTime=0):(_S(e),this._activeEls.delete(n))}),clearTimeout(this._maxDurationTimeout),this._playPromise=null,this._maxDurationTimeout=null};pn.prototype.setSinkIds=function(e){this._isSinkSupported&&(e=e.forEach?e:[e],[].splice.apply(this._sinkIds,[0,this._sinkIds.length].concat(e)))};pn.prototype.stop=function(){this._operations.enqueue(()=>(this._stop(),Promise.resolve()))};pn.prototype.play=function(){return this._operations.enqueue(()=>this._play())};var wB=3e4,bB=2e3,CB="twilio-js-sdk",DB='Parameter "token" must be of type "string".',be=(()=>{class t extends ry.EventEmitter{static get audioContext(){return t._audioContext}static get extension(){let n=typeof document<"u"?document.createElement("audio"):{canPlayType:!1},r;try{r=n.canPlayType&&!!n.canPlayType("audio/mpeg").replace(/no/,"")}catch{r=!1}let i;try{i=n.canPlayType&&!!n.canPlayType("audio/ogg;codecs='vorbis'").replace(/no/,"")}catch{i=!1}return i&&!r?"ogg":"mp3"}static get isSupported(){return gS()}static get packageName(){return Od}static runPreflight(n,r){return new Ai(n,Object.assign({audioContext:t._getOrCreateAudioContext()},r))}static toString(){return"[Twilio.Device class]"}static get version(){return Fn}static _getOrCreateAudioContext(){return t._audioContext||(typeof AudioContext<"u"?t._audioContext=new AudioContext:typeof webkitAudioContext<"u"&&(t._audioContext=new webkitAudioContext)),t._audioContext}constructor(n,r={}){if(super(),this._activeCall=null,this._audio=null,this._audioProcessorEventObserver=null,this._callInputStream=null,this._calls=[],this._callSinkIds=["default"],this._chunderURIs=[],this._defaultOptions={allowIncomingWhileBusy:!1,closeProtection:!1,codecPreferences:[it.Codec.PCMU,it.Codec.Opus],dscp:!0,enableImprovedSignalingErrorPrecision:!1,forceAggressiveIceNomination:!1,logLevel:iy.levels.ERROR,maxCallSignalingTimeoutMs:0,preflight:!1,sounds:{},tokenRefreshMs:1e4,voiceEventSidGenerator:Ga},this._edge=null,this._home=null,this._identity=null,this._log=new ae("Device"),this._makeCallPromise=null,this._options={},this._preferredURI=null,this._publisher=null,this._region=null,this._regTimer=null,this._shouldReRegister=!1,this._soundcache=new Map,this._state=t.State.Unregistered,this._stateEventMapping={[t.State.Destroyed]:t.EventName.Destroyed,[t.State.Unregistered]:t.EventName.Unregistered,[t.State.Registering]:t.EventName.Registering,[t.State.Registered]:t.EventName.Registered},this._stream=null,this._streamConnectedPromise=null,this._tokenWillExpireTimeout=null,this._createDefaultPayload=s=>{let a={aggressive_nomination:this._options.forceAggressiveIceNomination,browser_extension:this._isBrowserExtension,dscp:!!this._options.dscp,ice_restart_enabled:!0,platform:mS(),sdk_version:Fn};function c(u,l){l&&(a[u]=l)}if(s){let u=s.parameters.CallSid;c("call_sid",/^TJ/.test(u)?void 0:u),c("temp_call_sid",s.outboundConnectionId),c("audio_codec",s.codec),a.direction=s.direction}return c("gateway",this._stream&&this._stream.gateway),c("region",this._stream&&this._stream.region),a},this._onSignalingClose=()=>{this._stream=null,this._streamConnectedPromise=null},this._onSignalingConnected=s=>{var a;let c=aS(s.region);if(this._edge=s.edge||sS[c]||s.region,this._region=c||s.region,this._home=s.home,(a=this._publisher)===null||a===void 0||a.setHost(Qv(s.home)),s.token&&(this._identity=s.token.identity,typeof s.token.ttl=="number"&&typeof this._options.tokenRefreshMs=="number")){let l=s.token.ttl*1e3,d=Math.max(0,l-this._options.tokenRefreshMs);this._tokenWillExpireTimeout=setTimeout(()=>{this._log.debug("#tokenWillExpire"),this.emit("tokenWillExpire",this),this._tokenWillExpireTimeout&&(clearTimeout(this._tokenWillExpireTimeout),this._tokenWillExpireTimeout=null)},d)}let u=this._getChunderws()||ey(this._edge);if(u.length>0){let[l]=u;this._preferredURI=Xv(l)}else this._log.warn("Could not parse a preferred URI from the stream#connected event.");this._shouldReRegister&&this.register()},this._onSignalingError=s=>{if(typeof s!="object"){this._log.warn("Invalid signaling error payload",s);return}let{error:a,callsid:c,voiceeventsid:u}=s;if(typeof a!="object"||u){this._log.warn("Ignoring signaling error payload",{originalError:a,voiceeventsid:u});return}let l=typeof c=="string"&&this._findCall(c)||void 0,{code:d,message:f}=a,{twilioError:h}=a;if(typeof d=="number")if(d===31201)h=new _e.AuthenticationFailed(a);else if(d===31204)h=new _e.AccessTokenInvalid(a);else if(d===31205)this._stopRegistrationTimer(),h=new _e.AccessTokenExpired(a);else{let p=Ua(!!this._options.enableImprovedSignalingErrorPrecision,d);typeof p<"u"&&(h=new p(a))}h||(this._log.error("Unknown signaling error: ",a),h=new Ee.UnknownError(f,a)),this._log.error("Received error: ",h),this._log.debug("#error",a),this.emit(t.EventName.Error,h,l)},this._onSignalingInvite=s=>le(this,void 0,void 0,function*(){var a;let c=!!this._activeCall;if(c&&!this._options.allowIncomingWhileBusy){this._log.info("Device busy; ignoring incoming invite");return}if(!s.callsid||!s.sdp){this._log.debug("#error",s),this.emit(t.EventName.Error,new Ln.BadRequest("Malformed invite from gateway"));return}let u=s.parameters||{};u.CallSid=u.CallSid||s.callsid;let l=Object.assign({},Kv(u.Params));this._makeCallPromise=this._makeCall(l,{callParameters:u,enableImprovedSignalingErrorPrecision:!!this._options.enableImprovedSignalingErrorPrecision,offerSdp:s.sdp,reconnectToken:s.reconnect,voiceEventSidGenerator:this._options.voiceEventSidGenerator});let d;try{d=yield this._makeCallPromise}finally{this._makeCallPromise=null}this._calls.push(d),d.once("accept",()=>{this._soundcache.get(t.SoundName.Incoming).stop(),this._publishNetworkChange()});let f=!((a=this._audio)===null||a===void 0)&&a.incoming()&&!c?()=>this._soundcache.get(t.SoundName.Incoming).play():()=>Promise.resolve();this._showIncomingCall(d,f)}),this._onSignalingOffline=()=>{this._log.info("Stream is offline"),this._edge=null,this._region=null,this._shouldReRegister=this.state!==t.State.Unregistered,this._setState(t.State.Unregistered)},this._onSignalingReady=()=>{this._log.info("Stream is ready"),this._setState(t.State.Registered)},this._publishNetworkChange=()=>{this._activeCall&&this._networkInformation&&this._publisher.info("network-information","network-change",{connection_type:this._networkInformation.type,downlink:this._networkInformation.downlink,downlinkMax:this._networkInformation.downlinkMax,effective_type:this._networkInformation.effectiveType,rtt:this._networkInformation.rtt},this._activeCall)},this._updateInputStream=s=>{let a=this._activeCall;return a&&!s?Promise.reject(new ze("Cannot unset input device while a call is in progress.")):(this._callInputStream=s,a?a._setInputTracksFromStream(s):Promise.resolve())},this._updateSinkIds=(s,a)=>(s==="ringtone"?this._updateRingtoneSinkIds(a):this._updateSpeakerSinkIds(a)).then(()=>{this._publisher.info("audio",`${s}-devices-set`,{audio_device_ids:a},this._activeCall)},u=>{throw this._publisher.error("audio",`${s}-devices-set-failed`,{audio_device_ids:a,message:u.message},this._activeCall),u}),this._setupLoglevel(r.logLevel),this._logOptions("constructor",r),this.updateToken(n),$o())throw new te("Microsoft Edge Legacy (https://support.microsoft.com/en-us/help/4533505/what-is-microsoft-edge-legacy) is deprecated and will not be able to connect to Twilio to make or receive calls after September 1st, 2020. Please see this documentation for a list of supported browsers https://www.twilio.com/docs/voice/client/javascript#supported-browsers");if(!t.isSupported&&r.ignoreBrowserSupport)throw window&&window.location&&window.location.protocol==="http:"?new te("twilio.js wasn't able to find WebRTC browser support.           This is most likely because this page is served over http rather than https,           which does not support WebRTC in many browsers. Please load this page over https and           try again."):new te("twilio.js 1.3+ SDKs require WebRTC browser support.         For more information, see <https://www.twilio.com/docs/api/client/twilio-js>.         If you have any questions about this announcement, please contact         Twilio Support at <help@twilio.com>.");let i=globalThis,o=i.msBrowser||i.browser||i.chrome;if(this._isBrowserExtension=!!o&&!!o.runtime&&!!o.runtime.id||!!i.safari&&!!i.safari.extension,this._isBrowserExtension&&this._log.info("Running as browser extension."),navigator){let s=navigator;this._networkInformation=s.connection||s.mozConnection||s.webkitConnection}this._networkInformation&&typeof this._networkInformation.addEventListener=="function"&&this._networkInformation.addEventListener("change",this._publishNetworkChange),t._getOrCreateAudioContext(),t._audioContext&&(t._dialtonePlayer||(t._dialtonePlayer=new jd(t._audioContext))),this._boundDestroy=this.destroy.bind(this),this._boundConfirmClose=this._confirmClose.bind(this),typeof window<"u"&&window.addEventListener&&(window.addEventListener("unload",this._boundDestroy),window.addEventListener("pagehide",this._boundDestroy)),this.updateOptions(r)}get audio(){return this._audio}connect(){return le(this,arguments,void 0,function*(n={}){if(this._log.debug(".connect",JSON.stringify(n)),this._throwIfDestroyed(),this._activeCall)throw new ze("A Call is already active");let r,i,o;if(n.connectToken){try{let l=JSON.parse(decodeURIComponent(atob(n.connectToken)));r=l.customParameters,i=l.parameters,o=l.signalingReconnectToken}catch{throw new x("Cannot parse connectToken")}if(!i||!i.CallSid||!o)throw new x("Invalid connectToken")}let s=!1,a={},c={enableImprovedSignalingErrorPrecision:!!this._options.enableImprovedSignalingErrorPrecision,rtcConfiguration:n.rtcConfiguration,voiceEventSidGenerator:this._options.voiceEventSidGenerator};o&&i?(s=!0,c.callParameters=i,c.reconnectCallSid=i.CallSid,c.reconnectToken=o,a=r||a):a=n.params||a;let u;this._makeCallPromise=this._makeCall(a,c,s);try{u=this._activeCall=yield this._makeCallPromise}finally{this._makeCallPromise=null}return this._calls.splice(0).forEach(l=>l.ignore()),this._soundcache.get(t.SoundName.Incoming).stop(),u.accept({rtcConstraints:n.rtcConstraints}),this._publishNetworkChange(),u})}get calls(){return this._calls}destroy(){var n;this._log.debug(".destroy"),this._log.debug("Rejecting any incoming calls"),this._calls.slice(0).forEach(i=>i.reject()),this.disconnectAll(),this._stopRegistrationTimer(),this._destroyStream(),this._destroyAudioHelper(),(n=this._audioProcessorEventObserver)===null||n===void 0||n.destroy(),this._destroyPublisher(),this._networkInformation&&typeof this._networkInformation.removeEventListener=="function"&&this._networkInformation.removeEventListener("change",this._publishNetworkChange),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("beforeunload",this._boundConfirmClose),window.removeEventListener("unload",this._boundDestroy),window.removeEventListener("pagehide",this._boundDestroy)),this._setState(t.State.Destroyed),ry.EventEmitter.prototype.removeAllListeners.call(this)}disconnectAll(){this._log.debug(".disconnectAll"),this._calls.splice(0).forEach(r=>r.disconnect()),this._activeCall&&this._activeCall.disconnect()}get edge(){return this._edge}get home(){return this._home}get identity(){return this._identity}get isBusy(){return!!this._activeCall}register(){return le(this,void 0,void 0,function*(){if(this._log.debug(".register"),this.state!==t.State.Unregistered)throw new ze(`Attempt to register when device is in state "${this.state}". Must be "${t.State.Unregistered}".`);this._shouldReRegister=!1,this._setState(t.State.Registering),yield this._streamConnectedPromise||this._setupStream(),yield this._sendPresence(!0),yield Vd(this,t.State.Registered,t.State.Unregistered)})}get state(){return this._state}get token(){return this._token}toString(){return"[Twilio.Device instance]"}unregister(){return le(this,void 0,void 0,function*(){if(this._log.debug(".unregister"),this.state!==t.State.Registered)throw new ze(`Attempt to unregister when device is in state "${this.state}". Must be "${t.State.Registered}".`);this._shouldReRegister=!1;let n=yield this._streamConnectedPromise,r=new Promise(i=>{n.on("offline",i)});yield this._sendPresence(!1),yield r})}updateOptions(n={}){if(this._logOptions("updateOptions",n),this.state===t.State.Destroyed)throw new ze(`Attempt to "updateOptions" when device is in state "${this.state}".`);this._options=Object.assign(Object.assign(Object.assign({},this._defaultOptions),this._options),n);let r=new Set(this._chunderURIs),i=this._chunderURIs=(this._getChunderws()||ey(this._options.edge)).map(Xv),o=r.size!==i.length;if(!o){for(let s of i)if(!r.has(s)){o=!0;break}}if(this.isBusy&&o)throw new ze("Cannot change Edge while on an active Call");this._setupLoglevel(this._options.logLevel);for(let s of Object.keys(t._defaultSounds)){let a=t._defaultSounds[s],c=`${ja}/${a.filename}.${t.extension}?cache=${Fn}`,u=this._options.sounds&&this._options.sounds[s]||c,l=new(this._options.Sound||pn)(s,u,{audioContext:this._options.disableAudioContextSounds?null:t.audioContext,maxDuration:a.maxDuration,shouldLoop:a.shouldLoop});this._soundcache.set(s,l)}this._setupAudioHelper(),this._setupPublisher(),o&&this._streamConnectedPromise&&this._setupStream(),typeof window<"u"&&typeof window.addEventListener=="function"&&this._options.closeProtection&&(window.removeEventListener("beforeunload",this._boundConfirmClose),window.addEventListener("beforeunload",this._boundConfirmClose))}updateToken(n){if(this._log.debug(".updateToken"),this.state===t.State.Destroyed)throw new ze(`Attempt to "updateToken" when device is in state "${this.state}".`);if(typeof n!="string")throw new x(DB);this._token=n,this._stream&&this._stream.setToken(this._token),this._publisher&&this._publisher.setToken(this._token)}_confirmClose(n){if(!this._activeCall)return"";let r=this._options.closeProtection||!1,i=typeof r!="string"?"A call is currently in-progress. Leaving or reloading this page will end the call.":r;return(n||window.event).returnValue=i,i}_destroyAudioHelper(){this._audio&&(this._audio._destroy(),this._audio=null)}_destroyPublisher(){this._publisher&&(this._publisher=null)}_destroyStream(){this._stream&&(this._stream.removeListener("close",this._onSignalingClose),this._stream.removeListener("connected",this._onSignalingConnected),this._stream.removeListener("error",this._onSignalingError),this._stream.removeListener("invite",this._onSignalingInvite),this._stream.removeListener("offline",this._onSignalingOffline),this._stream.removeListener("ready",this._onSignalingReady),this._stream.destroy(),this._stream=null),this._onSignalingOffline(),this._streamConnectedPromise=null}_findCall(n){return this._calls.find(r=>r.parameters.CallSid===n||r.outboundConnectionId===n)||null}_getChunderws(){return typeof this._options.chunderw=="string"?[this._options.chunderw]:Array.isArray(this._options.chunderw)?this._options.chunderw:null}_logOptions(n,r={}){let i=["allowIncomingWhileBusy","appName","appVersion","closeProtection","codecPreferences","disableAudioContextSounds","dscp","edge","enableImprovedSignalingErrorPrecision","forceAggressiveIceNomination","logLevel","maxAverageBitrate","maxCallSignalingTimeoutMs","sounds","tokenRefreshMs"],o=["RTCPeerConnection","enumerateDevices","getUserMedia","MediaStream"];if(typeof r=="object"){let s=Object.assign({},r);Object.keys(s).forEach(a=>{!i.includes(a)&&!o.includes(a)&&delete s[a],o.includes(a)&&(s[a]=!0)}),this._log.debug(`.${n}`,JSON.stringify(s))}}_makeCall(n,r){return le(this,arguments,void 0,function*(i,o,s=!1){var a;let c=(a=this._audio)===null||a===void 0?void 0:a._getInputDevicePromise();c&&(this._log.debug("inputDevicePromise detected, waiting..."),yield c,this._log.debug("inputDevicePromise resolved"));let u={audioHelper:this._audio,onIgnore:()=>{this._soundcache.get(t.SoundName.Incoming).stop()},pstream:yield this._streamConnectedPromise||this._setupStream(),publisher:this._publisher,soundcache:this._soundcache};o=Object.assign({MediaStream:this._options.MediaStream,RTCPeerConnection:this._options.RTCPeerConnection,beforeAccept:f=>{!this._activeCall||this._activeCall===f||(this._activeCall.disconnect(),this._removeCall(this._activeCall))},codecPreferences:this._options.codecPreferences,customSounds:this._options.sounds,dialtonePlayer:t._dialtonePlayer,dscp:this._options.dscp,forceAggressiveIceNomination:this._options.forceAggressiveIceNomination,getInputStream:()=>this._options.fileInputStream||this._callInputStream,getSinkIds:()=>this._callSinkIds,maxAverageBitrate:this._options.maxAverageBitrate,preflight:this._options.preflight,rtcConstraints:this._options.rtcConstraints,shouldPlayDisconnect:()=>{var f;return(f=this._audio)===null||f===void 0?void 0:f.disconnect()},twimlParams:i,voiceEventSidGenerator:this._options.voiceEventSidGenerator},o);let l=()=>{if(!this._stream){this._log.warn("UnsetPreferredUri called without a stream");return}this._activeCall===null&&this._calls.length===0&&this._stream.updatePreferredURI(null)},d=new(this._options.Call||it)(u,o);return this._publisher.info("settings","init",{MediaStream:!!this._options.MediaStream,RTCPeerConnection:!!this._options.RTCPeerConnection,enumerateDevices:!!this._options.enumerateDevices,getUserMedia:!!this._options.getUserMedia},d),d.once("accept",()=>{var f,h,p,v,g;this._stream.updatePreferredURI(this._preferredURI),this._removeCall(d),this._activeCall=d,this._audio&&this._audio._maybeStartPollingVolume(),d.direction===it.CallDirection.Outgoing&&(!((f=this._audio)===null||f===void 0)&&f.outgoing())&&!s&&this._soundcache.get(t.SoundName.Outgoing).play();let _={edge:this._edge||this._region};this._options.edge&&(_.selected_edge=Array.isArray(this._options.edge)?this._options.edge:[this._options.edge]),this._publisher.info("settings","edge",_,d),!((h=this._audio)===null||h===void 0)&&h.localProcessedStream&&((p=this._audioProcessorEventObserver)===null||p===void 0||p.emit("enabled",!1)),!((v=this._audio)===null||v===void 0)&&v.remoteProcessedStream&&((g=this._audioProcessorEventObserver)===null||g===void 0||g.emit("enabled",!0))}),d.addListener("error",f=>{d.status()==="closed"&&(this._removeCall(d),l()),this._audio&&this._audio._maybeStopPollingVolume(),this._maybeStopIncomingSound()}),d.once("cancel",()=>{this._log.info(`Canceled: ${d.parameters.CallSid}`),this._removeCall(d),l(),this._audio&&this._audio._maybeStopPollingVolume(),this._maybeStopIncomingSound()}),d.once("disconnect",()=>{this._audio&&this._audio._maybeStopPollingVolume(),this._removeCall(d),l(),this._maybeStopIncomingSound()}),d.once("reject",()=>{this._log.info(`Rejected: ${d.parameters.CallSid}`),this._audio&&this._audio._maybeStopPollingVolume(),this._removeCall(d),l(),this._maybeStopIncomingSound()}),d.on("transportClose",()=>{d.status()===it.State.Pending&&(this._audio&&this._audio._maybeStopPollingVolume(),this._removeCall(d),this._maybeStopIncomingSound())}),d})}_maybeStopIncomingSound(){this._calls.length||this._soundcache.get(t.SoundName.Incoming).stop()}_removeCall(n){this._activeCall===n&&(this._activeCall=null,this._makeCallPromise=null);for(let r=this._calls.length-1;r>=0;r--)n===this._calls[r]&&this._calls.splice(r,1)}_sendPresence(n){return le(this,void 0,void 0,function*(){let r=yield this._streamConnectedPromise;r&&(r.register({audio:n}),n?this._startRegistrationTimer():this._stopRegistrationTimer())})}_setState(n){if(n===this.state)return;this._state=n;let r=this._stateEventMapping[n];this._log.debug(`#${r}`),this.emit(r)}_setupAudioHelper(){this._audioProcessorEventObserver||(this._audioProcessorEventObserver=new Ud,this._audioProcessorEventObserver.on("event",({name:r,group:i,isRemote:o})=>{this._publisher.info(i,r,{is_remote:o},this._activeCall)}));let n={audioContext:t.audioContext,audioProcessorEventObserver:this._audioProcessorEventObserver,beforeSetInputDevice:()=>this._makeCallPromise?(this._log.debug("beforeSetInputDevice pause detected"),this._makeCallPromise):(this._log.debug("beforeSetInputDevice pause not detected, setting default"),Promise.resolve()),enumerateDevices:this._options.enumerateDevices,getUserMedia:this._options.getUserMedia||vS};if(this._audio){this._log.info("Found existing audio helper; updating options..."),this._audio._updateUserOptions(n);return}this._audio=new(this._options.AudioHelper||$T)(this._updateSinkIds,this._updateInputStream,n),this._audio.on("deviceChange",r=>{let i=this._activeCall,o=r.map(s=>s.deviceId);this._publisher.info("audio","device-change",{lost_active_device_ids:o},i),i&&i._mediaHandler._onInputDevicesChanged()})}_setupLoglevel(n){let r=typeof n=="number"||typeof n=="string"?n:iy.levels.ERROR;this._log.setDefaultLevel(r),this._log.info("Set logger default level to",r)}_setupPublisher(){this._publisher&&(this._log.info("Found existing publisher; destroying..."),this._destroyPublisher());let n={defaultPayload:this._createDefaultPayload,metadata:{app_name:this._options.appName,app_version:this._options.appVersion}};return this._options.eventgw&&(n.host=this._options.eventgw),this._home&&(n.host=Qv(this._home)),this._publisher=new(this._options.Publisher||Xe)(CB,this.token,n),this._options.publishEvents===!1?this._publisher.disable():this._publisher.on("error",r=>{this._log.warn("Cannot connect to insights.",r)}),this._publisher}_setupStream(){return this._stream&&(this._log.info("Found existing stream; destroying..."),this._destroyStream()),this._log.info("Setting up VSP"),this._stream=new(this._options.PStream||ce)(this.token,this._chunderURIs,{backoffMaxMs:this._options.backoffMaxMs,maxPreferredDurationMs:this._options.maxCallSignalingTimeoutMs}),this._stream.addListener("close",this._onSignalingClose),this._stream.addListener("connected",this._onSignalingConnected),this._stream.addListener("error",this._onSignalingError),this._stream.addListener("invite",this._onSignalingInvite),this._stream.addListener("offline",this._onSignalingOffline),this._stream.addListener("ready",this._onSignalingReady),this._streamConnectedPromise=Vd(this._stream,"connected","close").then(()=>this._stream)}_showIncomingCall(n,r){let i;return Promise.race([r(),new Promise((o,s)=>{i=setTimeout(()=>{let a="Playing incoming ringtone took too long; it might not play. Continuing execution...";s(new Error(a))},bB)})]).catch(o=>{this._log.warn(o.message)}).then(()=>{clearTimeout(i),this._log.debug("#incoming",JSON.stringify({customParameters:n.customParameters,parameters:n.parameters})),this.emit(t.EventName.Incoming,n)})}_startRegistrationTimer(){this._stopRegistrationTimer(),this._regTimer=setTimeout(()=>{this._sendPresence(!0)},wB)}_stopRegistrationTimer(){this._regTimer&&clearTimeout(this._regTimer)}_throwIfDestroyed(){if(this.state===t.State.Destroyed)throw new ze("Device has been destroyed.")}_updateRingtoneSinkIds(n){return Promise.resolve(this._soundcache.get(t.SoundName.Incoming).setSinkIds(n))}_updateSpeakerSinkIds(n){Array.from(this._soundcache.entries()).filter(i=>i[0]!==t.SoundName.Incoming).forEach(i=>i[1].setSinkIds(n)),this._callSinkIds=n;let r=this._activeCall;return r?r._setSinkIds(n):Promise.resolve()}}return t._defaultSounds={disconnect:{filename:"disconnect",maxDuration:3e3},dtmf0:{filename:"dtmf-0",maxDuration:1e3},dtmf1:{filename:"dtmf-1",maxDuration:1e3},dtmf2:{filename:"dtmf-2",maxDuration:1e3},dtmf3:{filename:"dtmf-3",maxDuration:1e3},dtmf4:{filename:"dtmf-4",maxDuration:1e3},dtmf5:{filename:"dtmf-5",maxDuration:1e3},dtmf6:{filename:"dtmf-6",maxDuration:1e3},dtmf7:{filename:"dtmf-7",maxDuration:1e3},dtmf8:{filename:"dtmf-8",maxDuration:1e3},dtmf9:{filename:"dtmf-9",maxDuration:1e3},dtmfh:{filename:"dtmf-hash",maxDuration:1e3},dtmfs:{filename:"dtmf-star",maxDuration:1e3},incoming:{filename:"incoming",shouldLoop:!0},outgoing:{filename:"outgoing",maxDuration:3e3}},t})();(function(t){(function(e){e.Error="error",e.Incoming="incoming",e.Destroyed="destroyed",e.Unregistered="unregistered",e.Registering="registering",e.Registered="registered",e.TokenWillExpire="tokenWillExpire"})(t.EventName||(t.EventName={})),(function(e){e.Destroyed="destroyed",e.Unregistered="unregistered",e.Registering="registering",e.Registered="registered"})(t.State||(t.State={})),(function(e){e.Incoming="incoming",e.Outgoing="outgoing",e.Disconnect="disconnect",e.Dtmf0="dtmf0",e.Dtmf1="dtmf1",e.Dtmf2="dtmf2",e.Dtmf3="dtmf3",e.Dtmf4="dtmf4",e.Dtmf5="dtmf5",e.Dtmf6="dtmf6",e.Dtmf7="dtmf7",e.Dtmf8="dtmf8",e.Dtmf9="dtmf9",e.DtmfS="dtmfs",e.DtmfH="dtmfh"})(t.SoundName||(t.SoundName={}))})(be||(be={}));var Go=class{constructor(e,n=!1){this.deleted=!1;let r,i=e.candidate.split("network-cost ");i[1]&&(r=parseInt(i[1],10)),this.candidateType=e.type,this.ip=e.ip||e.address,this.isRemote=n,this.networkCost=r,this.port=e.port,this.priority=e.priority,this.protocol=e.protocol,this.relatedAddress=e.relatedAddress,this.relatedPort=e.relatedPort,this.tcpType=e.tcpType,this.transportId=e.sdpMid}toPayload(){return{candidate_type:this.candidateType,deleted:this.deleted,ip:this.ip,is_remote:this.isRemote,"network-cost":this.networkCost,port:this.port,priority:this.priority,protocol:this.protocol,related_address:this.relatedAddress,related_port:this.relatedPort,tcp_type:this.tcpType,transport_id:this.transportId}}};var IS=ot(St());function TB(t,e,n){if(typeof t!="number"||typeof e!="number"||typeof n!="number"||!Kd(t)||!Kd(e)||!Kd(n))return null;let r=t+e*2+10,i=0;switch(!0){case r<160:i=94.768-r/40;break;case r<1e3:i=94.768-(r-120)/10;break}switch(!0){case n<=i/2.5:i=Math.max(i-n*2.5,6.52);break;default:i=0;break}return 1+.035*i+7e-6*i*(i-60)*(100-i)}function Kd(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)&&t>=0}var ES={calculate:TB,isNonNegativeNumber:Kd};var SB=5,AB=0,RB=3,MB=1e3,NB=5*1e3,kB={audioInputLevel:{minStandardDeviation:327.67,sampleCount:10},audioOutputLevel:{minStandardDeviation:327.67,sampleCount:10},bytesReceived:{clearCount:2,min:1,raiseCount:3,sampleCount:3},bytesSent:{clearCount:2,min:1,raiseCount:3,sampleCount:3},jitter:{max:30},mos:{min:3},packetsLostFraction:[{max:1},{clearValue:1,maxAverage:3,sampleCount:7}],rtt:{max:400}};function PB(t,e){return e.reduce((n,r)=>n+=r>t?1:0,0)}function OB(t,e){return e.reduce((n,r)=>n+=r<t?1:0,0)}function xB(t){if(t.length<=0)return null;let e=t.reduce((i,o)=>i+o,0)/t.length,n=t.map(i=>Math.pow(i-e,2));return Math.sqrt(n.reduce((i,o)=>i+o,0)/n.length)}function LB(t){return t.reduce((e,n)=>[...e,...n],[])}var Yd=class extends IS.EventEmitter{constructor(e){super(),this._activeWarnings=new Map,this._currentStreaks=new Map,this._inputVolumes=[],this._outputVolumes=[],this._sampleBuffer=[],this._supplementalSampleBuffers={audioInputLevel:[],audioOutputLevel:[]},this._warningsEnabled=!0,e=e||{},this._getRTCStats=e.getRTCStats||QT,this._mos=e.Mos||ES,this._peerConnection=e.peerConnection,this._thresholds=Object.assign(Object.assign({},kB),e.thresholds);let n=Object.values(this._thresholds).map(r=>r.sampleCount).filter(r=>!!r);this._maxSampleCount=Math.max(SB,...n),this._peerConnection&&this.enable(this._peerConnection)}addVolumes(e,n){this._inputVolumes.push(e),this._outputVolumes.push(n)}disable(){return this._sampleInterval&&(clearInterval(this._sampleInterval),delete this._sampleInterval),this}disableWarnings(){return this._warningsEnabled&&this._activeWarnings.clear(),this._warningsEnabled=!1,this}enable(e){if(e){if(this._peerConnection&&e!==this._peerConnection)throw new x("Attempted to replace an existing PeerConnection in StatsMonitor.enable");this._peerConnection=e}if(!this._peerConnection)throw new x("Can not enable StatsMonitor without a PeerConnection");return this._sampleInterval=this._sampleInterval||setInterval(this._fetchSample.bind(this),MB),this}enableWarnings(){return this._warningsEnabled=!0,this}hasActiveWarning(e,n){let r=`${e}:${n}`;return!!this._activeWarnings.get(r)}_addSample(e){let n=this._sampleBuffer;n.push(e),n.length>this._maxSampleCount&&n.splice(0,n.length-this._maxSampleCount)}_clearWarning(e,n,r){let i=`${e}:${n}`,o=this._activeWarnings.get(i);!o||Date.now()-o.timeRaised<NB||(this._activeWarnings.delete(i),this.emit("warning-cleared",Object.assign(Object.assign({},r),{name:e,threshold:{name:n,value:this._thresholds[e][n]}})))}_createSample(e,n){let r=n&&n.totals.bytesSent||0,i=n&&n.totals.bytesReceived||0,o=n&&n.totals.packetsSent||0,s=n&&n.totals.packetsReceived||0,a=n&&n.totals.packetsLost||0,c=e.bytesSent-r,u=e.bytesReceived-i,l=e.packetsSent-o,d=e.packetsReceived-s,f=e.packetsLost-a,h=d+f,p=h>0?f/h*100:0,v=e.packetsReceived+e.packetsLost,g=v>0?e.packetsLost/v*100:100,_=typeof e.rtt=="number"||!n?e.rtt:n.rtt,U=this._inputVolumes.splice(0);this._supplementalSampleBuffers.audioInputLevel.push(U);let q=this._outputVolumes.splice(0);return this._supplementalSampleBuffers.audioOutputLevel.push(q),{audioInputLevel:Math.round(Ti(U)),audioOutputLevel:Math.round(Ti(q)),bytesReceived:u,bytesSent:c,codecName:e.codecName,jitter:e.jitter,mos:this._mos.calculate(_,e.jitter,n&&p),packetsLost:f,packetsLostFraction:p,packetsReceived:d,packetsSent:l,rtt:_,timestamp:e.timestamp,totals:{bytesReceived:e.bytesReceived,bytesSent:e.bytesSent,packetsLost:e.packetsLost,packetsLostFraction:g,packetsReceived:e.packetsReceived,packetsSent:e.packetsSent}}}_fetchSample(){this._getSample().then(e=>{this._addSample(e),this._raiseWarnings(),this.emit("sample",e)}).catch(e=>{this.disable(),this.emit("error",e)})}_getSample(){return this._getRTCStats(this._peerConnection).then(e=>{let n=null;return this._sampleBuffer.length&&(n=this._sampleBuffer[this._sampleBuffer.length-1]),this._createSample(e,n)})}_raiseWarning(e,n,r){let i=`${e}:${n}`;if(this._activeWarnings.has(i))return;this._activeWarnings.set(i,{timeRaised:Date.now()});let o=this._thresholds[e],s;if(Array.isArray(o)){let a=o.find(c=>n in c);a&&(s=a[n])}else s=this._thresholds[e][n];this.emit("warning",Object.assign(Object.assign({},r),{name:e,threshold:{name:n,value:s}}))}_raiseWarnings(){this._warningsEnabled&&Object.keys(this._thresholds).forEach(e=>this._raiseWarningsForStat(e))}_raiseWarningsForStat(e){(Array.isArray(this._thresholds[e])?this._thresholds[e]:[this._thresholds[e]]).forEach(r=>{let i=this._sampleBuffer,o=r.clearCount||AB,s=r.raiseCount||RB,a=r.sampleCount||this._maxSampleCount,c=i.slice(-a),u=c.map(f=>f[e]);if(u.some(f=>typeof f>"u"||f===null))return;let d;if(typeof r.max=="number"&&(d=PB(r.max,u),d>=s?this._raiseWarning(e,"max",{values:u,samples:c}):d<=o&&this._clearWarning(e,"max",{values:u,samples:c})),typeof r.min=="number"&&(d=OB(r.min,u),d>=s?this._raiseWarning(e,"min",{values:u,samples:c}):d<=o&&this._clearWarning(e,"min",{values:u,samples:c})),typeof r.maxDuration=="number"&&i.length>1){c=i.slice(-2);let f=c[0][e],h=c[1][e],p=this._currentStreaks.get(e)||0,v=f===h?p+1:0;this._currentStreaks.set(e,v),v>=r.maxDuration?this._raiseWarning(e,"maxDuration",{value:v}):v===0&&this._clearWarning(e,"maxDuration",{value:p})}if(typeof r.minStandardDeviation=="number"){let f=this._supplementalSampleBuffers[e];if(!f||f.length<r.sampleCount)return;f.length>r.sampleCount&&f.splice(0,f.length-r.sampleCount);let h=LB(f.slice(-a)),p=xB(h);if(typeof p!="number")return;p<r.minStandardDeviation?this._raiseWarning(e,"minStandardDeviation",{value:p}):this._clearWarning(e,"minStandardDeviation",{value:p})}[["maxAverage",(f,h)=>f>h],["minAverage",(f,h)=>f<h]].forEach(([f,h])=>{if(typeof r[f]=="number"&&u.length>=a){let p=Ti(u);h(p,r[f])?this._raiseWarning(e,f,{values:u,samples:c}):h(p,r.clearValue||r[f])||this._clearWarning(e,f,{values:u,samples:c})}})})}};var wS={factor:1.1,jitter:.5,max:3e4,min:1},FB=70,VB=500,UB=160,jB=10,BB=5e3,bS={disconnect:!0,info:{code:31003,message:"Connection with Twilio was interrupted.",twilioError:new vt.ConnectionError}},CS={packetsLostFraction:{max:"packet-loss",maxAverage:"packets-lost-fraction"}},DS={audioInputLevel:"audio-input-level",audioOutputLevel:"audio-output-level",bytesReceived:"bytes-received",bytesSent:"bytes-sent",jitter:"jitter",mos:"mos",rtt:"rtt"},HB={max:"high-",maxAverage:"high-",maxDuration:"constant-",min:"low-",minStandardDeviation:"constant-"},it=class t extends TS.EventEmitter{get direction(){return this._direction}get codec(){return this._codec}get connectToken(){let e=this._signalingReconnectToken,n=this.parameters&&this.parameters.CallSid?this.parameters.CallSid:void 0;if(!e||!n)return;let r=this.customParameters&&typeof this.customParameters.keys=="function"?Array.from(this.customParameters.keys()).reduce((o,s)=>(o[s]=this.customParameters.get(s),o),{}):{},i=this.parameters||{};return btoa(encodeURIComponent(JSON.stringify({customParameters:r,parameters:i,signalingReconnectToken:e})))}constructor(e,n){super(),this.parameters={},this._inputVolumeStreak=0,this._isAnswered=!1,this._isCancelled=!1,this._isRejected=!1,this._latestInputVolume=0,this._latestOutputVolume=0,this._log=new ae("Call"),this._mediaStatus=t.State.Pending,this._messages=new Map,this._metricsSamples=[],this._options={MediaHandler:b,MediaStream:null,enableImprovedSignalingErrorPrecision:!1,offerSdp:null,shouldPlayDisconnect:()=>!0,voiceEventSidGenerator:Ga},this._outputVolumeStreak=0,this._shouldSendHangup=!0,this._signalingStatus=t.State.Pending,this._soundcache=new Map,this._status=t.State.Pending,this._wasConnected=!1,this.toString=()=>"[Twilio.Call instance]",this._emitWarning=(s,a,c,u,l,d)=>{let h=`${s}warning${l?"-cleared":"-raised"}`;if(a==="constant-audio-input-level"&&this.isMuted())return;let p=l?"info":"warning";a==="constant-audio-output-level"&&(p="info");let v={threshold:c};if(u&&(u instanceof Array?v.values=u.map(g=>typeof g=="number"?Math.round(g*100)/100:u):v.value=u),this._publisher.post(p,h,a,{data:v},this),a!=="constant-audio-output-level"){let g=l?"warning-cleared":"warning";this._log.debug(`#${g}`,a),this.emit(g,a,d&&!l?d:null)}},this._onAck=s=>{let{acktype:a,callsid:c,voiceeventsid:u}=s;if(this.parameters.CallSid!==c){this._log.warn(`Received ack from a different callsid: ${c}`);return}a==="message"&&this._onMessageSent(u)},this._onAnswer=s=>{typeof s.reconnect=="string"&&(this._signalingReconnectToken=s.reconnect),!(this._isAnswered&&this._status!==t.State.Reconnecting)&&(this._setCallSid(s),this._isAnswered=!0,this._maybeTransitionToOpen())},this._onCancel=s=>{let a=s.callsid;this.parameters.CallSid===a&&(this._isCancelled=!0,this._publisher.info("connection","cancel",null,this),this._cleanupEventListeners(),this._mediaHandler.close(),this._status=t.State.Closed,this._log.debug("#cancel"),this.emit("cancel"),this._pstream.removeListener("cancel",this._onCancel))},this._onConnected=()=>{this._log.info("Received connected from pstream"),this._signalingReconnectToken&&this._mediaHandler.version&&this._pstream.reconnect(this._mediaHandler.version.getSDP(),this.parameters.CallSid,this._signalingReconnectToken)},this._onHangup=s=>{if(this.status()!==t.State.Closed){if(s.callsid&&(this.parameters.CallSid||this.outboundConnectionId)){if(s.callsid!==this.parameters.CallSid&&s.callsid!==this.outboundConnectionId)return}else if(s.callsid)return;if(this._log.info("Received HANGUP from gateway"),s.error){let a=s.error.code,c=Ua(this._options.enableImprovedSignalingErrorPrecision,a),u=typeof c<"u"?new c(s.error.message):new Ee.ConnectionError("Error sent from gateway in HANGUP",s.error);this._log.error("Received an error from the gateway:",u),this._log.debug("#error",u),this.emit("error",u)}this._shouldSendHangup=!1,this._publisher.info("connection","disconnected-by-remote",null,this),this._disconnect(null,!0),this._cleanupEventListeners()}},this._onMediaFailure=s=>{let{ConnectionDisconnected:a,ConnectionFailed:c,IceGatheringFailed:u,LowBytes:l}=t.MediaFailure,d=s===c||s===u;if(!$a(window,window.navigator)&&s===c)return this._mediaHandler.onerror(bS);if(this._mediaStatus===t.State.Reconnecting){if(d){if(Date.now()-this._mediaReconnectStartTime>wS.max)return this._log.warn("Exceeded max ICE retries"),this._mediaHandler.onerror(bS);try{this._mediaReconnectBackoff.backoff()}catch(v){if(!(v.message&&v.message==="Backoff in progress."))throw v}}return}let f=this._mediaHandler.version.pc,h=f&&f.iceConnectionState==="disconnected",p=this._monitor.hasActiveWarning("bytesSent","min")||this._monitor.hasActiveWarning("bytesReceived","min");if(s===l&&h||s===a&&p||d){let v=new vt.ConnectionError("Media connection failed.");this._log.warn("ICE Connection disconnected."),this._publisher.warn("connection","error",v,this),this._publisher.info("connection","reconnecting",null,this),this._mediaReconnectStartTime=Date.now(),this._status=t.State.Reconnecting,this._mediaStatus=t.State.Reconnecting,this._mediaReconnectBackoff.reset(),this._mediaReconnectBackoff.backoff(),this._log.debug("#reconnecting"),this.emit("reconnecting",v)}},this._onMediaReconnected=()=>{this._mediaStatus===t.State.Reconnecting&&(this._log.info("ICE Connection reestablished."),this._mediaStatus=t.State.Open,this._signalingStatus===t.State.Open&&(this._publisher.info("connection","reconnected",null,this),this._log.debug("#reconnected"),this.emit("reconnected"),this._status=t.State.Open))},this._onMessageReceived=s=>{let{callsid:a,content:c,contenttype:u,messagetype:l,voiceeventsid:d}=s;if(this.parameters.CallSid!==a){this._log.warn(`Received a message from a different callsid: ${a}`);return}let f={content:c,contentType:u,messageType:l,voiceEventSid:d};this._publisher.info("call-message",l,{content_type:u,event_type:"received",voice_event_sid:d},this),this._log.debug("#messageReceived",JSON.stringify(f)),this.emit("messageReceived",f)},this._onMessageSent=s=>{if(!this._messages.has(s)){this._log.warn(`Received a messageSent with a voiceEventSid that doesn't exists: ${s}`);return}let a=this._messages.get(s);this._messages.delete(s),this._publisher.info("call-message",a?.messageType,{content_type:a?.contentType,event_type:"sent",voice_event_sid:s},this),this._log.debug("#messageSent",JSON.stringify(a)),this.emit("messageSent",a)},this._onRinging=s=>{if(this._setCallSid(s),this._status!==t.State.Connecting&&this._status!==t.State.Ringing)return;let a=!!s.sdp;this._status=t.State.Ringing,this._publisher.info("connection","outgoing-ringing",{hasEarlyMedia:a},this),this._log.debug("#ringing"),this.emit("ringing",a)},this._onRTCSample=s=>{let a=Object.assign(Object.assign({},s),{inputVolume:this._latestInputVolume,outputVolume:this._latestOutputVolume});this._codec=a.codecName,this._metricsSamples.push(a),this._metricsSamples.length>=jB&&this._publishMetrics(),this.emit("sample",s)},this._onSignalingError=s=>{let{callsid:a,voiceeventsid:c,error:u}=s;if(this.parameters.CallSid!==a){this._log.warn(`Received an error from a different callsid: ${a}`);return}if(c&&this._messages.has(c)){this._messages.delete(c),this._log.warn("Received an error while sending a message.",s),this._publisher.error("call-message","error",{code:u.code,message:u.message,voice_event_sid:c},this);let l,d=Ua(!!this._options.enableImprovedSignalingErrorPrecision,u.code);typeof d<"u"&&(l=new d(u)),l||(this._log.error("Unknown Call Message Error: ",u),l=new Ee.UnknownError(u.message,u)),this._log.debug("#error",u,l),this.emit("error",l)}},this._onSignalingReconnected=()=>{this._signalingStatus===t.State.Reconnecting&&(this._log.info("Signaling Connection reestablished."),this._signalingStatus=t.State.Open,this._mediaStatus===t.State.Open&&(this._publisher.info("connection","reconnected",null,this),this._log.debug("#reconnected"),this.emit("reconnected"),this._status=t.State.Open))},this._onTransportClose=()=>{this._log.error("Received transportClose from pstream"),this._log.debug("#transportClose"),this.emit("transportClose"),this._signalingReconnectToken?(this._status=t.State.Reconnecting,this._signalingStatus=t.State.Reconnecting,this._publisher.info("connection","reconnecting",null,this),this._log.debug("#reconnecting"),this.emit("reconnecting",new Oe.ConnectionDisconnected)):(this._status=t.State.Closed,this._signalingStatus=t.State.Closed)},this._reemitWarning=(s,a)=>{let c=/^audio/.test(s.name)?"audio-level-":"network-quality-",u=HB[s.threshold.name],l;s.name in CS?l=CS[s.name][s.threshold.name]:s.name in DS&&(l=DS[s.name]);let d=u+l;this._emitWarning(c,d,s.threshold.value,s.values||s.value,a,s)},this._reemitWarningCleared=s=>{this._reemitWarning(s,!0)},this._soundcache=e.soundcache,typeof e.onIgnore=="function"&&(this._onIgnore=e.onIgnore);let r=n&&n.twimlParams||{};this.customParameters=new Map(Object.entries(r).map(([s,a])=>[s,String(a)])),Object.assign(this._options,n),this._options.callParameters&&(this.parameters=this._options.callParameters),this._options.reconnectToken&&(this._signalingReconnectToken=this._options.reconnectToken),this._voiceEventSidGenerator=this._options.voiceEventSidGenerator||Ga,this._direction=this.parameters.CallSid&&!this._options.reconnectCallSid?t.CallDirection.Incoming:t.CallDirection.Outgoing,this.parameters?this.callerInfo=this.parameters.StirStatus?{isVerified:this.parameters.StirStatus==="TN-Validation-Passed-A"}:null:this.callerInfo=null,this._mediaReconnectBackoff=new Di(wS),this._mediaReconnectBackoff.on("ready",()=>this._mediaHandler.iceRestart()),this.outboundConnectionId=$B();let i=this._publisher=e.publisher;this._direction===t.CallDirection.Incoming?i.info("connection","incoming",null,this):i.info("connection","outgoing",{preflight:this._options.preflight,reconnect:!!this._options.reconnectCallSid},this);let o=this._monitor=new(this._options.StatsMonitor||Yd);o.on("sample",this._onRTCSample),o.disableWarnings(),setTimeout(()=>o.enableWarnings(),BB),o.on("warning",(s,a)=>{(s.name==="bytesSent"||s.name==="bytesReceived")&&this._onMediaFailure(t.MediaFailure.LowBytes),this._reemitWarning(s,a)}),o.on("warning-cleared",s=>{this._reemitWarningCleared(s)}),this._mediaHandler=new this._options.MediaHandler(e.audioHelper,e.pstream,{MediaStream:this._options.MediaStream,RTCPeerConnection:this._options.RTCPeerConnection,codecPreferences:this._options.codecPreferences,dscp:this._options.dscp,forceAggressiveIceNomination:this._options.forceAggressiveIceNomination,maxAverageBitrate:this._options.maxAverageBitrate}),this.on("volume",(s,a)=>{this._inputVolumeStreak=this._checkVolume(s,this._inputVolumeStreak,this._latestInputVolume,"input"),this._outputVolumeStreak=this._checkVolume(a,this._outputVolumeStreak,this._latestOutputVolume,"output"),this._latestInputVolume=s,this._latestOutputVolume=a}),this._mediaHandler.onaudio=s=>{this._log.debug("#audio"),this.emit("audio",s)},this._mediaHandler.onvolume=(s,a,c,u)=>{o.addVolumes(c/255*32767,u/255*32767),this.emit("volume",s,a)},this._mediaHandler.ondtlstransportstatechange=s=>{let a=s==="failed"?"error":"debug";this._publisher.post(a,"dtls-transport-state",s,null,this)},this._mediaHandler.onpcconnectionstatechange=s=>{let a="debug",c=this._mediaHandler.getRTCDtlsTransport();s==="failed"&&(a=c&&c.state==="failed"?"error":"warning"),this._publisher.post(a,"pc-connection-state",s,null,this)},this._mediaHandler.onicecandidate=s=>{let a=new Go(s).toPayload();this._publisher.debug("ice-candidate","ice-candidate",a,this)},this._mediaHandler.onselectedcandidatepairchange=s=>{let a=new Go(s.local).toPayload(),c=new Go(s.remote,!0).toPayload();this._publisher.debug("ice-candidate","selected-ice-candidate-pair",{local_candidate:a,remote_candidate:c},this)},this._mediaHandler.oniceconnectionstatechange=s=>{let a=s==="failed"?"error":"debug";this._publisher.post(a,"ice-connection-state",s,null,this)},this._mediaHandler.onicegatheringfailure=s=>{this._publisher.warn("ice-gathering-state",s,null,this),this._onMediaFailure(t.MediaFailure.IceGatheringFailed)},this._mediaHandler.onicegatheringstatechange=s=>{this._publisher.debug("ice-gathering-state",s,null,this)},this._mediaHandler.onsignalingstatechange=s=>{this._publisher.debug("signaling-state",s,null,this)},this._mediaHandler.ondisconnected=s=>{this._log.warn(s),this._publisher.warn("network-quality-warning-raised","ice-connectivity-lost",{message:s},this),this._log.debug("#warning","ice-connectivity-lost"),this.emit("warning","ice-connectivity-lost"),this._onMediaFailure(t.MediaFailure.ConnectionDisconnected)},this._mediaHandler.onfailed=s=>{this._onMediaFailure(t.MediaFailure.ConnectionFailed)},this._mediaHandler.onconnected=()=>{this._status===t.State.Reconnecting&&this._onMediaReconnected()},this._mediaHandler.onreconnected=s=>{this._log.info(s),this._publisher.info("network-quality-warning-cleared","ice-connectivity-lost",{message:s},this),this._log.debug("#warning-cleared","ice-connectivity-lost"),this.emit("warning-cleared","ice-connectivity-lost"),this._onMediaReconnected()},this._mediaHandler.onerror=s=>{s.disconnect===!0&&this._disconnect(s.info&&s.info.message);let a=s.info.twilioError||new Ee.UnknownError(s.info.message);this._log.error("Received an error from MediaStream:",s),this._log.debug("#error",a),this.emit("error",a)},this._mediaHandler.onopen=()=>{this._status===t.State.Open||this._status===t.State.Reconnecting||(this._status===t.State.Ringing||this._status===t.State.Connecting?(this.mute(this._mediaHandler.isMuted),this._mediaStatus=t.State.Open,this._maybeTransitionToOpen()):this._mediaHandler.close())},this._mediaHandler.onclose=()=>{this._status=t.State.Closed,this._options.shouldPlayDisconnect&&this._options.shouldPlayDisconnect()&&!this._isCancelled&&!this._isRejected&&this._soundcache.get(be.SoundName.Disconnect).play(),o.disable(),this._publishMetrics(),!this._isCancelled&&!this._isRejected&&(this._log.debug("#disconnect"),this.emit("disconnect",this))},this._pstream=e.pstream,this._pstream.on("ack",this._onAck),this._pstream.on("cancel",this._onCancel),this._pstream.on("error",this._onSignalingError),this._pstream.on("ringing",this._onRinging),this._pstream.on("transportClose",this._onTransportClose),this._pstream.on("connected",this._onConnected),this._pstream.on("message",this._onMessageReceived),this.on("error",s=>{this._publisher.error("connection","error",{code:s.code,message:s.message},this),this._pstream&&this._pstream.status==="disconnected"&&this._cleanupEventListeners()}),this.on("disconnect",()=>{this._cleanupEventListeners()})}_setInputTracksFromStream(e){return this._mediaHandler.setInputTracksFromStream(e)}_setSinkIds(e){return this._mediaHandler._setSinkIds(e)}accept(e){if(this._log.debug(".accept",e),this._status!==t.State.Pending){this._log.debug(`.accept noop. status is '${this._status}'`);return}e=e||{};let n=e.rtcConfiguration||this._options.rtcConfiguration,r=e.rtcConstraints||this._options.rtcConstraints||{},i={audio:typeof r.audio<"u"?r.audio:!0};this._status=t.State.Connecting;let o=()=>{if(this._status!==t.State.Connecting){this._cleanupEventListeners(),this._mediaHandler.close();return}let c=l=>{let d=this._direction===t.CallDirection.Incoming?"accepted-by-local":"accepted-by-remote";this._publisher.info("connection",d,null,this);let{codecName:f,codecParams:h}=uS(this._mediaHandler.version.getSDP());this._publisher.info("settings","codec",{codec_params:h,selected_codec:f},this),this._monitor.enable(l)},u=typeof this._options.getSinkIds=="function"&&this._options.getSinkIds();if(Array.isArray(u)&&this._mediaHandler._setSinkIds(u).catch(()=>{}),this._pstream.addListener("hangup",this._onHangup),this._direction===t.CallDirection.Incoming)this._isAnswered=!0,this._pstream.on("answer",this._onAnswer),this._mediaHandler.answerIncomingCall(this.parameters.CallSid,this._options.offerSdp,n,c);else{let l=Array.from(this.customParameters.entries()).map(d=>`${encodeURIComponent(d[0])}=${encodeURIComponent(d[1])}`).join("&");this._pstream.on("answer",this._onAnswer),this._mediaHandler.makeOutgoingCall(l,this._signalingReconnectToken,this._options.reconnectCallSid||this.outboundConnectionId,n,c)}};this._options.beforeAccept&&this._options.beforeAccept(this);let s=typeof this._options.getInputStream=="function"&&this._options.getInputStream();(s?this._mediaHandler.setInputTracksFromStream(s):this._mediaHandler.openDefaultDeviceWithConstraints(i)).then(()=>{this._publisher.info("get-user-media","succeeded",{data:{audioConstraints:i}},this),o()},c=>{let u;c.code===31208||["PermissionDeniedError","NotAllowedError"].indexOf(c.name)!==-1?(u=new pr.PermissionDeniedError,this._publisher.error("get-user-media","denied",{data:{audioConstraints:i,error:c}},this)):(u=new pr.AcquisitionFailedError,this._publisher.error("get-user-media","failed",{data:{audioConstraints:i,error:c}},this)),this._disconnect(),this._log.debug("#error",c),this.emit("error",u)})}disconnect(){this._log.debug(".disconnect"),this._disconnect()}getLocalStream(){return this._mediaHandler&&this._mediaHandler.stream}getRemoteStream(){return this._mediaHandler&&this._mediaHandler._remoteStream}ignore(){if(this._log.debug(".ignore"),this._status!==t.State.Pending){this._log.debug(`.ignore noop. status is '${this._status}'`);return}this._status=t.State.Closed,this._mediaHandler.ignore(this.parameters.CallSid),this._publisher.info("connection","ignored-by-local",null,this),this._onIgnore&&this._onIgnore()}isMuted(){return this._mediaHandler.isMuted}mute(e=!0){this._log.debug(".mute",e);let n=this._mediaHandler.isMuted;this._mediaHandler.mute(e);let r=this._mediaHandler.isMuted;n!==r&&(this._publisher.info("connection",r?"muted":"unmuted",null,this),this._log.debug("#mute",r),this.emit("mute",r,this))}postFeedback(e,n){if(typeof e>"u"||e===null)return this._postFeedbackDeclined();if(!Object.values(t.FeedbackScore).includes(e))throw new x(`Feedback score must be one of: ${Object.values(t.FeedbackScore)}`);if(typeof n<"u"&&n!==null&&!Object.values(t.FeedbackIssue).includes(n))throw new x(`Feedback issue must be one of: ${Object.values(t.FeedbackIssue)}`);return this._publisher.info("feedback","received",{issue_name:n,quality_score:e},this,!0)}reject(){if(this._log.debug(".reject"),this._status!==t.State.Pending){this._log.debug(`.reject noop. status is '${this._status}'`);return}this._isRejected=!0,this._pstream.reject(this.parameters.CallSid),this._mediaHandler.reject(this.parameters.CallSid),this._publisher.info("connection","rejected-by-local",null,this),this._cleanupEventListeners(),this._mediaHandler.close(),this._status=t.State.Closed,this._log.debug("#reject"),this.emit("reject")}sendDigits(e){if(this._log.debug(".sendDigits",e),e.match(/[^0-9*#w]/))throw new x("Illegal character passed into sendDigits");let n=this._options.customSounds||{},r=[];e.split("").forEach(a=>{let c=a!=="w"?`dtmf${a}`:"";c==="dtmf*"&&(c="dtmfs"),c==="dtmf#"&&(c="dtmfh"),r.push(c)});let i=()=>{let a=r.shift();a&&(this._options.dialtonePlayer&&!n[a]?this._options.dialtonePlayer.play(a):this._soundcache.get(a).play()),r.length&&setTimeout(()=>i(),200)};i();let o=this._mediaHandler.getOrCreateDTMFSender();function s(a){if(!a.length)return;let c=a.shift();c&&c.length&&o.insertDTMF(c,UB,FB),setTimeout(s.bind(null,a),VB)}if(o){if(!("canInsertDTMF"in o)||o.canInsertDTMF){this._log.info("Sending digits using RTCDTMFSender"),s(e.split("w"));return}this._log.info("RTCDTMFSender cannot insert DTMF")}if(this._log.info("Sending digits over PStream"),this._pstream!==null&&this._pstream.status!=="disconnected")this._pstream.dtmf(this.parameters.CallSid,e);else{let a=new Ee.ConnectionError("Could not send DTMF: Signaling channel is disconnected");this._log.debug("#error",a),this.emit("error",a)}}sendMessage(e){this._log.debug(".sendMessage",JSON.stringify(e));let{content:n,contentType:r,messageType:i}=e;if(typeof n>"u"||n===null)throw new x("`content` is empty");if(typeof i!="string")throw new x("`messageType` must be a string.");if(i.length===0)throw new x("`messageType` must be a non-empty string.");if(this._pstream===null)throw new ze("Could not send CallMessage; Signaling channel is disconnected");let o=this.parameters.CallSid;if(typeof this.parameters.CallSid>"u")throw new ze("Could not send CallMessage; Call has no CallSid");let s=this._voiceEventSidGenerator();return this._messages.set(s,{content:n,contentType:r,messageType:i,voiceEventSid:s}),this._pstream.sendMessage(o,n,r,i,s),s}status(){return this._status}_checkVolume(e,n,r,i){let o=n>=10,s=0;return r===e&&(s=n),s>=10?this._emitWarning("audio-level-",`constant-audio-${i}-level`,10,s,!1):o&&this._emitWarning("audio-level-",`constant-audio-${i}-level`,10,s,!0),s}_cleanupEventListeners(){let e=()=>{this._pstream&&(this._pstream.removeListener("ack",this._onAck),this._pstream.removeListener("answer",this._onAnswer),this._pstream.removeListener("cancel",this._onCancel),this._pstream.removeListener("error",this._onSignalingError),this._pstream.removeListener("hangup",this._onHangup),this._pstream.removeListener("ringing",this._onRinging),this._pstream.removeListener("transportClose",this._onTransportClose),this._pstream.removeListener("connected",this._onConnected),this._pstream.removeListener("message",this._onMessageReceived))};e(),setTimeout(e,0)}_createMetricPayload(){let e={call_sid:this.parameters.CallSid,dscp:!!this._options.dscp,sdk_version:Fn};return this._options.gateway&&(e.gateway=this._options.gateway),e.direction=this._direction,e}_disconnect(e,n){if(e=typeof e=="string"?e:null,!(this._status!==t.State.Open&&this._status!==t.State.Connecting&&this._status!==t.State.Reconnecting&&this._status!==t.State.Ringing)){if(this._log.info("Disconnecting..."),this._pstream!==null&&this._pstream.status!=="disconnected"&&this._shouldSendHangup){let r=this.parameters.CallSid||this.outboundConnectionId;r&&this._pstream.hangup(r,e)}this._cleanupEventListeners(),this._mediaHandler.close(),n||this._publisher.info("connection","disconnected-by-local",null,this)}}_maybeTransitionToOpen(){this._wasConnected,this._isAnswered&&(this._onSignalingReconnected(),this._signalingStatus=t.State.Open,this._mediaHandler&&this._mediaHandler.status==="open"&&(this._status=t.State.Open,this._wasConnected||(this._wasConnected=!0,this._log.debug("#accept"),this.emit("accept",this))))}_postFeedbackDeclined(){return this._publisher.info("feedback","received-none",null,this,!0)}_publishMetrics(){this._metricsSamples.length!==0&&this._publisher.postMetrics("quality-metrics-samples","metrics-sample",this._metricsSamples.splice(0),this._createMetricPayload(),this).catch(e=>{this._log.warn("Unable to post metrics to Insights. Received error:",e)})}_setCallSid(e){let n=e.callsid;n&&(this.parameters.CallSid=n,this._mediaHandler.callSid=n)}};(function(t){(function(e){e.Closed="closed",e.Connecting="connecting",e.Open="open",e.Pending="pending",e.Reconnecting="reconnecting",e.Ringing="ringing"})(t.State||(t.State={})),(function(e){e.AudioLatency="audio-latency",e.ChoppyAudio="choppy-audio",e.DroppedCall="dropped-call",e.Echo="echo",e.NoisyCall="noisy-call",e.OneWayAudio="one-way-audio"})(t.FeedbackIssue||(t.FeedbackIssue={})),(function(e){e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five"})(t.FeedbackScore||(t.FeedbackScore={})),(function(e){e.Incoming="INCOMING",e.Outgoing="OUTGOING"})(t.CallDirection||(t.CallDirection={})),(function(e){e.Opus="opus",e.PCMU="pcmu"})(t.Codec||(t.Codec={})),(function(e){e.None="none",e.Timeout="timeout"})(t.IceGatheringFailureReason||(t.IceGatheringFailureReason={})),(function(e){e.ConnectionDisconnected="ConnectionDisconnected",e.ConnectionFailed="ConnectionFailed",e.IceGatheringFailed="IceGatheringFailed",e.LowBytes="LowBytes"})(t.MediaFailure||(t.MediaFailure={}))})(it||(it={}));function $B(){return"TJSxxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{let e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}var Ri={apiUrl:"/api",twilio_Phone:"+61468046617"};var Jd=class t{http=m(mo);auth=m(pt);API_URL=`${Ri.apiUrl}/conversations`;getAll(){return jl(this.auth).pipe(Be(1),De(e=>{let n=new on().set("Authorization",`Bearer ${e}`);return this.http.get(this.API_URL,{headers:n})}))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})};var zB=(t,e)=>({flex:t,hidden:e,"md:flex":!0}),GB=(t,e)=>({hidden:t,flex:e,"md:flex":!0}),qB=t=>({"bg-blue-100":t}),KB=(t,e)=>({"self-end bg-green-200 text-black rounded-tr-none":t,"self-start bg-white text-gray-800 rounded-tl-none":e});function YB(t,e){if(t&1){let n=Xr();A(0,"div",19),Se("click",function(){let i=Ye(n).$implicit,o=ke();return Je(o.onContactSelect(i))}),ft(1,"img",20),A(2,"div",21)(3,"div",22)(4,"div",23),re(5),L(),A(6,"div",24)(7,"span"),re(8),L()()(),A(9,"p",25),re(10),L(),A(11,"p",26),re(12),L()()()}if(t&2){let n=e.$implicit,r=ke();$e("ngClass",Yp(7,qB,n.is_selected))("title",r.getContactLabel(n)),ne(),$e("src","https://ui-avatars.com/api/?name="+((n.contact==null||n.contact.fields==null?null:n.contact.fields.Name)??"New Contact"),wp),ne(4),rn(" ",r.getContactLabel(n)," "),ne(3),ei(r.calculateTimeDifference(n)),ne(2),ei(n.phone),ne(2),ei(r.lastMessageBody(n))}}function JB(t,e){if(t&1&&(A(0,"div",33)(1,"div",36),re(2),L(),A(3,"div",37),re(4),L()()),t&2){let n=e.$implicit,r=ke(2);$e("ngClass",xs(3,KB,n.from===r.twilioPhone,n.from!==r.twilioPhone)),ne(2),ei(n.body),ne(2),rn(" ",n.date_created.slice(0,22)||""," ")}}function ZB(t,e){if(t&1){let n=Xr();A(0,"div",16)(1,"h3",27)(2,"button",28),Se("click",function(){Ye(n);let i=ke();return Je(i.selectedContact=void 0)}),re(3," \u2190 "),L(),re(4),A(5,"button",29),Se("click",function(){Ye(n);let i=ke();return Je(i.handlePhoneCallModal(!0))}),Ji(),A(6,"svg",30),ft(7,"path",31),L()()(),Zi(),A(8,"div",32),qp(9,JB,5,6,"div",33,Gp),L(),A(11,"div",34)(12,"input",35),ni("ngModelChange",function(i){Ye(n);let o=ke();return so(o.newMessage,i)||(o.newMessage=i),Je(i)}),Se("keyup.enter",function(){Ye(n);let i=ke();return Je(i.sendMessage())}),L()()()}if(t&2){let n=ke();ne(4),rn(" Chat with ",n.getContactLabel(n.selectedContact)," "),ne(5),Kp(n.selectedContact.messages),ne(3),ti("ngModel",n.newMessage)}}function QB(t,e){t&1&&(A(0,"div",17)(1,"h3",38),re(2," Select a contact to start messaging "),L()())}function XB(t,e){if(t&1){let n=Xr();A(0,"div",39)(1,"div",40)(2,"h2",41),re(3,"Who are you reaching out today?"),L(),A(4,"div",42)(5,"span",43),re(6,"Just send text"),L(),A(7,"label",44),ft(8,"input",45,1)(10,"div",46)(11,"div",47),L(),A(12,"span",48),re(13,"Save contact"),L()(),ft(14,"input",49,2)(16,"input",50,3),A(18,"div",51)(19,"button",52),Se("click",function(){Ye(n);let i=ke();return Je(i.handleNewTextModal(!1))}),re(20," Never mind "),L(),A(21,"button",53),Se("click",function(){Ye(n);let i=oo(9),o=oo(15),s=oo(17),a=ke();return Je(a.goToChat({name:o.value,phone:s.value,save:i.checked}))}),re(22," Let's chat "),L()()()()}}function e2(t,e){if(t&1){let n=Xr();A(0,"div",39)(1,"div",54)(2,"button",55),Se("click",function(){Ye(n);let i=ke();return Je(i.handlePhoneCallModal(!1))}),Ji(),A(3,"svg",56),ft(4,"line",57)(5,"line",58),L()(),Zi(),A(6,"div",59)(7,"h1",60),re(8,"Twilio Web Call"),L()(),A(9,"div",61),re(10),L(),A(11,"div",62)(12,"div",63)(13,"button",64),Se("click",function(){Ye(n);let i=ke();return Je(i.startCall())}),re(14," Call "),L(),A(15,"button",65),Se("click",function(){Ye(n);let i=ke();return Je(i.hangUp())}),re(16," Hangup "),L()()()()()}if(t&2){let n=ke();ne(10),rn(" ",n.twilioCallStatus," "),ne(3),$e("disabled",n.activeCall),ne(2),$e("disabled",!n.activeCall)}}var Zd=class t{constructor(e,n,r){this.contactService=e;this.http=n;this.cd=r}contacts=[];filteredContacts=[];searchTerm="";selectedContact;newMessage="";twilioPhone=Ri.twilio_Phone;isModalOpen=!1;isPhoneCallModalOpen=!1;device;twilioCallStatus="";activeCall=null;ngOnInit(){this.refreshData(),setInterval(()=>{this.refreshData()},5e3)}refreshData(){this.contactService.getAll().subscribe(e=>{this.contacts=[...e],this.filteredContacts.length===0&&(this.filteredContacts=[...e]),this.cd.detectChanges()})}search(e){let n=e.trim().toLowerCase();if(!n){this.filteredContacts=[...this.contacts],this.cd.detectChanges();return}this.filteredContacts=this.contacts.filter(r=>{let i=r.phone?.toLowerCase().includes(n),o=r.contact?.fields?.Name?.toLowerCase().includes(n);return i||o}),this.cd.detectChanges()}getContactLabel(e){let n=e.contact?.fields;return n?.Name?n["Shoot Date"]?`${n.Name} | ${n["Shoot Date"]}`:n.Name:e.phone}trackByPhone(e,n){return n.phone}onContactSelect(e){this.contacts.forEach(n=>n.is_selected=!1),e.is_selected=!0,this.selectedContact=e,setTimeout(()=>{let n=document.querySelector(".messages");n&&(n.scrollTop=n.scrollHeight)},0)}calculateTimeDifference(e){if(!e.last_message)return"";let n=e.last_message.date_created,r=new Date(n),o=new Date().getTime()-r.getTime(),s=[{label:"year",ms:1e3*60*60*24*365},{label:"month",ms:1e3*60*60*24*30},{label:"day",ms:1e3*60*60*24},{label:"hour",ms:1e3*60*60},{label:"minute",ms:1e3*60}];for(let a of s){let c=Math.floor(o/a.ms);if(c>0)return`${c} ${a.label}${c>1?"s":""} ago`}return"just now"}lastMessageBody(e){return e.last_message?e.last_message.body:""}sendMessage(){if(!this.newMessage.trim()||!this.selectedContact)return;let e={to:this.selectedContact.phone,text:this.newMessage.trim()};this.selectedContact.messages=[...this.selectedContact.messages,{from:this.twilioPhone,to:this.selectedContact.phone,body:this.newMessage.trim(),date_created:new Date().toISOString()}],this.http.post(`${Ri.apiUrl}/send_sms`,e).subscribe({next:n=>console.log("SMS sent:",n),error:n=>console.error("Error sending SMS:",n)}),this.newMessage="",this.refreshData(),setTimeout(()=>{let n=document.querySelector(".messages");n&&(n.scrollTop=n.scrollHeight)},0)}handleNewTextModal(e){this.isModalOpen=e}async goToChat(e){let n={phone:e.phone,contact:{id:"temp_contact_id",createdTime:new Date().toISOString(),fields:{Name:e.name,Phone:e.phone}},messages:[],last_message:null,is_selected:!0};if(e.save){let r={name:e.name,phone:e.phone};this.http.post(`${Ri.apiUrl}/save_contact`,r).subscribe({next:i=>console.log("Contact saved:",i),error:i=>console.error("Error saving contact:",i)})}this.onContactSelect(n),this.handleNewTextModal(!1)}handlePhoneCallModal(e){this.isPhoneCallModalOpen=e,e&&this.setupDevice()}async setupDevice(){this.twilioCallStatus="Loading configuration...";try{let n=await(await fetch(`${Ri.apiUrl}/token`)).json();this.device=new be(n.token,{logLevel:1,edge:"frankfurt"}),this.device.on("registered",()=>{this.twilioCallStatus="Ready to call!"}),this.device.on("error",r=>{this.twilioCallStatus="Error: "+r.message,console.error("Twilio Device Error:",r)}),this.device.register()}catch(e){this.twilioCallStatus="Setup Error",console.error("Setup error:",e)}}async startCall(){let e=this.selectedContact?.phone;if(console.log(e),!e){this.twilioCallStatus="Invalid phone number";return}if(this.device){this.twilioCallStatus=`Calling ${e}`;let n={To:e};try{let r=await this.device.connect({params:n});this.activeCall=r,this.twilioCallStatus="Calling...",r.on("accept",()=>{this.twilioCallStatus="In Progress"}),r.on("disconnect",()=>{this.twilioCallStatus="Call ended",this.activeCall=null}),r.on("reject",()=>{this.twilioCallStatus="Call rejected",this.activeCall=null})}catch(r){console.error("Could not connect call:",r),this.twilioCallStatus="Call failed"}}else this.twilioCallStatus="Device not initialized"}hangUp(){this.activeCall&&(this.activeCall.disconnect(),this.activeCall=null)}static \u0275fac=function(n){return new(n||t)($(Jd),$(mo),$(ri))};static \u0275cmp=bn({type:t,selectors:[["app-home"]],decls:18,vars:14,consts:[["s",""],["save",""],["name",""],["phone",""],[1,"flex","h-screen","bg-gray-100"],[1,"w-full","md:w-95","bg-white","border-r","border-gray-300","flex","flex-col",3,"ngClass"],[1,"p-4","border-b","border-gray-200"],[1,"flex","items-center","bg-gray-100","rounded-lg","px-3","py-2"],[1,"text-gray-500","text-lg","mr-2"],["type","text","placeholder","Search for contact",1,"w-full","bg-transparent","outline-none","text-gray-800",3,"input","value"],["title","New Text",1,"cursor-pointer","w-6","h-6","flex","items-center","justify-center","rounded-full","bg-blue-500","hover:bg-blue-600","text-white","text-2xl","shadow-md","hover:shadow-lg","transition-all","duration-200",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"flex-1","overflow-y-auto"],["class","flex items-center p-3 cursor-pointer hover:bg-gray-100",3,"ngClass","title","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex-1","flex","flex-col","h-screen","overflow-hidden",3,"ngClass"],[1,"flex-1","flex","flex-col","min-h-0"],[1,"flex-1","flex","items-center","justify-center"],["class","fixed inset-0 bg-black/75 flex items-center justify-center z-50",4,"ngIf"],[1,"flex","items-center","p-3","cursor-pointer","hover:bg-gray-100",3,"click","ngClass","title"],[1,"w-12","h-12","rounded-full","object-cover","mr-3",3,"src"],[1,"flex-1","overflow-hidden"],[1,"flex","justify-between","items-start"],[1,"font-medium","text-gray-800","truncate"],[1,"text-xs","text-gray-500","ml-2","flex-shrink-0"],[1,"text-sm","text-gray-500","truncate"],[1,"text-sm","text-gray-600","truncate"],[1,"p-4","border-b","border-gray-200","font-semibold","text-gray-800","flex","items-center","z-100"],[1,"md:hidden","mr-3","text-blue-500","font-bold",3,"click"],["title","Call contact",1,"cursor-pointer","ml-auto","p-2","text-gray-500","bg-blue-100","hover:text-blue-800","transition-colors","rounded-lg",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"],[1,"flex-1","min-h-0","p-4","overflow-y-auto","space-y-3","flex","flex-col","messages"],[1,"max-w-xs","rounded-xl","px-4","py-2","break-words",3,"ngClass"],[1,"p-4","border-t","border-gray-200","flex-shrink-0"],["type","text","placeholder","Type a message",1,"w-full","border","border-gray-300","rounded-full","px-4","py-2","outline-none","focus:ring-2","focus:ring-blue-400",3,"ngModelChange","keyup.enter","ngModel"],[1,"text-sm"],[1,"text-xs","text-gray-500","mt-1","text-right"],[1,"text-gray-500","text-lg","font-medium","text-center"],[1,"fixed","inset-0","bg-black/75","flex","items-center","justify-center","z-50"],[1,"bg-white","rounded-lg","p-6","w-96","mx-2"],[1,"text-xl","font-semibold","mb-4","text-center"],[1,"flex","items-center","mb-4","justify-center"],[1,"mr-3","text-gray-700"],[1,"relative","inline-flex","items-center","cursor-pointer"],["type","checkbox",1,"sr-only","peer"],[1,"w-11","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-2","peer-focus:ring-blue-500","rounded-full","peer","peer-checked:bg-blue-500","transition-all","duration-200"],[1,"absolute","left-1","top-1","w-4","h-4","bg-white","rounded-full","shadow-md","transform","transition-all","duration-200","peer-checked:translate-x-5"],[1,"ml-3","text-gray-700"],["type","text","placeholder","Contact name",1,"w-full","mb-3","p-2","border","rounded"],["type","text","placeholder","Phone",1,"w-full","mb-3","p-2","border","rounded"],[1,"flex","justify-end","space-x-2"],[1,"cursor-pointer","px-4","py-2","bg-gray-300","rounded","hover:bg-gray-400",3,"click"],[1,"cursor-pointer","px-4","py-2","bg-blue-500","text-white","rounded","hover:bg-blue-600",3,"click"],[1,"relative","max-w-md","w-full","bg-slate-800","rounded-3xl","shadow-2xl","p-8","border","border-slate-700","mx-2"],["aria-label","Close modal",1,"absolute","top-5","right-5","text-slate-400","hover:text-white","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"text-center","mb-8"],[1,"text-2xl","font-bold","text-indigo-400"],["id","status",1,"mb-6","p-3","rounded-lg","bg-slate-700","text-center","text-xs","font-mono","uppercase","tracking-widest","text-yellow-500"],[1,"space-y-4"],[1,"grid","grid-cols-2","gap-4"],[1,"bg-emerald-600","hover:bg-emerald-500","disabled:opacity-50","py-4","rounded-xl","font-bold","transition-all","flex","items-center","justify-center","gap-2",3,"click","disabled"],[1,"bg-rose-600","hover:bg-rose-500","disabled:opacity-50","py-4","rounded-xl","font-bold","transition-all","flex","items-center","justify-center","gap-2",3,"click","disabled"]],template:function(n,r){if(n&1){let i=Xr();A(0,"div",4)(1,"aside",5)(2,"div",6)(3,"div",7)(4,"span",8),re(5,"\u{1F50D}"),L(),A(6,"input",9,0),Se("input",function(){Ye(i);let s=oo(7);return Je(r.search(s.value))}),L(),A(8,"button",10),Se("click",function(){return Ye(i),Je(r.handleNewTextModal(!0))}),Ji(),A(9,"svg",11),ft(10,"path",12),L()()()(),Zi(),A(11,"div",13),Zr(12,YB,13,9,"div",14),L()(),A(13,"main",15),$p(14,ZB,13,2,"div",16)(15,QB,3,0,"div",17),L(),Zr(16,XB,23,0,"div",18)(17,e2,17,3,"div",18),L()}n&2&&(ne(),$e("ngClass",xs(8,zB,!r.selectedContact,r.selectedContact)),ne(5),$e("value",r.searchTerm),ne(6),$e("ngForOf",r.filteredContacts)("ngForTrackBy",r.trackByPhone),ne(),$e("ngClass",xs(11,GB,!r.selectedContact,r.selectedContact)),ne(),zp(r.selectedContact?14:15),ne(2),$e("ngIf",r.isModalOpen),ne(),$e("ngIf",r.isPhoneCallModalOpen))},dependencies:[fo,ag,Vu,Vs,Dd,Bo,bd,Va],encapsulation:2})};var SS=[{path:"login",component:Sd},{path:"dashboard",component:Zd,canActivate:[nT]},{path:"",redirectTo:"/dashboard",pathMatch:"full"}];var AS=(t,e)=>{let n=m(pt);return jl(n).pipe(Be(1),De(r=>{if(!r)return e(t);let i=t.clone({setHeaders:{Authorization:`Bearer ${r}`}});return e(i)}))};var t2={apiKey:"AIzaSyBp2jGsZKZMtj1NyT_ZDNdvFo0FRX0s-fA",authDomain:"twilio-messaging-8183c.firebaseapp.com",projectId:"twilio-messaging-8183c",storageBucket:"twilio-messaging-8183c.firebasestorage.app",messagingSenderId:"589640940481",appId:"1:589640940481:web:89defb3fca75c118a00d40",measurementId:"G-DZF1YLY099"},RS={providers:[lb(()=>db(t2)),tD(()=>nD()),xh(),xv(SS),wg(bg([AS]))]};var Qd=class t{title=rt("twilio-messaging");static \u0275fac=function(n){return new(n||t)};static \u0275cmp=bn({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){n&1&&ft(0,"router-outlet")},dependencies:[Aa],encapsulation:2})};gg(Qd,RS).catch(t=>console.error(t));
